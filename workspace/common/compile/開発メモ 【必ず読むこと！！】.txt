開発メモ

★本プログラムは、2007.07月切生産４台（E0005-E0008）に書き込み済み
・２００７＿０８＿０１＿Ｇ３＿ＨＰを元に作成
　モータ異常エラー関連パラメータ調整
　＜エンコーダ異常＞
　　モータオン ＆ モータ電流＞0.2A ＆ モータ回転＜1rpm ＆ 5s →エラー
　＜モータロック＞
　　モータオン ＆ モータ電流＞1A ＆ モータ回転＜1rpm ＆ 5s →エラー
　＜モータ断線＞
　　モータオン ＆ モータ電流＜0.1A ＆ 5s →エラー

　＜参考＞
　　1A指令の無負荷インチングにて、6.1rpm/0.2A実測

本プログラムは上記内容のものを元に作成を行う。

・２００７＿１１＿３０＿ＡＺ３
　Ｍ１６との初歩的な通信を行う事ができる。
　（Ｍ３２側の電流、電圧をリモコンのＪＯＧダイアルを使用して調整可能）

・２００７＿１２＿０３＿ＡＺ３
  ２００７＿１１＿３０＿ＡＺ３を元に作成
　①リモコン専用の通信プログラム作成

・２００７＿１２＿０４＿ＡＺ３
　２００７＿１２＿０３＿ＡＺ３を元に作成
　①初期通信部作成

・２００７＿１２＿０５＿ＡＺ３
　２００７＿１２＿０４＿ＡＺ３を元に作成
　①溶接条件選択ＳＷにより溶接条件は選択出来るようにした。
　　（但し、内容は反映されていない）


・２００７＿１２＿０６＿ＡＺ３
　２００７＿１２＿０５＿ＡＺ３を元に作成
　①一元化電圧の設定が出来るようにした。

・２００７＿１２＿０７＿ＡＺ３
　２００７＿１２＿０６＿ＡＺ３を元に作成
　①インチング、ガス点検が出来るようにした。

・２００７＿１２＿０９＿ＡＺ３＿ＮＯ２
　２００７＿１２＿０７＿ＡＺ３を元に作成
　①一元化電圧、設定電流、電圧を記憶できるようにした。
　②送信部のプログラム整理
　③Ｖｅｒ表示ができるようにした（Ｒ８とＭ１６との通信に不具合あり）
　問題点：起動時キー入力を一回で受け付けない。

・２００７＿１２＿１０＿ＡＺ３
　２００７＿１２＿０９＿ＡＺ３＿ＮＯ２を元に作成
　①起動時ＳＷを二回押さないと反応しない不具合修正（２００７＿１２＿０９＿ＡＺ３＿ＮＯ２での問題点の修正）
　②Ｖｅｒ表示の方法を修正　Ｒ８→Ｍ１６→Ｍ３２→スペース→電流、電圧

・２００７＿１２＿１０＿ＡＺ３＿ＮＯ２
　２００７＿１２＿１０＿ＡＺ３を元に作成
　①溶接電流、電圧ＦＢ値を表示できるように変更

・２００７＿１２＿１１＿ＡＺ３
　２００７＿１２＿１０＿ＡＺ３＿ＮＯ２を元に作成
　①詳細指定が出来るようにした。（但し、反映はしていない）

・２００７＿１２＿１１＿ＡＺ３＿ＮＯ２
　２００７＿１２＿１１＿ＡＺ３
　①プリフロー、アフターフローを反映（但し動作未確認）

・２００７＿１２＿１２＿ＡＺ３＿ＮＯ３
　２００７＿１２＿１１＿ＡＺ３＿ＮＯ２を元に作成した。
　①ガス起動、停止を修正
　②詳細内容をさわるとＪＯＧの移動量が電流、電圧に影響する不具合修正
　③トーチＳＷ外部入力部修正
　④インチング停止スロープが効かないので、停止スロープ中はctlclsStop( )を毎回実行するように変更。原因不明
　⑤なお、ＣＡＬＣやＤＳＰ、テーブルは田中さんが作成したものが入っている。

・２００７＿１２＿１３＿ＡＺ３
　２００７＿１２＿１２＿ＡＺ３＿ＮＯ３を元に作成した。
　①アフターフロー中にトーチＳＷを再起動すると、スローダウンにいったままになってしまう→ロボット同様一旦ＩＤＬＩＮＧに
　　戻るように修正した。

・２００７＿１２＿１４＿ＡＺ３
　２００７＿１２＿１３＿ＡＺ３を元に作成した。
　①パルスを選択出来るようにした。（パルスモードは制御法、パルスタイプは詳細のＰ００で選択００：通常　０１：ディップ）
　②溶接条件の各種表示が出来るようにした。
  ③リモコンへの転送を１００ｍＳ置きから２００ｍＳ置きに変更（負担軽減のため）
　④制御法がない場合に制御法のＬＥＤが点滅するように変更

・２００７＿１２＿１９＿ＡＺ３
　２００７＿１２＿１４＿ＡＺ３を元に作成した・
　①リモコンへの転送を１００ｍＳ置きに戻した。（２００ｍＳではＰＣ通信の送信間隔と同じためＳＧ１は正常通信できないため）
　②２３２通信時、外部トーチＳＷを受け付けないようにしていたが、受け付けることができるように変更。

・２００８＿０１＿２２＿ＡＺ３
　２００８＿０１＿１９＿ＡＺ３を元に作成した・
　①溶接状態をリモコンに送信できるように変更
　このプログラムは溶接電流・電圧測定値をテスト的にリモコンに送信できるように変更している。

・２００８＿０１＿２２＿ＡＺ３＿ＮＯ１
　２００８＿０１＿２２＿ＡＺ３を元に作成した・
　①溶接中に指令値と測定値を判別するためのビットを送信するようにした。
　　溶接状態のデータの最上位ビットＯＮで指令値、ＯＦＦで測定値

・２００８＿０２＿０８＿ＡＺ３
　２００８＿０１＿２２＿ＡＺ３＿ＮＯ１を元に作成した・
　①パルスモード０ｘ０７を認識出来るようにした
　②パルスモード、パルスタイプのバックアップを取るように変更
　　→これらのことが出来ていなかったので、正常にパルスの番地をアクセスすることが出来なかった。

・２００８＿０２＿０９＿ＡＺ３
　２００８＿０２＿０８＿ＡＺ３を元に作成した・
　①パルスモード０ｘ０７の認識に不具合があったので修正
　　検索テーブルの内容が０ｘ０３、０ｘ０５、０ｘ０７となってしまい、０ｘ０７のテーブルを検索出来ない場合が生じるのを
　　修正→検索テーブルに０ｘ０７のキーを作らないように変更

・２００８＿０２＿１３＿ＡＺ３
　２００８＿０２＿０９＿ＡＺ３を元に作成した・
　①通信エラー（リトライ回数満了による回線の切断）を防ぐためリモコン通信時はリトライ回数を２１回にした。

・２００８＿０２＿１８＿ＡＺ３
　２００８＿０２＿１３＿ＡＺ３を元に作成した・
　①スタック領域を１０００Ｈから２０００Ｈに変更　→　
　　　　・スローダウンのデータが本溶接に反映される（メイン溶接スロープが効かない）問題が無くなった。
　　　　・溶接中溶接電流を変更しても電流が変わらない問題がなくなった。
　②溶接中溶接電流を変更しても電圧および周波数が変更されない（電流値のみ変更される）問題
　　（但し指令電圧表示は変更される）
　　table_access_classを変更
　　一元化電圧設定にすると毎回一元電圧再計算および半固定データを計算していた。
　　→溶接条件（指令値除く）変更以外は上記計算を行わないように変更
　　→一元化電圧設定時、溶接電流の変更に伴い溶接電圧、周波数が変更されるようになった。

・２００８＿０２＿２１＿ＡＺ３
　２００８＿０２＿１８＿ＡＺ３を元に作成した・
　①ＭＯＮＩ２１に対応した（半固定パラメータ３を受信出来るように変更）


・２００８＿０２＿２５＿ＡＺ３＿ＮＯ２
　２００８＿０２＿２５＿ＡＺ３、ＮＯ１を元に作成した・
　①ローパルス仕様作成中（入力部一部作成　確認済み）

・２００８＿０２＿２６＿ＡＺ３
　２００８＿０２＿２５＿ＡＺ３ＮＯ２を元に作成した・
　①ローパルス仕様作成中（入力部作成終了）

・２００８＿０２＿２７＿ＡＺ３
　２００８＿０２＿２６＿ＡＺ３を元に作成した・
　①初期電流動作シーケンス済み

・２００８＿０２＿２７＿ＡＺ３＿ＮＯ１
　２００８＿０２＿２７＿ＡＺ３を元に作成した・
　①ローパルス動作シーケンス実装済み


・２００８＿０２＿２８＿ＡＺ３
　２００８＿０２＿２７＿ＡＺ３＿ＮＯ１を元に作成した・
　①ローパルス動作シーケンス不具合修正


20080304
井原さん修正
30A以下設定時の設定リセット動作修正
高級リモコン、電源投入時の、０A,０V表示を削除。

20080306
GB3検討
MAG2、可変V8を倍とする。各変数X2（min,max含）とする。

20080306
M32_New_20080306-1_50kGB_中川確認 	ベースに変更
DSPをリフト無しに変更。

20080306
井原さん修正
溶接中に、電流、電圧VRがきかなくなっていた不具合を修正。
（ローパルス実装時の不具合）

//2008.3.21 エラー復帰
エラー復帰
L0_main.c　中のエラーを復活
L2_err_level3_class.c　中、ダブルインバータのアンバランスエラーを無効化

//2008.03.24
リモコン初期時　Yd-350AZR を表示
リモコン設定下限値　15Aに変更

//2008.03.27
井原さん修正
・周波数微調(P00)、ベース微調機能(P01)の追加。
・スタートユニットリレーシーケンス変更

//2008.03.27　リレー対策
CD_OUT にてポート出力していた。
ショーでは、p10_2を スタートリレー駆動のため利用するため、
CD_OUT行を削除する。ついでに、ERR_OUT,ALRM_OUT を削除する。

//2008.03.31
データ変更（中川さん）

//2008.03.31
井原さん修正、データリセット機能追加。
電源投入時、微調整項目を全て初期化する。JWS対策。
（P05、P06、プリフロ、アフタフロは初期化しない）

//2008.04.02
データ変更（中川さん）　ALスタート関連

//2008.04.02
井原さん修正
微調整データが不定（大きい値）となり、電圧表示が化ける件の修正

・２００８＿０６＿１２＿ＡＺ３
　２００８＿ＪＷＳ最終を元に作成した・
　①半固定パラメータをＭＯＮＩ２３によって読み込みができる仕様に変更。


・２００８＿０７＿２８＿ＡＺ３＿ＩＨ
　２００８＿０６＿１２＿ＡＺ３から本日までの追加分
　（新型コントローラ対応）

・２００８＿０７＿２９＿ＡＺ３＿ＩＨ
　２００８＿０７＿２８＿ＡＺ３＿ＩＨを元に作成
　①シーケンス作成（現状：ノーマル、クレータ、イニシャルクレータ）パルス無し
　　注意：シミュレータで実験を行うためプログラムの一部を改変している。
　　　　　//**部は本番では生かす。　またＤＩＯに取り込むためＷＥＬＤ＿ＣＯＵＴを本来の使用方法
　　　　　とは別の使用をしている。（ＯＵＴ部）


・２００８＿０８＿０４＿ＡＺ３＿ＩＨ
　２００８＿０７＿２９＿ＡＺ３＿ＩＨを元に作成
　①シーケンス作成（リピート有り）


・２００８＿０８＿０５＿ＡＺ３＿ＩＨ
　２００８＿０８＿０４＿ＡＺ３＿ＩＨを元に作成
　①スタート電流、電圧、Ｂ条件を詳細メニューに入れた
　②スタート電流シーケンス追加
　③Ｂ条件シーケンス追加
　④詳細メニュー選択時、内容を文字表示できるようにした。


・２００８＿０８＿１９＿ＡＺ３＿ＩＨ
　２００８＿０８＿０５＿ＡＺ３＿ＩＨを元に作成
　①メモリ再生記憶が出来るように変更。（但し、外部メモリが現在ないので、バックアップ領域を使用して試験）
　②溶接条件が点滅状態だと、詳細以降のメニューに入れないように変更
　③プログラム領域が足らなくなったので、ｍｅｍｄａｔの位置を変更（６００００→６５０００に変更）
　　プログラム領域も４Ｂ０００に変更

・２００８＿０８＿２１＿ＡＺ３＿ＩＨ
　２００８＿０８＿１９＿ＡＺ３＿ＩＨ
　①画面を営業要望に変更中

・２００８＿０８＿２２＿ＡＺ３＿ＩＨ
　２００８＿０８＿２１＿ＡＺ３＿ＩＨを元に作成
　①設定メニューに切り替わるように作成。


・２００８＿０８＿２６＿ＡＺ３＿ＩＨ
　２００８＿０８＿２２＿ＡＺ３＿ＩＨ～
　①ＩＩＦ設定、時刻設定部作成

・２００８＿０８＿２７＿ＡＺ３＿ＩＨ（これ以降のプログラムはＺＵＥＰ１４４０５のみ使用可）
　２００８＿０８＿２６＿ＡＺ３ＩＨを元に作成
　①外部ＦＲＡＭのアクセスが出来るようにし、外部メモリに記憶内容が書けるように変更
　　（コンパイル時のメモリモデルも変更）
　②ＴＳポートの変更。（新基板用に変更）
　③詳細データが表示入力できるように変更。
　④プログラム領域、ｍｅｍｄａｔの位置変更。


・２００８＿０８＿２８＿ＡＺ３＿ＴＮＹ（これ以降のプログラムはＺＵＥＰ１４４０５のみ使用可）
　２００８＿０８＿２７＿ＡＺ３ＩＨを元に作成
　①ＩＩＦ関係プログラム（Output系処理、メイン－ＩＩＦ間通信系）の一部対応
　②ＲＴＣ関係プログラム（一部不具合有り）の対応


・２００８＿０８＿２８＿ＡＺ３＿ＩＨ
　２００８＿０８＿２８＿ＡＺ３＿ＴＮＹ
　①詳細内容の一部を調整項目に表示できるように変更。
　②詳細データの表示不具合修正。
　③詳細データ表示時、小数点の位置表示修正。００１→１と表示できるように修正
　④Ｉ２Ｃ＿ＲＴＣ．ｃをｌｉｂフォルダーに上書き（２００８＿０８＿２８＿ＡＺ３＿２＿ＴＮＹが元）


・２００８＿０８＿２９＿ＡＺ３＿ＩＨ
　２００８＿０８＿２８＿ＡＺ３＿ＩＨを元に作成
　①溶接中の調整項目表示時の不具合修正
　

・２００８＿０８＿２９＿ＡＺ３＿ＩＨ＿ＮＯ２
　２００８＿０８＿２９＿ＡＺ３＿ＩＨを元に作成
　①メモリコピーの表示部を作成。

・２００８＿０９＿０１＿ＡＺ３＿ＩＨ
　２００８＿０８＿２９＿ＡＺ３＿ＩＨ＿ＮＯ２を元に作成
　①一時停止１，２をＩＩＦから入力できるようにした。（現在シミュレータで試験を行うため停止している）
　②一時停止１，２入力で、シーケンスがバーンバック、アフターフローに移り、入力中はＴＳを受け取らない動作を作成。
　③メモリイニシャライズ作りかけ。
　④ＩＩＦ通信部修正
　　ロボット関連のコマンドをＩＩＦに送ってしまっていたので、送らないように変更。


・２００８＿０９＿０２＿ＡＺ３＿ＴＮＹ＿ＮＯ１
　２００８＿０９＿０１＿ＡＺ３＿ＩＨを元に作成
　①２００８＿０９＿０１＿ＡＺ３＿ＴＮＹ＿ＮＯ１にて対応した項目「ＲＴＣの動作周波数補正処理を追加」を反映。


・２００８＿０９＿０３＿ＡＺ３＿ＩＨ
　２００８＿０９＿０２＿ＡＺ３＿ＴＮＹ＿ＮＯ１を元に作成。
　①サービスマンメニューに入れるようにした（パスワード入力）
　②サービスマンメニュー　
　　データ入力作成（反映処理未）
　　リセット（反映処理未）
　③設定メニューを抜けた時に関係するパラメータを初期化するようにした。
　　再び設定メニューに入ったら、また０（あるいは１）から始まるようにした。

・２００８＿０９＿０４＿ＡＺ３＿ＩＨ
　２００８＿０９＿０３＿ＡＺ３＿ＩＨを元に作成
　可変パラメータ９６個を転送出来るように変更

・２００８＿０９＿０４＿ＡＺ３＿ＩＨ＿ＮＯ２
　２００８＿０９＿０４＿ＡＺ３＿ＩＨを元に作成
　①ユーザメニューとサービスマンメニューのリセット機能が働くようにした。
　　（ごく一部しか中身なし、今後足していく予定）
　②ＩＩＦ設定の強化
　　・入力部：複数のｃｈに同じ機能が割り当てられないようにした。
　　　　　　　同一の機能が割り当てられるとどちらの入力が正しいのか見分けが付かないため。
　　　　　　　後で設定された方を優先とし、前の内容はＮＯ　ＵＳＥに自動で変更される。
　　・アナログ入力部：複数の電流指令値入力（あるいは電圧指令値入力）が割り当てられないようにした。
　　　　　　　　　　　同一種類（例：ＣＵＲ＿１５ＶとＣＵＲ＿１５Ｖの組み合わせ、ＣＵＲ＿１５ＶとＣＵＲ＿１２Ｖの組み合わせ等）
　　　　　　　　　　　の入力があるとどちらが正しい指令値なのか見分けが付かないため。
　　　　　　　　　　　後で設定された方を優先とし、前の内容はＮＯ　ＵＳＥに自動で変更される。
　　　　　　　　　　　（電圧指令値についても同じメカニズム）


・２００８＿０９＿０４＿ＡＺ３＿ＴＮＹ＿ＮＯ１
　２００８＿０９＿０４＿ＡＺ３＿ＩＨ＿ＮＯ２を元に作成
　①２００８＿０９＿０４＿ＡＺ３＿ＴＮＹ＿ＴＥＭＰにて対応した項目
　　「本体－コントローラー間の「メモリ転送プロトコル」の作成　＃１＆＃２」を反映
　　（但し、最終仕様になっていないので最終反映が必要）


・２００８＿０９＿０４＿ＡＺ３＿ＴＮＹ＿ＮＯ１
　２００８＿０９＿０３＿ＡＺ３＿ＴＮＹ＿ＮＯ１を元に作成。
　①本体－コントローラー間の「メモリ転送プロトコル」の対応
    （但し、現在に於いて転送元／転送先エリアや転送長が不明のためダミーエリア＆ダミー転送長を
　　　メモリ転送テーブルに登録しているため、最終仕様が判明次第メモリ転送テーブルへの反映を忘れずに！！）
　・メモリ転送中は「１５セグＬＥＤは消灯」、「７セグＬＥＤは転送内容『rEC/PLY』と転送完了率の表示」を行う。
    「１５セグＬＥＤは消灯」に関してはI2C-FRAMアクセス中はダイナミック表示が不定期となり、表示がちらつくため
　　無表示（消灯）とした。「７セグＬＥＤは転送内容『rEC/PLY』と転送完了率の表示」の『rEC/PLY』下部のドットは
　　転送中を意味するため点滅するようにした。
　　→Ｍ１６／Ｒ８側プログラムを修正。
　　※Ｒ８－Ｍ１６通信にてパケット長が長い、通信応答が頻繁などの状態が発生すると、Ｒ８側にて「オーバーラン異常」が
　　　発生する場合がある。現在調査中。
　・「コントローラ」→「溶接機」のメモリ転送にて、指定した領域番号と異なる領域番号の記憶データをコントローラが記憶している場合、
　　意図としないデータ上書きを防止するため「ＢＡＤ」を表示し、処理を中断するようにした。
　・メモリ送信(eRC）時、書き込み要求時にＲ８側ＦＲＡＭのヘッダ部を消去してから記憶領域データの本体を書き込み、
　　書き込み終了時にヘッダ部の作成／書き込みを行う。これは、記憶領域データの本体部書き込み時にエラーなどで
　　記憶データが異常となった場合、記憶したデータを無効（破棄）とするための処置である。（Ｒ８側プログラム対応）
　②カレンダー機能にて、カレンダー設定項目にたどり着いたときの日時を再取得するようにした。


・２００８＿０９＿０９＿ＡＺ３＿ＩＨ
　２００８＿０９＿０４＿ＡＺ３＿ＴＮＹ＿ＮＯ１
　①外部選択ユニットより、記憶ｃｈを呼び出すようにした。
　②再生について
　　記憶されていないｃｈは飛ばして選択するようにした
　③記憶部に削除（ｄｅｌ）を追加し、ｃｈを削除できるようにした。
　④ガス制御（９０秒制御）を追加
　④ガス、インチングボタンを逆（仕様通り）にした。

・２００８＿０９＿１０＿ＡＺ３＿ＴＮＹ＿ＮＯ２
　２００８＿０９＿０９＿ＡＺ３＿ＩＨを元に作成。
　①２００８＿０９＿０８＿ＡＺ３＿ＴＮＹ＿ＮＯ１／２００８＿０９＿０９＿ＡＺ３＿ＴＮＹ＿ＮＯ１／２００８＿０９＿０９＿ＡＺ３＿ＴＮＹ＿ＮＯ２にて
　　対応した内容を反映。
    1)外部選択ユニット、ＩＩＦからのアナログ入力による指令値の設定処理のプログラムの作成。
    　外部選択ユニットに関しては未試験だが、指令値反映処理に関しては電流指令値に関してのみ確認終了。
    2)ＩＩＦ－本体での通信プロトコル破綻時の復旧処理を追加。現在確認中。
    3)ＩＩＦからのアナログ入力による指令値の設定処理のプログラムの作成。
    　指令値反映処理に関しては電流／電圧（一元／個別）指令値に関して確認終了。
    　ただし、個別電圧指令値の上下限値が不明なので未対応。
    　外部選択ユニットに関しては井原氏が作成しているので、谷川作成分は削除すること。
    4)ＩＩＦ－本体での通信プロトコル破綻時の復旧処理を追加、確認終了。
    　ＩＩＦ認識時／破綻時／復旧時の表示が必要かどうか要確認。
    5)ファン＃１／＃２制御の対応
       ただし、Ｒ８側のＰ０出力ポートの設定が出来ないため未確認
    6)エラー記録処理を追加

・２００８＿０９＿１０＿ＡＺ３＿ＩＨ
　２００８＿０９＿１０＿ＡＺ３＿ＴＮＹ＿ＮＯ２を元に作成
　①詳細メニューのパスワード設定を作成
　②画面ロック（詳細メニュー）を作成
　③詳細メニューの番号を直値からｄｅｆｉｎｅ定義に変更した。


・２００８＿０９＿１１＿ＡＺ３＿ＩＨ
　２００８＿０９＿１０＿ＡＺ３＿ＩＨを元に作成
　①スタートシーケンスを入れた。
　②上記に伴い出力ポートを変更（ＭＧ制御を削除しスタート回路制御ポートに変更）


・２００８＿０９＿１１＿ＡＺ３＿ＴＡ
　２００８＿０９＿１１＿ＡＺ３＿ＩＨを元に作成

　実溶接施工ＯＫ。

＜M32R＞
・calc.c
　基準周波数、10usに変更。駆動周波数100kHz（キャリア50kHz＋ペア制御オフ仕様）
・L2_input_ext_class.c 中、_hpiSetAddress( 0x00000229 ) →( 0x0000027F )
　モータ回転数取得アドレス（M32R ⇔ DSP）変更。可変２対応でｱﾄﾞﾚｽが重複したため。
・main.c
　error_manager 復帰
・L2_input_ext_class.c
　実験用シーケンス削除、元のシーケンス復活

・hpiDSP.c
ステータス　StsData_Tbl　に可変２テーブル情報を追加、TAWERS I/Fキバンソース参照
static  CMDTODAT    const   StsData_Tbl[ ] =
{
    { 0 , 0 , 0                         , DummyProc },
    { 0 , 64 ,          0               , DummyProc },  //溶接条件指令
    { 0 ,  8 , WELDOUTSTS               , DummyProc },  //溶接出力状態
    { 0 ,  8 , SRVSPDCOND               , DummyProc },  //サーボ速度指令
    { 0 ,  8 , SRVPLSCNT                , DummyProc },  //サーボパルスカウンタ/モータ電流
//2008.09.11
    { 0 ,  32 ,         0               , DummyProc },  //溶接条件指令２
    { 0 , 0 , 0 , DummyProc }   // END
};


・H\ExternFunc.h
wcondBuff のBuff数を修正
wcondBuff[ 64 ] → wcondBuff[ 96 ] とする。

・Lib\ram.c
wcondBuff のBuff数を修正
wcondBuff[ 64 ] → wcondBuff[ 96 ] とする。

＜固定パラメータ＞
最新に変更。ロケーションデータ変更済

＜ＦＰＧＡ＞
最新に変更。
ポート変更。ZUEP14405等最新キバン専用
Spartan2グレード５対応、専用コンパイル。

＜DSP＞
2008.09.11最新DSPベースに変更。可変２対応。

＜テーブル＞
可変２、半固定３対応テーブルに変更。
交流MIGデータのH22=300A相当とする。2次破壊対策。
SP-MAG2データ追加。短絡データ、パルスデータに分割する。


・２００８＿０９＿１２＿ＡＺ３＿ＴＮＹ＿ＮＯ２
　２００８＿０９＿１１＿ＡＺ３＿ＴＡ（Ｎ）を元に作成。
　①以下の変更分に関して対応した内容を反映。
      ・２００８＿０９＿１０＿ＡＺ３＿ＴＮＹ＿ＮＯ３
      ・２００８＿０９＿１１＿ＡＺ３＿ＴＮＹ＿ＮＯ１
      ・２００８＿０９＿１１＿ＡＺ３＿ＴＮＹ＿ＮＯ２
      ・２００８＿０９＿１１＿ＡＺ３＿ＴＮＹ＿ＮＯ３
      ・２００８＿０９＿１２＿ＡＺ３＿ＴＮＹ＿ＮＯ１
    1)ファン＃１／＃２制御の対応及び動作確認（Ｒ８側のＰ０出力ポートの設定はプロテクトレジスタの操作が必要）
  　2)エラー表示の追加
  　3)エラー履歴表示の追加
  　　※尚、エラー履歴エリアの実体はＦＲＡＭにロケートし、通常使用時には内部ＲＡＭに転送後、
  　　　変更時にのみＦＲＡＭエリアに書き込むよう対応した。
  　　　また、エラー発生時刻と日付の切り替えはＪＵＧ２を利用するよう対応した。
      ※インクルードサ－チパスをＣドライブからＤドライブに変更したので注意すること！！
  　4)WLDTBL_PTR、OLD_WLDTBL_PTRの値を「0x0070000」から「0x0080000」へ変更したので、ロケーターのオプションの変更を忘れなく！！
  　5)pSOCの値を「0x00056000」から「0x00060000」へ変更したので、ロケーターのオプションの変更を忘れなく！！
    6)「GB31d1.ms」の「DAT_C1, Data, locate=h'0006E000」を「DAT_C1, Data, locate=h'0007E000」に変更した。
    7)ディップスイッチ１－１をＯＮにすると、エラーの確認は行わなくなるようにした。
　　　また、IIFを接続時する場合は一度、ディップスイッチ１－１をＯＮにて起動後のIIF接続が認識されたことを確認後、
　　　ディップスイッチ１－１を元に戻して下さい。
　②ＦＲＡＭが出荷時（データーが不定時）の初期化処理の改善
　　パスワード、画面ロックの初期化
　【注意】
　　1)非常停止＃２、電流検出異常、一次電圧異常、モータ回転異常（モータ過電流異常）はデバッグのため削除中。
　　　グローバル検索にて「@@@@@@」文字列検索で識別して、必要に応じて削除の解除を行ってください。
    2)コントローラ側のプログラム（Ｍ１６Ｃ、Ｒ８Ｃ）は最新のプログラムにしてください。



・２００８＿０９＿１６＿ＡＺ３＿ＩＨ
　２００８＿０９＿１２＿ＡＺ３＿ＴＮＹ＿ＮＯ２を元に作成
　①ＡＣのテーブルをサーチできるように変更
　②テーブルサーチの不具合修正
　　従来ＧＺではパルス種別が０ｘ０３、０ｘ０５と並んだ時は最初に見つけた方しかサーチできなかった
　　（不具合）０ｘ０３、０ｘ０５、０ｘ８３、０ｘ８５全てサーチ出来るように修正



・２００８＿０９＿１６＿ＡＺ３＿ＴＮＹ＿ＮＯ２
　２００８＿０９＿１６＿ＡＺ３＿ＩＨを元に作成
　①以下の変更分に関して対応した内容を反映。
　　２００８＿０９＿１２＿ＡＺ３＿ＴＮＹ＿ＮＯ２の一部
　　２００８＿０９＿１２＿ＡＺ３＿ＴＮＹ＿ＮＯ３
    ２００８＿０９＿１６＿ＡＺ３＿ＴＮＹ＿ＮＯ１
　　1)エラー発生時の履歴記憶の移植ミスを改善。
　　2)複数のエラーが発生した時のエラー記憶方法を改善
    3)ＦＡＮ制御を変更
　　　・本体電源起動後、７分間はＦＡＮ動作モード３（弱）にする。
  　  ・溶接終了時、３秒間はＦＡＮ動作モード２（強）をキープし、その後ＦＡＮ動作モード３（弱）に移行する。
　　4)エラー発生時のキー受付を無効化とした
　【注意】
　　1)非常停止＃２、電流検出異常、一次電圧異常、モータ回転異常（モータ過電流異常）はデバッグのため削除中。
　　　グローバル検索にて「@@@@@@」文字列検索で識別して、必要に応じて削除の解除を行ってください。


・２００８＿０９＿１６＿ＡＺ３＿ＩＨ＿ＮＯ２
　２００９＿０９＿１６＿ＡＺ３＿ＴＮＹ＿ＮＯ２を元に作成
　①重畳信号を出力出来るように変更
　　スローダウンの電流検出ＯＮで出力ＯＮ、アフターフローで出力ＯＦＦ（田中さんに確認依頼）
　　これに伴って、Ｒ８側も変更。


・２００８＿０９＿１６＿ＡＺ３＿ＩＨ＿ＮＯ３
　２００８＿０９＿１６＿ＡＺ３＿ＩＨ＿ＮＯ２を元に作成
  ①ＥＮ比率計算部作成（但し、係数等は最終ではない）
　②計算されたＥＮ比率に調整（Ｐ２２）を加算、減算出来るようにした。
　③ＥＮ比率をＤＳＰに転送できるように変更。

・２００８＿０９＿１６＿ＡＺ３＿ＩＨ＿ＮＯ４
　２００８＿０９＿１６＿ＡＺ３＿ＩＨ＿ＮＯ３を元に作成
　①０ｘ０７、０ｘ８７テーブルがサーチ出来ないケースがある不具合を修正
　　例：０ｘ０５、０ｘ０７というテーブルがあった場合、従来の方法だとパルスしかサーチできない。
　　　　０ｘ０５が先頭にある場合等をチェックしておらず、先頭が０ｘ００の時しかチェックしていなかったため。
　　　　従って、０ｘ０７にある０ｘ０７の中に含まれる０ｘ０３は出てこないので、パルスしかサーチ出来なかった。
　②起動時、パルス設定が元々されている場合は、短絡のテーブルを引いていた不具合修正。
　　（何かのキーを押すと、正常になる）
　　原因は、rob_pc_re_rcv_classで、テーブルが実在することを確認し、下記行を実行しなければならないが、実行していなかったため、
　　一元の再計算をおこなっていなかった。（パルスありなしが不明になってしまった。）
                     if (guc_Remo_table_check_flag == true)
                     {
                         gtt_Internal_pack.Data.In.fWireDiameter.ALL          = guc_Wire_condition_data;      // ワイヤ径
        		         gtt_Internal_pack.Data.In.fWelding.ALL               = guc_Method_condition_data;           // 溶接法
        		         gtt_Internal_pack.Data.In.fWireMaterial.ALL          = guc_Material_condition_data;      // ワイヤ材質
　　
                         //パルスモード 2007.12.14
                         switch (guc_Pulse_mode_data)
                         {
                                 //DC
                                 case 0x03:
                                      gtt_Internal_pack.Data.In.fPulseMode.ALL  =  0x10;  // 短絡
                                      break;
                                 case 0x05:
                                      gtt_Internal_pack.Data.In.fPulseMode.ALL  =  0x00;  // パルス
                                      break;
                                 //AC 2008.07.18現状コードが決まっていない。（仮）
                                 case 0x83: //2008.09.12
                                      gtt_Internal_pack.Data.In.fPulseMode.ALL  =  0x10;  // 短絡
                                      break;
                                 case 0x85: //2008.09.12
                                      gtt_Internal_pack.Data.In.fPulseMode.ALL  =  0x00;  // パルス
                                      break;
                                 default:
                                      gtt_Internal_pack.Data.In.fPulseMode.ALL  =  0x10;  // 短絡
                                      break;
                         }
                         gtt_Internal_pack.Data.In.fPulseMode.ALL  =  gtt_Internal_pack.Data.In.fPulseMode.ALL | 0x03;  //通常パルス　上記に伴い追加
                     }
　　今後コントローラ未接続時やロボット接続時注意する必要がある。
　　（ロボット接続時は起動時ロボットが溶接条件を送ってくるが、コントローラ未接続時は何も送ってこないので初期処理が必要）

・２００８＿０９＿１７＿ＡＺ３＿ＩＨ
　２００８＿０９＿１６＿ＡＺ３＿ＩＨ＿ＮＯ４を元に作成
　①昨日作成した、①、②に漏れがあったので修正した。
　　（組み合わせによってサーチできないケースがあったので、組み合わせ部を修正した）
　②溶接条件で、テーブルに存在しない組み合わせ時、点滅をするが、この状態で電源をＯＦＦし、再起動すると存在しない組み合わせで
　　で点滅もせず起動。（当初、存在しない組み合わせは保存しないことにしていたが、メモリを内部ＲＡＭから外部ＦＲＡＭに変更した際
　　保存してしまうようになってしまっていた）
　　テーブルに存在しない組み合わせは保存しないように変更した。



・２００８＿０９＿１７＿ＡＺ３＿ＴＮＹ＿ＮＯ３
　２００８＿０９＿１７＿ＡＺ３＿ＩＨを元に作成
　①以下の変更分に関して対応した内容を反映。
　　２００８＿０９＿１７＿ＡＺ３＿ＴＮＹ＿ＮＯ１(Phase11)
　　２００８＿０９＿１７＿ＡＺ３＿ＴＮＹ＿ＮＯ２(Phase12)
　　1)モータ回転数、モータ電流、短絡回数を表示選択できるよう暫定対応した。（詳細メニューの４４番）
　　2)詳細メニューの５０番目の項目に対応させた（今までは表示テーブルなど４９番目しか対応できていなかった）
　　3)IIFとの通信期間中にIIF接続確認時間更新を行うようにした。
　　　（通信異常が発生した場合、リカバリー処理が終わる前にIIF切り離し確定が起こってしまうため）
　　4)特殊パラメータの項目選択での不具合に対応（符号無し条件文だったため項目０にて停止させることが出来なかった）
　　5)ＩＩＦ接続時に於けるＩＩＦ未定義外部信号（トーチスイッチ等）の異常検出タイミングで
　　　異常検出する前に溶接シーケンスが実行されてしまう不具合に対応。
　　　また、エラー発生にも関わらず溶接シーケンスが実行されてしまう不具合にも対応。
　　6)溶接終了時に本溶接時の溶接電流/電圧を点滅表示するように対応。
　　　点滅表示時間は詳細メニューの４５番を使用。
　　7)詳細モードにて最上段のキーを押すと、機能（動作）してしまう不具合に対応。

　　【！！注意！！】
　　　1)非常停止＃２、電流検出異常、一次電圧異常、モータ回転異常（モータ過電流異常）はデバッグのため削除中。
　　　　グローバル検索にて「@@@@@@@」文字列検索で識別して、必要に応じて削除の解除を行ってください。



//2008.09.18 2008_09_18_AZ3_TAN
2008_09_17_AZ3_TNY_NO3 ベースに作成
復帰
     puc_Err_code = cd_err_member(puc_Err_code);                 //電流検出異常
     puc_Err_code = primary_voltage_err_member(puc_Err_code);    //一次電圧異常

・２００８＿０９＿１９＿ＡＺ３＿ＩＨ
　２００８＿０９＿１８＿ＡＺ３＿ＴＡＮを元に作成
　溶接条件の内ＤＣ、ＤＣＰ、ＡＣ、ＡＣＰの選択が実際にテーブル内にデータが存在しているにも関わらず、検索出来ない
　（例えば、ＤＣ、ＤＣＰ、ＡＣＰが実際には存在するのにコントローラにはＤＣ、ＡＣＰしか表示されない）不具合があったので
　　修正した。
　０ｘ０３、０ｘ０５、０ｘ０７、０ｘ８３、０ｘ８５、０ｘ８７の全ての組み合わせ（６３通り）を検索するようにした。


・２００８＿０９＿１９＿ＡＺ３＿ＴＮＹ＿ＮＯ２
　２００８＿０９＿１９＿ＡＺ３＿ＩＨを元に作成
　①以下の変更分に関して対応した内容を反映。
　　２００８＿０９＿１８＿ＡＺ３＿ＴＮＹ＿ＮＯ１(Phase13)
　　２００８＿０９＿１９＿ＡＺ３＿ＴＮＹ＿ＮＯ２(Phase14)
　　1)エラー発生時の情報記録方法を、エラー情報のみ記録する事とする。
　　2)ＩＩＦ接続情報の記録方法を、ＩＩＦ接続情報のみ記録する事とする。
　　3)エラー復旧時に、エラー発生前の画面状態（点滅含む）に戻らない不具合に対応。
　　　但し、コントローラ間の通信プロトコルの限界により幾分かのタイムラグ(0.5sec)が発生する。
　　4)ＩＩＦ接続状態時にＩＩＦからの接続確認待ちメッセージを表示させた。
　　5)ディップスイッチ１－８をＯＮにすると、エラーの確認は行わなくなるように変更した。
　　6)ディップスイッチ１－８をＯＮにすると、一元過電圧の自動更新が出来ない不具合に対応。

　　【！！注意！！】
　　　1)非常停止＃２、電流検出異常、一次電圧異常、モータ回転異常（モータ過電流異常）等はデバッグのため削除しています。
　　　　ファイル・グローバル検索にて「@@@@@@@」文字列検索で検索して、必要に応じて削除の解除を行ってください。

・２００８＿０９＿２２＿ＡＺ３＿ＩＨ＿ＥＮ
  ２００８＿０９＿１９＿ＡＺ３＿ＴＮＹ＿ＮＯ２を元に作成
　①ＥＮ比率を変更できるようにした。（Ｖ８５への反映は未）
　②ＥＮ比率の調整がＥＮ比率に反映できるようにした。
　③ＥＮ比率（調整値含む）より周波数が変更されるようにした。（反映は未）
　④交流溶接時、スタートの一定区間ＥＮ０％（周波数もＥＮ０％で計算）にするようにした。
　　（現在、スタートの一定区間の時間はＰ２９で調整ができるようにした）
　⑤例：条件：１．ＥＮ比率の刻みは１である。
　　　　　　　２．スタート一定区間の刻みは５である。
　　　　先ず詳細のＰ２９を調整後または最後にＰ２９にいった状態で、溶接モードに戻り、ＥＮ比率を調整すると
　　　　刻みは５になってしまう不具合があった。
　　　　これを修正。L2_rob_pc_re_rcv_class.cの１３５０行目付近の調整ボタン押下による調整内容変更時の処理を修正した。

  
　①とも②とも反映ズミでした。（２００８年０９月２４日確認）



・２００８＿０９＿２４＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１
　２００８＿０９＿２２＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①以下の変更分に関して対応した内容を反映。
  ２００８＿０９＿１９＿ＡＺ３＿ＴＮＹ＿ＮＯ３(Phase15)
  ２００８＿０９＿２２＿ＡＺ３＿ＴＮＹ＿ＮＯ１(Phase16)
  ２００８＿０９＿２４＿ＡＺ３＿ＴＮＹ＿ＮＯ１(Phase17)
　　1)試験用に表示させていた現在時刻を削除すると、表示部分に前項目の文字が残る不具合に対応。
　　2)溶接終了後時の表示処理を完全詳細メニュー対応化
　　3)溶接時の再生動作は本溶接電流指令値／電圧指令値のみ再生する。
　　4)組み合わせチェックフラグの初期化を追加。
　　5)一部内部変数にメモリリークが発生していたのを修正。
　　6)記録モード、設定モード時はトーチスイッチ等の受付によるシーケンス動作は行わない。
　　7)I-I/F初期接続確認時の表示メッセージを「BUILT IN I-I/F   」から「I/F WAS BUILT IN.」、
　　　I-I/F接続確立待ち時の表示メッセージを「NOW LINK WAITING.」から「I/F LINK WAITING.」、
　　　I-I/F接続失敗時の表示メッセージを「I-I/F COM. FAILED」から「I/F LINK FAILED. 」、
　　　I-I/F接続失敗から復帰時の表示メッセージを「I-I/F RETURNED   」から「I/F LINK REVIVAL.」へ変更。
　　8)Ｍ３２Ｒ側ＦＡＮ２の制御をＲ８Ｃ側ＦＡＮ２＿ＣＴＲＬを同期制御させる。
　　　（今まではＭ２３Ｒ側のＦＡＮ２の代わりに、Ｒ８Ｃ側のＦＡＮ２＿ＣＴＲＬを制御していたため）
　　9)溶接中は「記憶」を選択できなくする（溶接中なのに「記憶」操作をするのはオペレーション的におかしいので除外する）
　 10)溶接中、「詳細」「再生」時は表示単位の変更を行わない（通常、溶接中の表示単位は「Ｖ」を表示するようにしている）

　　【！！注意！！】
　　　1)非常停止＃２、電流検出異常、一次電圧異常、モータ回転異常（モータ過電流異常）等はデバッグのため削除しています。
　　　　ファイル・グローバル検索にて「@@@@@@@」文字列検索で検索して、必要に応じて削除の解除を行ってください。
    　2)デバッグのためエラー監視処理を削除しています。必要に応じて削除の解除を行ってください。
      3)デバッグのため初期短絡確認をＭ３２Ｒ側でシミュレートしています。必要に応じて削除の解除を行ってください。



・２００８＿０９＿２４＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿０９＿２４＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１を元に作成
  ①テスト用に④ﾃﾞﾌｫﾙﾄEN比率算出用送給範囲２判定値を13000にしていたが20000に変更
  ②田中さん要請により、重畳充電許可信号を反転させた。（ハードが直るまでの一時的措置）


・２００８＿０９＿２６＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿０９＿２４＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①ＥＮ比率を変更できるように修正した。（前回のものはＤＳＰに送信されていなかった）
　②交流時一元テーブルの値に対しＥＮ比率による演算をするようにした。（専用テーブルが引けるように変更）
　　（一応動作はしているが詳細には未確認）
　③スタート時ＥＮ０％の電圧が設定できるようにしたが詳細は未確認。
　　（なお、アイドリング中は一元電圧はＥＮ比率によって計算されたものを表示する必要がある－＞現在未確認）


・２００８＿０９＿２９＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿０９＿２６＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①直流設定時は、
                        gtt_En.f_AC_Frq_ENa1_A = 0;
                        gtt_En.f_AC_Frq_ENa1_B = 0;
                        gtt_En.f_AC_Frq_ENa1_C = 0;
                        gtt_En.f_AC_Frq_ENa2_A = 0;
                        gtt_En.f_AC_Frq_ENa2_B = 0;
                        gtt_En.f_AC_Frq_ENa2_C = 0;
　とすることに変更。（特に問題はないと思うが、Ｖ１３の計算は交直両方で行われているので、万が一に備え直流時は０クリア
　とした）
　②スタート時、ＥＮが０％設定になっているため、一元電圧の表示がＥＮ０％時の表示になってしまう。
　　この状態だとアイドリング時にＥＮ変更による一元電圧の変化が分からないので、スタート期間のみ
　　ＥＮ０％時の一元電圧表示とし、その他（アイドリング時含む）の時はＥＮ比率に従った一元電圧が表示できるように変更。


・２００８＿１０＿０１＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿０９＿２９＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①初期、本電流、クレータのＥＮ計算時、上書きされてしまい、正確な計算が出来ない不具合修正。
　②初期、本電流、クレータそれぞれでＥＮ比率が変更できるように修正。
　③初期、本電流、クレータでそれぞれ、ＥＮ比率に応じた一元電圧が算出できるように変更。
　
　②、③についてはシミュレータで動作確認済み。



・２００８＿１０＿０２＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１
　①以下の変更分に関して対応した内容を反映。
　２００８＿０９＿２４＿ＡＺ３＿ＴＮＹ＿ＮＯ２(Phase17)
　２００８＿０９＿２５＿ＡＺ３＿ＴＮＹ＿ＮＯ１(Phase18)
　２００８＿０９＿２６＿ＡＺ３＿ＴＮＹ＿ＮＯ１(Phase19)
　２００８＿１０＿０１＿ＡＺ３＿ＴＮＹ＿ＮＯ１(Phase20)
　1)溶接終了時の溶接電流/電圧表示時での表示単位を「Ｖ」に変更し、表示終了時に現在表示している表示モードの表示単位を表示する。
　　（現行は表示モードの表示単位に依存されている）
　2)メモリ転送処理の不具合を改善（別のプログラム変更を行ったための影響と推測される）
　3)システム起動時にコントローラのＪＯＧダイアルを高速回転させると、異常な表示（特に電圧）を行う不具合に対応。
　　（Ｍ３２Ｒ側にて初期処理中（初期表示も含む）の場合はコントローラからの受信ＪＯＧコマンドをスルー（通信プロトコルは守が）するようにした）
　4)電圧の調整範囲を決定した。（通常下限値：５Ｖまで、一元電圧調整：±９．８Ｖまで　←　ＥＮ比率処理関係のプログラム変更の関係上、調整上下限のみ確認）
　5)溶接中での下記コントローラー操作禁止事項を追加した。
　　1:溶接材料、ワイヤ径、溶接法、制御法の変更。
　　2:クレーター溶接系の変更。
    3:ガス点検、ワイヤ・インチングの操作
　6)溶接終了後表示処理中での以下のコントローラ操作禁止事項を追加した。
　　1)設定電流値表示切り替え、一元、調整、ガス点検、ワイヤ・インチング以外の設定ボタン。
　　　ただし、明記したボタンについては溶接終了後表示処理終了後に溶接終了後表示処理中に受け付けた情報を反映させるので、
　　　検討（改善）が必要。→全ての設定ボタンの操作を禁止とした。
　7)溶接終了後表示処理中に再び溶接を開始すると、モニタ電流/電圧値が点滅したままになる不具合を改善。
　8)詳細設定モード時では溶接動作へ移行しない。また、溶接中では詳細設定モードへ移行しない。
　9)溶接終了後表示処理の補助表示（モータ電流、モータ回転数、短絡数）の表示制御ブロック指定に
    複数指定可能な新機能を追加。（【！！注意！！】コントローラ側のソフト(R8C,M18C)も変更が必要）
 10)溶接終了後表示処理中にエラーが発生した場合、エラー復帰後に溶接終了後表示処理が終了しない不具合に対応。
　　（エラー表示中に溶接終了後表示処理が終了してしまうので、エラー発生時の表示状態を記憶してしまうため表示の点滅が終了しないと思われる）
　　→エラー発生中は溶接終了後表示処理の処理タイマーを停止させ、エラー復帰後に復旧させることで矛盾を回避させる）
 11)ＩＩＦ未検出、再検出表示を一時的に禁止にする。（表示復帰時の処理に不具合が生じるため、新たに仕様が決まるまでの暫定処理）

　　【！！注意！！】
　　　1)非常停止＃２、電流検出異常、一次電圧異常、モータ回転異常（モータ過電流異常）等はデバッグのため削除しています。
　　　　ファイル・グローバル検索にて「@@@@@@@」文字列検索で検索して、必要に応じて削除の解除を行ってください。
    　2)デバッグのためエラー監視処理を削除しています。必要に応じて削除の解除を行ってください。
      3)デバッグのため初期短絡確認をＭ３２Ｒ側でシミュレートしています。必要に応じて削除の解除を行ってください。


・２００８＿１０＿０３＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿０２＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１を元に作成
　①ロボット接続が出来るように修正。
　　・コントローラを接続された状態で、ロボット接続が行われるとコントローラに”ＲＯＢＯＴ　ＣＯＮＮＥＴ”の表示がされ
　　　コントローラは動作しなくなる。（コントローラとの通信を遮断する）
　　・電流指令値や電圧指令値はコントローラのＪＯＧ変化量を元に計算していたが、ロボットから貰う値のみ使用するように変更。
　　・従来は”ComuniPack.Data.bRS422Connection”のフラグのＯＮ－ＯＦＦでロボット通信かどうかを判断していたが、このフラグ
　　　はＩＩＦも使用するため、ロボット接続がされた時は”guc_Robot_connect_flag”を設けた。
　　　（通信異常時はこのフラグもクリアするように変更）
　　・ＥＮ比率の計算は、ロボットから貰う指令電流とＥＮ調整値によりロボット接続時専用で行うように変更。
　　・ＥＮ比率計算結果問い合わせコマンド等ロボットとやり取りを行うコマンドを追加。


・２００８＿１０＿０６＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿０３＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①ガス処理修正
　　・ガスボタンが押された状態で、溶接を開始された場合、溶接開始でガスチェックが無効になるように修正
　　・ＩＩＦでガスチェックを設定した場合、コントローラのガスチェックは無効になるように変更
　　・ＩＩＦでのガスチェックでも、９０秒後動作停止と溶接開始でガスチェックが無効になるように変更
　②インチング処理修正
　　・ＩＩＦでインチングを設定した場合、コントローラのインチングは無効になるように変更。
　③電圧変更処理
　　個別の時の上限がフリーになっていたので、５０。０Ｖ上限を追加
　④カレンダー設定の修正
　　カレンダー設定を行う時、ＪＯＧ２によって値を変えると最初の値から始まらず次の値から始まってしまうので、
　　（例えば月を設定する場合、ＪＯＧ２を右に回すと２月から始まってしまう）カレンダーは現在設定されている
　　値から±できるように変更した。
　　（プログラムの構造上、ＪＯＧ２を一回でも回転させるとその値を採用する仕組みになっているため）


・２００８＿１０＿０６＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ２
　２００８＿１０＿０６＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①ロボット接続時、”ＲＯＢＯＴ　ＣＯＮＮＥＣＴ”の表示がでなかったので修正。
　②ロボット接続時、７ｓｅｇＬＥＤとＬＥＤが消灯しなかったので修正。

・２００８＿１０＿０７＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿０６＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ２を元に作成
  ①ロボット微調整項目１、２と拡張微調整項目の不具合修正
　　ロボットシステム設定時、微調整項目１，２を書き込んだあと拡張微調整項目が書かれるため、
　　一旦可変パラメータをリセットしていたので、拡張微調整項目のみ反映されていた。
　　→微調整項目１，２と拡張微調整項目をひとつにまとめ、いづれのコマンドがきた場合でも
　　　書き込めるように変更した。
　②可変パラメータ書き込み処理のところで、フラグが”ComuniPack.Data.bRS422Connection”のままだったので、
　　”guc_Robot_connect_flag”に変更

・２００８＿１０＿０８＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿０７＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①ＥＮの交流直流切り替えにおいて、指令値が目標値に達した時、交流モードに切り替えるプログラムにおいて、
　　交流モードには切り替わっていたが、指令値が目標値に達しているため、可変パラメータを送らない仕組みに
　　なっているため、ＥＮ値が直流期間のままになっていた。
　　そのため、指令値が目標値に達して直流期間が終わった段階で、１回だけ交流時のＥＮをＤＳＰに送るように変更
　　（ＥＮ比率変更時、電流値変更時はＥＮはＤＳＰに送る）
　②スタートユニット起動信号と重畳基板用ＴＳ信号の動作タイミングの変更。
　　従来は、開放電検によって動作を開始していたが、今回より初期電検を使うことにした。
　　（ＧＺ３では初期電検は使用していない。開放電検を初期電検と称して使用していた。ＡＺ３より
　　　本当の初期電検を使用する。）
　③参考
　　・ＤＳＰ側で初期電検と開放電検を同時に出すようになっていたので、変更してもらった。（古和さん）
　　・溶接のデータテーブルが田中さんより提供された。
　　・ＥＮデータテーブルが古和さんより提供された。

・２００８＿１０＿０８＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ２
　２００８＿１０＿０８＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①交流パルスの選択不具合
　　L3_table_key_change_member.cにおいてパルス判別を行う場合、cmp5のみの判別で、ＡＣの判別も行っていたので、
　　例えば、材質、ワイヤ径、溶接法が同じで、ＤＣとＤＣＰを持つテーブルＡとＡＣＰのみのテーブルＢがあった場合、
　　先ずテーブルＡのＤＣＰを選択した状態で、ＡＣＰに切り替えると、本来ならテーブルＢを選択しなければならない
　　が、CMP5の判別はパルスと短絡のみの判別であるので、パルス選択のままとなり、キーチェンジを行わないので、
　　テーブルＡのままとなる。
　　修正内容
　　　従来比較するのはCMP1～CMP6までであったがCMP7を加え、このCMP7にguc_Pulse_mode_dataを入れて比較することで、
　　　ＡＣを判別しキーチェンジを行う。

・２００８＿１０＿０８＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ３
  ２００８＿１０＿０８＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ２を元に作成
　①ハンド溶接時のインチングスロースタートを作成
　　インチング時は１０Ａから１０Ａ／１００ｍｓの速度で電流値が上がっていき、指令値に到達した時点で、指令値回転となる。
　　（例：指令値１００Ａ時：０．９Ｓ　指令値３５０Ａ時：３．４秒のスロースタートとなる）

・２００８＿１０＿０９＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿０８＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ３
　①田中さんより提示されたＰ００～Ｐ１２まで（但しＰ１１は意味不明のため田中さんに再度確認する）入力反映
　　出来るようにした。（ＪＴＡＧで何個か確認済み）

　
・２００８＿１０＿１０＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１
  ２００８＿１０＿０９＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①以下の変更分に関して対応した内容を反映。
　２００８＿１０＿０２＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ２(Phase21)
　２００８＿１０＿０３＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１(Phase21)
  ２００８＿１０＿０７＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１(Phase22)
  ２００８＿１０＿０８＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１(Phase22)
  ２００８＿１０＿０９＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１(Phase22)
　1)メモリ転送処理の対象エリアを確定。（これに伴い、デバッグ用に用意していたダミーテーブル（FramData1,FramData2）を削除）
　2)メモリ転送処理の対応（コントローラ→溶接機の転送を行った場合、再起動を要求するようにした）
　3)溶接時の再生モードに於ける表示処理の改善。
　4)メモリ転送の結果表示の文字修正。
　5)ＩＩＦとのリンクが動作途中で切断されたと判断した場合（２秒間の未復帰）、ＩＩＦを切り離す。
　6)溶接中に再生モードにて溶接条件チャンネルを変更された場合、溶接終了時に最終再生チャンネルの溶接条件を全て再生する。
　7)溶接条件記憶チャンネル数を１６チャンネルにした（今までは１５チャンネルまで）
　8)溶接中にＩＩＦにて溶接条件記憶再生処理を行った場合、再生チャンネルの表示を行うようにした。
　9)工場出荷時などの最初期化時に記憶テーブルの初期化も追加（ただし、初期化する数値が明確になっていないので暫定初期化とする）
 10)ＩＩＦ未接続の場合、拡張メニューのＩＩＦ設定画面を無効化にする。
 11)溶接条件再生モード時にインチング／ガスチェックボタンを有効にした。また、溶接条件記憶モード時にはガスチェックボタンのみ有効にした。
 12)メイン基板上のＲ８－Ｍ３２Ｒ通信のエラー回避処理を追加。また、Ｒ８側の送信方法を「随時送信」から「１ｍ秒毎送信」へ変更。

    【！！注意！！】メイン側Ｒ８Ｃプログラムの更新が必要です。

 13)詳細メニューのパスワード項目以降は全チャンネル共通化

　　【！！注意！！】
　　　1)非常停止＃２、電流検出異常、一次電圧異常、モータ回転異常（モータ過電流異常）等はデバッグのため削除しています。
　　　　ファイル・グローバル検索にて「@@@@@@@」文字列検索で検索して、必要に応じて削除の解除を行ってください。
    　2)デバッグのためエラー監視処理を削除しています。必要に応じて削除の解除を行ってください。
      3)デバッグのため初期短絡確認をＭ３２Ｒ側でシミュレートしています。必要に応じて削除の解除を行ってください。

・２００８＿１０＿１０＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿１０＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１を元に作成
　①詳細データの反映　Ｐ１３～Ｐ１９

・２００８＿１０＿１４＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿１０＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①詳細データの反映　Ｐ２０～Ｐ３８（但し、Ｐ２６，２７、２８、３０、３１、３３、３４、３５は未または不要）


・２００８＿１０＿１６＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿１４＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①詳細データ反映　Ｐ３９～Ｐ８１
　　（但し、Ｐ２６，２７、２８、３０、３１、３３、３４、３５は未または不要）
　　（但し、Ｐ３９～Ｐ４９、Ｐ５６，５７、６１、６９、７３，７４，７５は未）
　②お客様リセットにて詳細データを全て初期化する。


・２００８＿１０＿１７＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿１６＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①詳細データが２つのパラメータに反映されなければならない変数については、ロボット接続時も反映されるように変更。
　　例：ＦＴＴ電圧　Ｈ５１，Ｈ９２
　　　　ＧＺ３ではＨ５１しか反映する必要がなかったが、ＡＺ３からはＨ９２にも反映する必要がある。
　　　　コントローラの詳細では反映できているが、ロボット接続では反映されていなかったので、反映した。
　②スタート電圧のプログラムが未完成だったので、ＪＯＧの入力を受け付けなかったので、追加した。
　③詳細データの範囲が一部間違っていたので修正。

・２００８＿１０＿２０＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿１７＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①材質表示のＡＬＳやＡＬＨで、ＡＬ．Ｓ、ＡＬ．Ｈ等必要に応じて．表示が出来るように変更
  ②ロボットからガスＯＮ命令が来ている場合は、ガスＯＦＦはロボットに従うように変更
  ③一時停止１、２のロボットに対する出力ビットを変更。
　

//2008.10.21
（１）
エラー復帰
     puc_Err_code = cd_err_member(puc_Err_code);                 //電流検出異常
     puc_Err_code = primary_voltage_err_member(puc_Err_code);    //一次電圧異常
復帰

（２）他概略
PWMFS（元のまま）
デッドタイム0.75（元のまま）
DSP最新（１０２０）
weldtbl 10/8（施工確認バージョン）

データ
SUS1.2MIG_DCPに、交流パルスデータ


2008.10.21
コピー ～ M32_NEW_20081021-1_(10_20_AZ3_IH_ENベ）_PWMFSierリペ切デ0.75+0.2_１５％【井原中川】
PC通信修正

・２００８＿１０＿２１＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿２０＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①ＰＣ通信が出来ないのを修正。
　　（従来、ロボット通信、ＰＣ通信を共用していたが、今回ロボット通信を分離したため、ＰＣ通信を検出する
　　　フラグがＯＮされないようになっていたため、通信できなかった）
　②溶接中にアーク切れをおこした場合、出力を停止する必要があるが、その部分を削除していたため動作しなかった。
　　その部分を生かした。またこのままでは、トーチスイッチをＯＦＦしない場合は再び溶接を開始してしまうので、
　　これに関するエラーフラグを設け、ＩＤＬＩＮＧ状態に戻ったあと、一旦トーチスイッチをＯＦＦしなければ、
　　ＩＤＬＩＮＧから抜けれないようにした。

・２００８＿１０＿２１＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ２
　２００８＿１０＿２１＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①アークスポットの有り無しの選択部がなかったので追加
　　（厳密には従来クレータ有り無しの列に設けていたが、現在はそれがないので、詳細のＰ３９に有り無し選択を追加）


・２００８＿１０＿２２＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１
  ２００８＿１０＿２１＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ２を元に作成
　①以下の変更分に関して対応した内容を反映。
  ２００８＿１０＿１７＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１(Phase23)
  ２００８＿１０＿１７＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ２(Phase24)
　1)ＩＩＦ未接続の場合、拡張メニューのＩＩＦ設定画面を無効化に対応したときの不具合に対応。
　2)サービスマンメニュー内のサービスマンメニュー値の初期化／オール初期化に対応。
　②モーター回転数の表示が１０倍値だったのを修正。
　③表示制御が無い場合、表示制御無しコマンドをリカバリ送信し続ける。
　④ＩＩＦにて「非常停止」「一時停止＃１」「一時停止＃２」が設定していない場合、各信号が入力されたと誤検知する不具合を改善。
　⑤記憶モードにて、「ＹＥＳ」「ｎｏ」「ＤＥＬ」表示時に、電流側７セグに前回溶接した電流モニタ値が表示される不具合を改善。


・２００８＿１０＿２３＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１(Phase26)
　２００８＿１０＿２２＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１を元に作成
　①ＩＩＦが切り離された場合、スティックチェック実行を停止させるよう対応（ロボット接続時による実行の場合は、ロボットの指示に従う）


・２００８＿１０＿２３＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ２(Phase26)
　２００８＿１０＿２３＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１を元に作成
　①ＩＩＦが切り離された場合、ガスチェック／インチング処理が継続してしまうのを停止させるよう対応。
　②コントローラが外されている事、または断線している事（電源投入時からコントローラからの通信がない場合）を確認出来るようにした。
　　短絡子が無い場合はエラー＃８１として非常停止と同等処理とする。
　　※ガス処理はコントローラorロボットが接続している場合のみ行うようになっていたので対処した。
　③ＩＩＦが切り離された場合、ＩＩＦ側の出力を全てＬＯＷにする（ＩＩＦ側のプログラム変更）


・２００８＿１０＿２５＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿２３＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１を元に作成→ＮＯ２の間違い
　①詳細データの係数を変更（田中さんと詳細データの実験を行ったがオーダーの違いにより変化量が著しく小さかったため）
　　但し係数は最終ではない。

・２００８＿１０＿２７＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿２５＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①ローパルスの周波数とデューティと一緒に計算するように変更。（お互いの計算は不可分のため、例えば周波数を変更する場合はデューティ計算を再度行う）
　②Ｃａｌｐｒａｍ（）内に中川さん要請分があったので削除
　③バーンバック時間のリミッタを設定
　④起動時及び溶接条件変更時、詳細データ内容が内部メモリに反映されるように変更
　　（起動時：コントローラの表示が通常状態になった時点。溶接条件変更時：溶接条件変更によって、一元電圧を再計算するところで反映）


・２００８＿１０＿２７＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ１
　２００８＿１０＿２７＿ＡＺ３＿ＩＨ＿ＥＮ
　①ＦＰＧＡ．ｃ変更
　　電流、電圧の絶対値とした。


・２００８＿１０＿２８＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿２７＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ１を元に作成
　①詳細メニューのパスワード以降は全ch共通としていたが、Ｐ５０～Ｐ５４のみ共通に変更

・２００８＿１０＿２９＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿２８＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①溶接する毎にＰＣから送った、半固定データ、可変データがリセットされる不具合を修正
　　原因：guc_pulse_mode_bkupがアフターフロー実行の際0x64（本当は0x05が正解）に変更されてしまうため、
　　　　　溶接条件が変更されたと思い、データを一旦クリアしてしまう。
　　　　　0x64になる原因は、REMO_Send_CMD内で、ComuniPackRemo.Data.From.t_Led_cntrol_data1.uc_Block_noは８までしかないのに
　　　　　プログラム変更によってこの変数に0x80を書き込む仕様に変更したため、guc_pulse_mode_bkupの内容を破壊していた。
　　　　　これを０～８までしかさせないように変更。

・２００８＿１０＿３０＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿２９＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①インチングの最終速度（電流値）と本溶接中のワイヤ送給速度は一致しない不具合修正（インチング速度が若干高めに出る）
　　原因：インチングはスロースタートとなっているため、１００ｍＳ毎に目標電流（設定電流）に近づけるため＋１０づつインクリメント
　　　　　する。例えば、目標電流が８２Ａだったら、終了電流は９０Ａになってしまい８Ａ高くなる。
　　　　　従って、８２Ａ以上になった段階で、インチング用の指令値を８２Ａになるようにプログラムを修正。

・２００８＿１０＿３０＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ２
　２００８＿１０＿３０＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①溶接中にエラーが発生した場合、エラー解除後に通常表示が点滅してしまう不具合に対応（未確認）
　　→エラー発生と同時に溶接終了を行うと先に溶接終了表示処理が働き、その時の７セグ点滅制御状態を
　　　エラー表示処理にて記憶してしまう事で発生する不具合と思われる。
　②外部治具端子台の電検、エラー、アラームを出力できるように修正（実験のため削除していたので復活）
　③チャタリング防止回数を１０から８０に変更（８０で約２０ｍＳ相当）


・２００８＿１０＿３１＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿３０＿ＡＺ３＿ＩＨ＿ＥＮ＿ＮＯ２を元に作成
　①ＰＲＭの範囲を－９９９～９９９に変更
　　ＰＲＭの個数を９９に変更


//2008.11.6
短絡SLPトライ

DSP、FPGA、
M32_New_20081105-2_(1105-1ベ)_【佐藤】IACシーケンス検討_PWMFS0.75
ベース


・２００８＿１１＿０７＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１０＿３１＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　（修正内容は２００８年１１月０６日、０７日分）
　①電検の修正
　　スローダウンシーケンスにおいて、ＳＴＡＲＴ１，２、Ｏｖｅｒ．ｌａｙについては、リフトアップ電検に変更
　　スローダウンシーケンスの電検はリフトダウン電検に変更
　　（スローダウンシーケンスの電検もリフトアップ電検にしていたため、スローダウンをすぐに抜けてしまい、スタートが悪かった）
　②ローパルスディレイのタイマを１０ｍＳ→１ｍＳに変更（精度向上のため）
　③クレータパルス無し制御（パルス溶接時、クレータのみ直流溶接）を追加


・２００８＿１１＿１０＿ＡＺ３＿ＩＨ＿ＥＮ
　２００８＿１１＿０７＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①突き出し長の設定が出来るようにした。設定は設定ボタンによって行う。
  ②プログラム領域不足によりメモリ領域を６００００→６２０００に変更


・２００８＿１１＿１１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿１０＿ＡＺ３＿ＩＨ＿ＥＮを元に作成
　①ＡＣ溶接の新しいＥＮ計算を入れた。（動作確認未）
　　（湯沢さんの熱量計算は未）

・２００８＿１１＿１３＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿１１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①ＥＮ計算プログラムの問題点を修正
　　２００８＿１１＿１１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮでは、Ｖ１３等のメモリ転送をｅｎ＿ｇｅｎｅｒａｔｏｒ＿ｍｅｍｂｅｒ
　　で行ったいたが、これでは指令電流がメイン、初期、クレータと入れ替わるので、メモリ転送される内容が変化してしまう。
　　（メイン溶接にも関わらず、クレータの値が転送されるなど）
　　今回新しくｖ＿ｇｅｎｅｒａｔｅｒ＿ｍｅｍｂｅｒを作成し、メモリ転送はそれぞれのシーケンスで行うように変更。




//2008.11.13
データ中川最新
DSP：11/7
FPGA：11/4
ASM:（デッドタイム　0.75us）

・２００８＿１１＿１４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿１３＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①可変パラメータ２５，２６において直流区間、交流区間のパラメータの区別を追加
　②溶接期間外でのＥＮ比率０％（ＤＳＰに送る最終変数）を確定
　　希に交流で始まってしまう不具合を回避するため



・２００８＿１１＿１７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿１４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①起動時のＦＡＮコントロール変更（起動処理終了後ＦＡＮをＯＮする）：田中ＳＮＧ仕様
　②スタート回路の遅れ時間変更　３ｍＳ→１ｍＳ
　③一次過電流、二次過電圧処理追加
　④スタート時モータＯＮディレイ処理の変更
　　従来モータＯＮディレイがあるため、溶接出力は１番の加速に従っていたが、モータ出力は２番の加速（溶接中の加速）
　　になっていた。
　　なぜこのようになったのか？
　　加速によるスロープの計算はwcndSend、sspdSendで行われる。
　　溶接出力の方は割り込みでリフトダウン電検が来たら、加速１にてスロープ時間を計算する。その後wcndsend来ても目標値に
　　に変化がないので、再度スロープ時間を計算されることはない。
　　一方、モータ出力のほうは、モータディレイが終了した段階で、スロープ時間を計算する。この段階では目標値は変化しており
　　、またステータスも２に移行しているので加速２にてスロープ計算が行われてしまう。
　　これを改善するため、モータディレイ終了後のスロープ再計算時は加速１が使われるように変更。
　　（なお、この後２回目のsspdSendでは加速が加速２に変わっても、目標値は変わらないのでスロープ再計算は行われない）
　　本溶接中（完全に本溶接中になった状態）での電流指令値変化に対しては、目標値が変わるので、再度スロープが計算される
　　この時は加速２が使用される。


・２００８＿１１＿１７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　２００８＿１１＿１７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　２００８＿１０＿３１＿ＡＺ３＿ＴＮＹ＿ＥＮ＿ＮＯ１(Phase27)の下記２点移植
　①エラー発生復帰後にコントローラの表示不具合（通常表示に戻っても点滅し続ける）の改善
　②エラー発生時の表示不具合（エラー番号の点滅を行わない）の改善
　
　エラーレベル２処理の改善
　①エラーレベル２が発生したらＩＤＬＩＮＧに強制的に戻るように変更
　②温度異常（エラーレベル２）が発生した場合、エラー復帰するまでＦＡＮモータを全開し続けるように変更

  ③Ｃａｌｐａｒｍ２５，２６の処理を
    if (gtt_Ctrl_flag.AC_control == false) //2008.11.14
                           ↓
    if (gtt_Ctrl_flag.AC_control == false || gtt_En.ss_En_a == 0) //2008.11.17
    に変更
  ④Ｂｕｒｎ＿Ｂａｃｋ期間はgtt_Ctrl_flag.AC_control = false;にすることに修正（中川さん要望）

・２００８＿１１＿１８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿１７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
　①交流溶接時の直流区間ではＣａｌｐｒａｍ８５の出力ｒｃを明示的に０にするように変更。
　　（バーンバック時直流にならないため）
　　他の区間では、gtt_En.ss_En_a_outputを０にできるが、バーンバック中は特に代入する場所がないので、
　　直流にならない。

・２００８＿１１＿１９＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿１８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①Ｐ５４の最大値を１に変更
　②インチング中に指令値が変更されたらそれに応じてインチング速度が変更されるようにした。
　③ＥＮ調整値が０の場合でもＥｎ＿ａ＝０時は処理１を実行するように変更
　

・２００８＿１１＿１９＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　２００８＿１１＿１９＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①インチング修正の不具合修正。放置するれば速度が徐々に上がり続ける。またスロープ中に電流指令値を下げると、それ以上
　　下がらなくなる。


//2008.11.20
井原さんデバッグ


・２００８＿１１＿２０＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿１９＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①ガス出力の修正
　　起動時ＦＡＮ２のみ動作するように修正。（修正前は起動後３秒間ＦＡＮ１も動作していた）
　②ガス出力の修正２
　　温度異常時は全てのＦＡＮが動作するように修正（前回修正分消失のため）
　③尾崎氏デバック分修正
　　（１）設定のエラーチェック時、ｓｅｔキーを押し、メモリー転送にモードを変えるとメモリ転送が始まってしまう。
　　（２）メモリー転送中に、設定キーや材料キーを押すと、メモリ転送動作が停止し、１４ｓｅｇ表示が戻らなくなる。
　　（３）特殊パラメータ設定の９９のパスワード入力状態で材料キーをおし、リセットモードに移行するとｓｅｔが効かなくなる。
　　井原発見分
　　（４）メモリー転送中にＪＯＧ２を回すと転送方向が変わってしまう。
　　（５）詳細モードで各種キーを押すと、一瞬１４ｓｅｇＬＥＤの表示が化ける。
　　
　修正内容：
　　（１）に関しては、モード変更でｓｅｔキーをクリアするように変更。
　　（２）（４）に関しては、メモリー転送中は全てのキーとＪＯＧ２を効かないように変更
　　（３）に関してはパスワードモード抜けた段階で、関連する変数をクリアするように変更
　　（５）詳細モードでは選択キー、ＪＯＧ１、ＪＯＧ２以外はきかないように変更。


・２００８＿１１＿２１＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ(Phase28)
  ２００８＿１１＿２０＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①条件記憶モードにて設定チャンネルの下限値の状態でＪＯＧ２を－（マイナス）方向に回転させると
　　設定チャンネルが最大値にループしてしまう不具合に対応。
　②エラー＃０１、＃０２、＃０４，＃０５，＃１１，＃１２の検知タイミングを初期処理終了時以降に変更。
　③突きだし長のデータをコントローラ側のＦＲＡＭへ記憶出来るようにした。


・２００８＿１１＿２１＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ＿ＮＯ２(Phase29)
  ２００８＿１１＿２１＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮを元に作成
　①一次電圧低異常時の表示＆履歴タイミングを遅らせた（電源遮断時の一次電圧低異常誤検知防止）
　　現状では検知後１秒間はエラーとしないようにした。

・２００８＿１１＿２５＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ(Phase30)
  ２００８＿１１＿２１＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
　①溶接中、特定のスイッチ以外は入力不可とする。

・２００８＿１１＿２５＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ＿ＮＯ２(Phase31)
　２００８＿１１＿２５＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮを元に作成
　①通常時（エラー発生時、溶接終了表示時以外）に７セグの表示制御（点滅）を停止させる
　　コマンド(0x33)を定期的(100msec毎)に送信する。（コントローラＭ１６側を最新に変更する必要あり）

・２００８＿１１＿２５＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ＿ＮＯ３
　２００８＿１１＿２５＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
  ①ガスチェック時間を９０秒→６０秒に変更。

・２００８＿１１＿２５＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿２５＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ＿ＮＯ３を元に作成
　①詳細、記憶時インチングを押すと”ｎｏ　ＵＳＥ”の表示をする。


・２００８＿１１＿２６＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ(Phase31)
　２００８＿１１＿２５＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①設定モードに移行時にガス動作を強制的に停止する。
　②記録モードのデータ削除"DEL"時にＪＯＧ１を操作すると"no"となる不具合に対応。



・２００８＿１１＿２６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿２６＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮを元に作成
　①交流（湯沢仕様）を追加

・２００８＿１１＿２７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿２６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　2008.11.26～2008.11.27にかけて修正
　①詳細パラメータ新仕様に変更（P22,P35未）
　②ロボット通信の溶接機コードを０ｘ５１に変更
　③電源初通電時の初期化の溶接条件をＡＬＨ、１．２、ＭＩＧ、ＡＣＰ、ＨＮＤに変更
　④一次過電圧を７２０－＞７３２に変更
  ⑤ロボット接続でＥ８１がでるのを修正

・２００８＿１１＿２７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　２００８＿１１＿２７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①ｍｏｄｄｅｆ．ｈの不具合修正
　②交流パルス時、ＷＤＴが出てこない不具合を修正（６個表示する必要があるが５個表示となっていた）

・２００８＿１１＿２７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３
　２００８＿１１＿２７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
　①調整（ｓｅｔ）内容がＰには反映されていたが、Ｐの先には反映されていなかった不具合を修正


・２００８＿１１＿２８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿２７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３を元に作成
　①ロボット通信仕様とプログラムの不一致を修正
　　（一元電圧問い合わせ用にｅｎ＿ｇｅｎｅｒｅｔｏｒ＿ｍｅｍｂｅｒ変更）
　②湯沢ＳＰの内容変更（Ｅｎ＿ａとＥｎ＿ｄｅｆを溶接シーケンスモード毎にとるように変更）
　　（従来のままではこの２つの変数が確定しないため）

・２００８＿１１＿２８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
  ２００８＿１１＿２８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
  ①問い合わせを受信後、ｅｎ計算前に結果送信してしまう可能性のある構造となっていたので、
　　gtt_En.uc_En_inquiryを０、１、２の構成とした。１：受信　２：計算終了　０：送信終了
  ②ｅｎ＿ｇｅｎｅｒｅｔｏｒ＿ｍｅｍｂｅｒの修正
　　ロボットから一元電圧問い合わせが有った場合、直流モードになっているため必ずＥｎ＿ａ＝０で一元計算してしまう不具合
　　を修正。

・２００８＿１１＿２９＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿２８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　①ＥＮ比率等を溶接中変更した場合ＨＰＩ転送が可能なように変更。
　　（従来ＨＰＩ転送は送給量に変化があった場合のみ転送していたので、ＥＮ比率を変更してもＨＰＩ転送されない）
  ②     MAX_CURRENT		= 350;　に変更


・２００８＿１２＿０１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１１＿２９＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①ロボット通信不具合を修正
　　・ロボット通信で行った溶接条件の選択がうまくguc_Pulse_mode_dataに反映されていなかった。
　　・通信コマンドのテーブル定義ができていなかったので、ＥＮに関する受信ができても、反映するＲｅｖ関数をコール
　　　していなかった。
　　・gtt_En.uc_En_inquiryが受信時１とし、１であればｅｎ計算するとしていたので、ロボットからの８Ｄコマンドを２回受け付けて
　　　正確なデータを送信していた。（ロボットＴＰの標準ボタンを２回押す必要があった）
　　　gtt_En.uc_En_inquiryを受信時１、値反映時１なら反映（反映後２）、ｅｎ計算時２なら計算（計算後３）、３なら送信（送信後０）
　　　に変更した。


・２００８＿１２＿０１＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ(Phase33)
　２００８＿１２＿０１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①サブモニタのモータ回転数表示にて１００ｒｐｍ以上の表示に対応


・２００８＿１２＿０１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　２００８＿１２＿０１＿ＡＺ３＿ＴＮＹ＿ＮＥＷ＿ＥＮ(Phase33)を元に作成
　①ｅｎｔｂｌの領域定義が２５６になっていたので１２８に変更


・２００８＿１２＿０１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３
  ２００８＿１２＿０１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
　①湯沢処理の計算中使用する送給量を1000分1に変更。（仕様不備）

・２００８＿１２＿０２＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿０１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３を元に作成
　①アーク開発Ｔ依頼の電流補間プログラム追加（現状未実験）

・２００８＿１２＿０４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿０２＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
  ①ロボット接続時インチングが効かない不具合修正
　②Ｅｒｒ２発生時、ロボットからのＴＳを受け付けない不具合修正
　　（ｃｏｍ＿ｒｃｖ＿ｍａｎａｇｅｒ．ｃ）
　③ロボット接続時、Ｅｒｒ２エラーがロボットに送られない不具合修正
　　ロボットのＴＳＯＦＦが早すぎて、Ｅｒｒ２を送る前に復帰してしまう。
　　Ｅｒｒ２発生時は、ＴＳｏｆｆから０．５秒経ってから復帰するように修正。
　④ロボット接続時、溶接機起動時１回目の溶接で可変パラメータを送っていない不具合修正
　　ロボット接続時は設定した可変パラメータを大量に送ってくる。
　　溶接中のみ可変パラメータの変更分をＤＳＰに反映させるように変更。
　　（ｗｉｐＩＰの中）

・２００８＿１２＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿０４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①スローダウンが－１５以下の値を入れると速度が速くなる不具合修正（ロボット）
　②Ｃ１コマンドを返さない不具合修正
　③エラー時（電源再起動で復帰）、重畳とスタート回路をＩＤＬＩＮＧ状態にするように変更

　
・２００８＿１２＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　２００８＿１２＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①ＥＮ等の変化を溶接中（送給量等の補間が終了した状態）のみに転送するように変更
　　アイドリング中のＥＮ等の変化は補間中に送られるので問題ない。


・２００８＿１２＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３
　２００８＿１２＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
　①アーク切れが発生した場合のガスを止める処理を追加

・２００８＿１２＿１０＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３
　①電流補間プログラムの不具合修正
    ctlclsElectrode( );内部に
　      //<><><>電流補間 2008.12.02<><><>
        pCTL->CRe_Target_W = pCTL->CRe_Sirei_W;     //指令値を目標値にセット
        //<><><><><><><><><><><><><><><>
　　を追加
　　指令値が入っていなかったので、スタート時０値になっていた。
　　・２００８＿１２＿０４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　　　④ロボット接続時、溶接機起動時１回目の溶接で可変パラメータを送っていない不具合修正
　　　　ロボット接続時は設定した可変パラメータを大量に送ってくる。
　　　　溶接中のみ可変パラメータの変更分をＤＳＰに反映させるように変更。
　　　　（ｗｉｐＩＰの中）
　　　の修正だが、ｗｉｐＩＰ２の方を変更しなければならないのに、ｗｉｐＩＰの方を変更していたので
　　　ｗｉｐＩＰ２を修正。（溶接機起動時、可変パラメータを送っていない不具合の件）

・２００８＿１２＿１１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿１０＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①トーチＯＦＦ時、交直制御切り替えＳＷ（半固定パラメータ３６６）
　　００００：直流
　　０００１：交流
　　テーブルに書かれた値によってトーチＯＦＦ（バーンバック時）交流出力にするか直流出力にするか決定する
　②ＥＮａを０にする判断基準の追加（ワイヤ送給量とＥＮａの％）
　　新しい基準はワイヤ送給量とＥＮａ％下限（新規）と従来からあるＥＮａ％下限の３つになる。
　　ワイヤ送給量と新ＥＮａ％下限は湯沢パラメータ部に持つ。
　③第２バーンバック処理の追加
　　第２バーンバック有り時は溶接電源指令の付随データの最上位ビットをＯＮする。
　　第２バーンバック時にスティックチェック命令が来ないようにＤＳＰから第２バーンバック終了信号を送ってもらう。
　　（ＤＳＰは第２バーンバック有り時のみバーンバック終了信号を送ってくる）
　
　　注意：①直流溶接のテーブルのＨ３６６に０００１を記入しないこと
　　　　　②２００８＿１２＿１１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを使用する場合は、ｅｎｔｂｌの湯沢パラメータに必ず
　　　　　　新規に加えたパラメータを入力すること。
　　　　　③ＤＳＰに第２バーンバック処理があるものを使用すること。


・２００８＿１２＿１２＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿１１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①ロボットからのバーンバックタイムの調整がＨ６１のみになっていたので、Ｈ１０５，Ｈ１０を追加
　②ＥＮａ上限値の係数が間に合わないので２００８＿１２＿１１＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮの②を削除
　③ＣａｌｃＰａｒｍ９１にＣｏｎｖＶを追加


・２００８＿１２＿１５＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿１２＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①ロボット通信時のＦＴＴＬＶＬ、ＢＢＫＴＩＭＥ、ＨＯＴＴＭ、ＨＯＴＣＵＲに上下限リミットを付けた。


・２００８＿１２＿１５＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２　（田中）
　２００８＿１２＿１５＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①可変９２ をＩＡＣとして用いる。
　　calc.c 中、可変９２ を電流変換して送信する。

・２００８＿１２＿１６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿１５＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２（田中）を元に作成
　①ＣａｌｃＰａｒｍ９０の電流値に湯沢式を通る場合Ｆ２／Ｆ１を乗算するように変更。

・２００８＿１２＿１６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
  ２００８＿１２＿１６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　スタート回路信号の動作シーケンスを変更。
　問題点：
　従来はＭＡＩＮ＿ＷＥＬＤになってから、ＳＴＡＲＴ１の１ｍｓタイマをチェックしていた。
　ＳＬＯＷ＿ＤＯＷＮからＭＡＩＮ＿ＷＥＬＤに移るのはリフトダウン電検である。
　ＭＡＩＮ＿ＷＥＬＤで１ｍｓタイマのチェックをしていた。
　ＳＴＡＲＴ２の信号をＯＦＦさせるのはリフトアップ電検である。
　　以上のことより、リフトアップ電検からリフトダウン電検までの時間のバラツキによって、１ｍｓタイマとならなかった。
　　（２０ｍｓ以上とかになっていた）
　変更点：
　ＳＬＯＷ＿ＤＯＷＮよりＳＴＡＲＴ信号の１ｍｓ時間のチェックをし、ＳＬＯＷ＿ＤＯＷＮでも、ＭＡＩＮ＿ＷＥＬＤでも
　チェックするように変更。

・２００８＿１２＿１６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３
  ２００８＿１２＿１６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
　①湯沢新仕様
　②バーンバック電流倣い制御（未確認）


・２００８＿１２＿１８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿１６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３を元に作成
　①溶接中ＥＮ０％時直流溶接にならない不具合を修正
　　ＣａｌｃＰａｒｍ？？でif (gtt_Ctrl_flag.AC_control == false || gtt_En.ss_En_a == 0) で判別
　　していた行をif (gtt_Ctrl_flag.AC_control == false || gtt_En.ss_En_a_output == 0)に変更
　　gtt_En.ss_En_aは初期電流時、本電流、クレータ電流全てで使用しているため、MAIN_WELDに切り替った
　　時どの値が来るのか不明であるため。
　②バーンバック電流倣い制御修正
　　電流は倣っているが、ＣａｌｃＰａｒｍが倣っていなかった。
　　原因：バーンバック期間中はｖ＿ｇｅｎｅｒａｔｏｒ＿ｍｅｍｂｅｒの実行を行っていなかったため。
　　修正：バーンバック期間中もｖ＿ｇｅｎｅｒａｔｏｒ＿ｍｅｍｂｅｒの実行を行うように変更。
　③ｅｒｒレベル２が発生した場合、ＩＤＬＩＮＧ２に行くように変更。


・２００８＿１２＿１９＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿１８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①湯沢のＥＮ１判定－時の計算式を
　　　　　　gtt_En.sc_Va = gtt_Okcv.Okcv_real_m[pus_Amp / 2] * pss_En_duty_adjustment / 20;
　　　　　　→　gtt_En.sc_Va = gtt_Okcv.Okcv_real_m[pus_Amp / 2] * (pss_En_duty_adjustment * -1) / 20;に変更
  ②ロボット接続時コントローラの操作をしていると（例えばＪＯＧ２を変え続ける等）、”ＲＯＢＯＴ　ＣＯＮＮＥＣＴ”表示がでるまでのタイムラグ１００ｍｓ間
　　にロボットから送られて来たデータで、記憶内容が書き換わってしまう問題が発生。（１００ｍｓ間はロボットとコントローラが同時に接続された状態）
　　（コントローラが操作されると全ての内容を記憶する仕組みになっているため）
　　具体的な問題：
　　ロボットから送られてくる、突き出し長データが記憶されるが、突き出し長は操作されていないので表示カウントは変わらない。
　　ロボット接続を行った後、接続を切断し、再度コントローラで動作させると、突き出し長表示と実際の突き出し長データが不一致を起こす。
　　例：表示はＨＮＤ　実際のデータは１５ｍｍ

　　ロボット接続と同時にコントローラの受信内容を反映させる部分（この部分で記憶させるかどうか判定する）を動作しないように
　　変更。


・２００８＿１２＿２２＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿１９＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①Ｆ２／Ｆ１を復活
　②ＥＮａ制限を復活（湯沢仕様）
　

・２００８＿１２＿２２＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　２００８＿１２＿２２＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①ＪＯＧ１、２にＶ＿ＭＡＸを入れた。


・２００８＿１２＿２３＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
・２００８＿１２＿２２＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
　①ＭＭ→ｍｍに変更
　②ｎｏ　ＵＳＥ　→　ｎｏ　Ａｃｔに変更


・２００８＿１２＿２３＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　２００８＿１２＿２３＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①溶接条件直流選択時（ＤＣ、ＤＣ．Ｐ）gf_Frq_data = 1にする処理を追加


・２００８＿１２＿２４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿２３＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に変更
　（変更そのものは１２月２３日実施）
　①湯沢式において（廣田さん要請分）
　　・Ｖ１５をＴ２→テーブルに変更。
　　・Ｖ８４をテーブル→Ｉｅｎに変更
　　・Ｔ２を算出する式をやめて、Ｉｅｎを算出する式に変更。


・２００８＿１２＿２４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　２００８＿１２＿２４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　①交流パルスにおけるＥＮ比率０％時のフィードバック用設定電流補正係数（中川さん要請分）追加
    CalcPram90に代わってCalcPram90_1を新設（一旦はCalcParm90によって値がバッファに入るが、CalcPram90_1によって上書きされる）

・２００８＿１２＿２４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３
  ２００８＿１２＿２４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
　①ｄｉｔａｉｌ＿ｓｅｔ＿ｍｅｍｂｅｒのＩＡＣをＨ３１５だったものをＶ９２に変更（古和さん要請分）


・２００８＿１２＿２６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿２４＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ３を元に作成
　①Ien = (Qt * 1000 - 30 * f2 - (work4 * pENTBL->V15_Data[pss_Wf_index_work] + work2 + work3)) / (2 * 10000 * En_a);
　　を
　　Ien = (Qt * 1000 - 30000 * f2 - (work4 * pENTBL->V15_Data[pss_Wf_index_work] + work2 + work3)) / (2 * 10000 * En_a);
　　に変更
　②gf_Wf_max_limit = (float)pENTBL->Wf_max_limit; //2008.12.26
    gf_Correct_a = pENTBL->Correct_a;              //2008.12.26
    gf_Correct_b = pENTBL->Correct_b;              //2008.12.26
    CalcParm90_1でpENTBLをアクセスするとバス競合し、ＤＳＰのｈｐｉ転送が動作しなくなる。
    したがって、ｖ＿ｇｅｎｅｒａｔｏｒ＿ｍｅｍｂｅｒでＲＡＭに予めコピーし、それをCalcParm90_1
    でＲＡＭ内容を使用することに変更。
　③ｏｋｃｖ＿ｇｅｎｅｒａｔｏｒ＿ｍｅｍｂｅｒで計算する交流の一元化電圧を

　　gtt_Okcv.Okcv_real_p[pus_Amp / 2] = (unsigned char)(WF_EN_Volt(GetAmp2Wire(pus_Amp,pTBL),EN_VOLT_P));
　　gtt_Okcv.Okcv_real_m[pus_Amp / 2] = (unsigned char)(WF_EN_Volt(GetAmp2Wire(pus_Amp,pTBL),EN_VOLT_M));
　　gtt_Okcv.Okcv_real_0[pus_Amp / 2] = (unsigned char)(WF_EN_Volt(GetAmp2Wire(pus_Amp,pTBL),EN_VOLT_0));
                                            ↓
                                            ↓
    gtt_Okcv.Okcv_real_p[pus_Amp / 2] = (char)(WF_EN_Volt(GetAmp2Wire(pus_Amp,pTBL),EN_VOLT_P));
    gtt_Okcv.Okcv_real_m[pus_Amp / 2] = (char)(WF_EN_Volt(GetAmp2Wire(pus_Amp,pTBL),EN_VOLT_M));
    gtt_Okcv.Okcv_real_0[pus_Amp / 2] = (char)(WF_EN_Volt(GetAmp2Wire(pus_Amp,pTBL),EN_VOLT_0));

    テーブルが±なのでunsigned char をcharに変更（但し、unsigned charでも問題は起きていない）



・２００９＿０１＿０７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００８＿１２＿２６＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　・中川さん要請により下記変更
    従来　　　　：gf_Wf_max_limit = (float)pENTBL->Wf_max_limit;
    中川さん要請：gf_Wf_max_limit = (float)pENTBL->EN1_Wf_Limit;

・２００９＿０１＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ
　２００９＿０１＿０７＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　ＣａｌｃＰａｒｍ９３に
    rc = (rc * 256) * AD_I/AD_V;
　を追加（古和さん要請分）



・２００９＿０１＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２
　２００９＿０１＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮを元に作成
　・en_generator_memberの下記を
    if (gss_WFe_Sirei_W > (signed short)pENTBL->Wf_max_limit)
    {
        if (gtt_En.ss_En_a < (signed short)pENTBL->ENa_ac_limit)
        {
            gtt_En.ss_En_a = 0;
        }
    }
　　　　　　　　　　　↓
    if ((gss_WFe_Sirei_W >= (signed short)pENTBL->Wf_max_limit) || (gtt_En.ss_En_a < (signed short)pENTBL->ENa_ac_limit))
    {
         gtt_En.ss_En_a = 0;
          
    }
　  に変更（廣田さん要請分）


・２００９＿０１＿０９＿ＢＰ３＿ＩＨ
  ２００９＿０１＿０８＿ＡＺ３＿ＩＨ＿ＮＥＷ＿ＥＮ＿ＮＯ２を元に作成
　①機種名の表示をＢＰ３に変更
　②テスト的にガスのスイッチ入力と表示ができるようにした
　③追加された通信コマンドを追加

・２００９＿０１＿１０＿ＢＰ３＿ＩＨ
　２００９＿０１＿０９＿ＢＰ３＿ＩＨを元に作成
　①溶接法、クレータ、パルス、交流波形、交流ＴＩＧ設定、ＭＩＸＴＩＧ設定のＳＷを有効にし、それに伴って、
　　各表示器の表示が変更されるようにした。
　②クレータ、パルスの有り、無しに応じて、シーケンス設定部の表示が変更されるようにした。

・２００９＿０１＿１３＿ＢＰ３＿ＩＨ
  ２００９＿０１＿１０＿ＢＰ３＿ＩＨを元に作成
　①選択したもののＬＥＤが点滅するようにした。
　②選択したもののＬＣＤ表示が出来るようにした。

・２００９＿０１＿１３＿ＢＰ３＿ＴＮＹ＿ＮＯ２
  ２００９＿０１＿１３＿ＢＰ３＿ＩＨを元に作成
　①製品番号を「ＢＰ４」に変更
　②現在時刻の表示に対応


・２００９＿０１＿１３＿ＢＰ３＿ＩＨ＿ＮＯ３
　２００９＿０１＿１３＿ＢＰ３＿ＴＮＹ＿ＮＯ２
　①ＪＯＧ決定キーが入力出来るようにした
　②初期電流、本電流、クレータ電流、プリフロー、アフターフロー、アップスロープ、ダウンスロープが調整できるように変更した。

・２００９＿０１＿１３＿ＢＰ３＿ＩＨ＿ＮＯ４
　２００９＿０１＿１３＿ＢＰ３＿ＩＨ＿ＮＯ３
　①溶接法の選択がクイック方式からナビ方式に変更されたので対応
　②パルス周波数、パルス幅をＪＯＧ入力出来るように変更（表示は未）

・２００９＿０１＿１５＿ＢＰ４＿ＩＨ
　２００９＿０１＿１３＿ＢＰ３＿ＩＨ＿ＮＯ４
　①ナビ機能途中。（材質をメモリ初期化でまとめるところまでＯＫ）

・２００９＿０１＿１５＿ＢＰ４＿ＴＮＹ＿ＮＯ１
　２００９＿０１＿１５＿ＢＰ４＿ＩＨ
　①詳細モードの一部対応（現在時刻の設定などはまだ組み込めていない）

・２００９＿０１＿１６＿ＢＰ４＿ＩＨ
　２００９＿０１＿１５＿ＢＰ４＿ＴＮＹ＿ＮＯ１を元に作成
　①ナビ機能検索部完了

・２００９＿０１＿１６＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０１＿１６＿ＢＰ４＿ＩＨ
　①ナビ検索部（実際のテーブルを引いてくる）一部作成
　

・２００９＿０１＿１６＿ＢＰ４＿ＴＮＹ＿ＮＯ１(Phase4)
　２００９＿０１＿１６＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①２００９＿０１＿１５＿ＢＰ４＿ＴＮＹ＿ＮＯ２の変更分を反映
　　１：詳細モードの設定項目の設定に対応（現在時刻の設定などに対応）
　　２：時間表示の秒表示を削除し、「：」の点滅に変更。
　　３：詳細メニューの画面の修正（「？」を付ける）
　②詳細モード時に於ける細かな操作不具合を修正
　　１：時間設定時に設定箇所が一時的に「００」を表示する不具合
　　２：同じ詳細設定項目を再び選ぶと、二行目が表示されない不具合
　③ＬＣＤ表示制御コマンド(0x36)を正式に対応（今まではコマンド枠だけ用意していた）
　④ガス点検中であることをＬＣＤに表示させる


・２００９＿０１＿１６＿ＢＰ４＿ＩＨ＿ＮＯ３
  ２００９＿０１＿１６＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
  ①条件選択時の表示のチューニング


・２００９＿０１＿１９＿ＢＰ４＿ＩＨ
  ２００９＿０１＿１６＿ＢＰ４＿ＩＨ＿ＮＯ３を元に作成
　①交流ＴＩＧ設定をシーケンス設定と同列に扱うように変更し、パルス設定と同様の動作をするように変更（営業要望）
　②交流ＴＩＧ設定が出来るようした。
　
　

・２００９＿０１＿２０＿ＢＰ４＿ＩＨ
  ２００９＿０１＿１９＿ＢＰ４＿ＩＨを元に作成
　①バージョン表示をＭ３２のみに変更
　②初期表示時間を１０秒から６秒に変更
　③ＭＩＸＴＩＧ設定を選択できるように変更。

・２００９＿０１＿２２＿ＢＰ４＿ＩＨ
　２００９＿０１＿２０＿ＢＰ４＿ＩＨを元に作成
　①プリフロー、アフターフロー等のｃｈ０が記憶できるように作成中（途中）

・２００９＿０１＿２８＿ＢＰ４＿ＩＨ
　２００９＿０１＿２２＿ＢＰ４＿ＩＨを元に作成
　①プリフロー、アフターフローがＣＨ０に記憶できるように変更。
　②クレータリピートフラグをクレータ無時はクリアするように変更。
　③待機中は設定ＬＥＤ、その他は出力ＬＥＤが点灯するように変更。



・２００９＿０１＿２８＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０１＿２８＿ＢＰ４＿ＩＨを元に作成
　①動作のためテーブルアクセスキーを固定値とした。
　②動作のため下記内容（田中さん分）の変更を行った。
	//2009.01.28
	うごかす

	■ホットCURのリミッタ解除　H36
	L3_ditail_set_member.c　304行あたり
	//2009.01.09                                       if (work1 < 0x1111)
        	                               if (work1 < 0x0001)//2009.01.09
                	                       {
	//2009.01.09                                           work1 = 0x1111;
                                	           work1 = 0x0001;//2009.01.09

	■
	ifsub_task.c
	//2009.01.09    pWrk[ 35 ] = checkWeldAdjData( pAbs[ 35 ] , pOffs[ 35 ] , 0x1111 , 0x6666 );
    	pWrk[ 35 ] = checkWeldAdjData( pAbs[ 35 ] , pOffs[ 35 ] , 0x0001 , 0x6666 );//2009.01.09


	■送給量リミッタ解除
	ctlcls.c　410行あたり
	//2009.01.09    if( rc < 250 )   // 0.250
    	if( rc < 1 )   // 0.250//2009.01.09
	//2009.01.09        rc = 250;
        	rc = 1;//2009.01.09

	■ホット時間のリミッタ解除　H38　H83
	ifsub_task.c
	//2009.01.09    pWrk[ 37 ] = checkWeldAdjData_2( pAbs[ 37 ] , pOffs[ 37 ] , 0x0032 , 0x1388 , isContArc );// NY20041013
    	pWrk[ 37 ] = checkWeldAdjData_2( pAbs[ 37 ] , pOffs[ 37 ] , 0x0001 , 0x1388 , isContArc );// NY20041013//2009.01.09
	//2009.01.09        pWrk[ 82 ] = checkWeldAdjData_2( pAbs[ 82 ] , pOffs[ 82 ] , 0x0032 , 0x1388 , isContArc );// NY20041013
    	pWrk[ 82 ] = checkWeldAdjData_2( pAbs[ 82 ] , pOffs[ 82 ] , 0x0001 , 0x1388 , isContArc );// NY20041013//2009.01.09    

	L3_ditail_set_member.c　275行あたり

	//2009.01.09                                       if (work1 < 0x0032)
        	                               if (work1 < 0x0001)
                	                       {
	//2009.01.09                                           work1 = 0x0032;
        	                                   work1 = 0x0001;

	■電流検出エラー判定(32Rのみで判定している）　下記を3箇所
	L2_mag_sequence_dicision_class.c
	//2009.01.12                          if (gtt_Fpga.Curr_result <= 10)
        	                  if (gtt_Fpga.Curr_result <= 1)//2009.01.12

	本エラーに入った際、DSPがさきに判定していなければ、32Rのみで停止させるが、
	エラー表示がない。いいのか？

	//2009.01.14
	■calc.c　変更　40kHz対応
	static  float   const   Conv_T      = { 12.5        };                  // 変換係数T キャリア40kHz(80kHz)対応


	//2009.01.19
	HF出力　とりあえず溶接ができるように
	START1 出力がHF出力となる。
	AZのSTART2のシーケンスがHFのシーケンスとなるため、
	START2のシーケンスをSTART1へ移植する。


	■.asm
	デッドタイム　0.75us（前の検討時と同じ値）
	ゲインは新ゲインにて対応。（AZから変更無し）
	■dsp
	DSP:1/13 10:28
	キャリア　40k
	デッドタイム分かさ上げ無し。
	E-12、E-13無効
	OVCVDI=0

	■fpga
	FPGA:11/18 10:54　アオタイ、ペア切
	デッドタイム0.75用

	■データ
	//2009.01.20
	重畳キバン動作
	ACでもアーク切れしにくくなる。
	ENMIG側のみ重畳有り

	//2009.01.20 H338 →60 BP(ﾊｰﾌ)対応 MIGEN側のみ重畳オン 0x0018=24*12.5=300us
	//2009.01.20 H342 001E(300us)→0  BP(ﾊｰﾌ)対応 MIGEN側のみ重畳オン

	H328 = 50（=625us）BPの持ち上げ時間量に合わせる
	H345 = 50（=625us）BPの持ち上げ時間量に合わせる

	V86-89 =4 (=50us）オーバーラップ

	//2009.01.28
	新前パネルにて、出力OK
	STL、1.4、TIG、DCP、15mm　のみ常に選択する。


・２００９＿０１＿３１＿ＢＰ４＿ＩＨ
　２００９＿０１＿２８＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①高周波シーケンス（間欠動作含む）を追加。（但し当面元ＳＬＯＷ＿ＤＯＷＮシーケンスを使用する）
　　・ＳＴＡＲＴ１、ＳＴＡＲＴ２に関する動作部の削除（ＳＴＡＲＴ２の代わりがＨＦ＿ＯＵＴ）
　　・ｏｕｔｐｕｔ＿ｈｆ＿ｍｅｍｂｅｒ（）関数を追加（高周波出力）

・２００９＿０２＿０２＿ＢＰ４＿ＩＨ
  ２００９＿０１＿３１＿ＢＰ４＿ＩＨ
　①高周波間欠動作不具合（間欠動作しない）を修正


・２００９＿０２＿０２＿ＢＰ４＿ＩＨ＿ＮＯ２
  ２００９＿０２＿０２＿ＢＰ４＿ＩＨを元に作成
　①アップスロープ試験作成（パルス無しのみ）

・２００９＿０２＿０２＿ＢＰ４＿ＩＨ＿ＮＯ３
  ２００９＿０２＿０２＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①アップスロープの不具合修正
　②ダウンスロープ作成
　③アップスロープ、ダウンスロープ時間の記憶（コンパイル未、テスト未）

・２００９＿０２＿０３＿ＢＰ４＿ＩＨ
  ２００９＿０２＿０２＿ＢＰ４＿ＩＨ＿ＮＯ３を元に作成
　①アップスロープ、ダウンスロープ時間記憶確認。
　②パルスパラメータの記憶作成
　③パルス溶接ができるようにした。
　④トーチスイッチアクション（クレータ時）作成

・２００９＿０２＿０４＿ＢＰ４＿ＩＨ
  ２００９＿０２＿０３＿ＢＰ４＿ＩＨを元に作成
　①交流、直流を切り替えるように変更

・２００９＿０２＿０５＿ＢＰ４＿ＩＨ
  ２００９＿０２＿０４＿ＢＰ４＿ＩＨを元に作成
　①クレータリピート作成

・２００９＿０２＿０５＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿０５＿ＢＰ４＿ＩＨを元に作成
　①溶接法、クレータ、パルスモードの記憶作成

・２００９＿０２＿０５＿ＢＰ４＿ＩＨ＿ＮＯ３
　２００９＿０２＿０５＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①クレータ選択でクレータ動作をするように変更

・２００９＿０２＿０５＿ＢＰ４＿ＩＨ＿ＮＯ４
　２００９＿０２＿０５＿ＢＰ４＿ＩＨ＿ＮＯ３を元に作成
　①ＦＡＮモータが動作するようにポートを変更（７分間動作確認済み）

・２００９＿０２＿０５＿ＢＰ４＿ＩＨ＿ＮＯ５
　２００９＿０２＿０５＿ＢＰ４＿ＩＨ＿ＮＯ４を元に作成
　①クレータ反復動作作成（ＴＳ　Ｗクリックで停止）
　　但し現状ダウンスロープ中にＴＳをＯＦＦすると出力が停止する。（アップスロープになるように要修正）

・２００９＿０２＿０６＿ＢＰ４＿ＩＨ
　２００９＿０２＿０５＿ＢＰ４＿ＩＨ＿ＮＯ５を元に作成
　①鳴戸さん実験仕様　Ｖ１３に周波数を書き込めるように変更。
　　但し、暫定で溶接中には周波数を変更することができない。
　　起動時は必ず７０Ｈｚに固定される。

・２００９＿０２＿０６＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿０６＿ＢＰ４＿ＩＨを元に作成
　①クレータリピート設定の時、ダウンスロープ中トーチスイッチＯＦＦするとその段階から
　　アップスロープに移行するように変更。

・２００９＿０２＿０６＿ＢＰ４＿ＩＨ＿ＮＯ３
　２００９＿０２＿０６＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①エラー表記の日本語化（今回ＢＰ４で関係するエラーコードのみ）
　②高周波間欠動作（３０秒後）にアークスタートしない場合は”Ｅｒｒ００６”を発生させて出力を停止
　　し、ＴＳ　ＯＦＦでエラーが消えるようにした。


・２００９＿０２＿０６＿ＢＰ４＿ＩＨ＿ＮＯ４
　２００９＿０２＿０６＿ＢＰ４＿ＩＨ＿ＮＯ３を元に作成
　①ＡＣパラメータ、ＭＩＸパラメータを記憶できるように変更

・２００９＿０２＿０９＿ＢＰ４＿ＩＨ
  ２００９＿０２＿０６＿ＢＰ４＿ＩＨ＿ＮＯ４を元に作成
　①溶接中、たとえば、プリフローを変更すると変更期間中プリフロー表示に変わり、変更終了後２秒経過すると
　　溶接電圧（選択している場合のみ）表示が変わる機能を追加

・２００９＿０２＿０９＿ＢＰ４＿ＩＨ＿ＮＯ２
  ２００９＿０２＿０９＿ＢＰ４＿ＩＨを元に作成
　①上記の不具合を修正（途中）

・２００９＿０２＿１０＿ＢＰ４＿ＩＨ
　２００９＿０２＿０９＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①上記不具合未修正
　②エキスパートモードの試験を行うため、先行してエキスパートモードを組み込んだ。
　　このバージョンではＭＡＩＮのみ動作有効。

・２００９＿０２＿１０＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿１０＿ＢＰ４＿ＩＨを元に作成
　①エキスパートモードを初期、クレータ、パルス電流に反映した。
　　（大崎さん、田畑さんと検討の結果、パルスモードではパルス電流のみにエキスパートモードを反映することにした。
　　　また、アップスロープ、ダウンスロープ中は波形が滑らかにならない可能性があるので反映させないことにした）
　　現時点で未試験

・２００９＿０２＿１２＿ＢＰ４
　２００９＿０２＿１０＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①エキスパートモード不具合修正
　　あるタイミングからクレータ無の状態でもクレータにいってしまう。
　　gtt_Ctrl_flag.Sequence_craterのクリアをしていなかったのが原因

・２００９＿０２＿１２＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿１２＿ＢＰ４＿ＩＨを元に作成
　①溶接法選択で”溶接ナビ”を選択すると、ＬＣＤに”ザイシツ？　アルミ”が表示されるが、その後、溶接法を例えば、エキスパートの
　　直流選択にしてもしばらく”ザイシツ？　アルミ”が表示されたままになる。
	原因：gus_RTC_cDebug_1の時間が残っているため、表示が残っていた。
　　修正：溶接ナビモードから抜けるとgus_RTC_cDebug_1 = 0とするように変更
　②ＬＥＤ表示不具合
　　溶接終了時、７ｓｅｇＬＥＤはＢＵＲＮ　ＢＡＣｋ終了で設定にもどるが、ＬＥＤはＡＦＴＥＲ　ＦＬＯＷで終了で設定に戻っていた
　　ため７ｓｅｇＬＥＤ表示とＬＥＤの表示に時間差が発生していた。
　　修正：どちらもＢＵＲＮ　ＢＡＣＫ終了で表示を設定にもどるように変更。
　③交流周波数設定のままで溶接を行うと、溶接が終了しても７ｓｅｇＬＥＤが溶接出力電流を表示したままになる。
　　原因：待機時、設定電流を明確に表示する処理を行っていなかった。
　　修正：メイン設定電流を表示するように変更。なお、ＭＩＸのＭＩＸ周波数、直流比率の設定についても同様の状態になるので、
　　　　　合わせて、メイン電流を表示するように変更。
　　　　　ｒｏｂ＿ｐｃ＿ｒｅ＿ｒｃｖ＿ｃｌａｓｓ（１６７０行目付近）
　④交流周波数設定ＬＥＤが待機中たまに点滅する。
　　原因：待機中のＬＥＤ点灯処理を、一旦すべて消灯し、必要なものを点灯するようにしていたので、消灯した瞬間に通信が行われると
　　　　　点滅してしまう。これは交流周波数設定ＬＥＤに限らず、すべてのＬＥＤで発生していたもの。
　　修正：必要なＬＥＤを点灯すると同時に消すべきＬＥＤのみ消灯するように変更。
　　　　　ｒｏｂ＿ｐｃ＿ｒｅ＿ｒｃｖ＿ｃｌａｓｓ（３６３０行目付近）
　⑤パルス電流選択ＬＥＤが点滅状態で一旦プリフロー等を選択し、再びパルス選択ボタンを押すと、パルス幅選択になってしまう。
　　同様のことは交流設定、ＭＩＸ設定で起こる。
　　修正：プリフロー等の項目を選択した場合、一旦関係する変数を０クリアする。
                        //***** パルス項目、ＡＣ項目、ＭＩＸ項目は一旦先頭に戻す。2009.02.12 *****
                        guc_Pulse_item_counter  = 0;
                        guc_Ac_tig_set_counter  = 0;
                        guc_Mix_tig_set_counter = 0;
                        //************************************************************************
　⑥パルスデューティ表示の不具合
　　５％表示が０５％となってしまう。
　　０表示時はスペースが表示されるように変更。
　⑦メイン基板の７ｓｅｇＬＥＤにＶｅｒ表示をしている間、キー入力を受け付けない。
　　以前営業から起動時の初期化時間が長すぎるとの指摘を受けた。
　　これを受け、短くするように試みたが、ＩＩＦ等の関係で、うまくいっていない。製品Ｖｅｒでは短くするようにする予定だが、
　　ロード車仕様では従来の時間のままとする。
　

・２００９＿０２＿１３＿ＢＰ４＿ＩＨ
　２００９＿０２＿１２＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①エキスパートモードの係数を詳細メニューで変更できるようにした。

・２００９＿０２＿１３＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿１３＿ＢＰ４＿ＩＨを元に作成
　①電圧表示無で溶接を行うと”０．０”が表示される不具合を修正
　②ＨＯＴシーケンスを追加（但し、ロード車限定）
　

・２００９＿０２＿１６＿ＢＰ４＿ＴＮＹ＿ＮＯ１(Phase5-8)
　２００９＿０２＿１３＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①２００９＿０１＿２７＿ＢＰ４＿ＴＮＹ＿ＮＯ１(Phase5-6)の変更を反映
  　１：条件選択時の表示のチューニング
　　２：溶接条件名入力処理を詳細メニュー１４番目に追加（表示系＋ＦＲＡＭへの記憶に対応）
　　３：再生／記憶関係の表示処理を対応（実際の再生／記憶処理の細部確認は未対応）
　　４：モード識別を直値から#define指定値に変更
　　５：モード選択順を仕様通りに対応
　②２００９＿０２＿１３＿ＢＰ４＿ＴＮＹ＿ＮＯ１(Phase7)の変更を反映
　　１：詳細モード時の７セグ表示を「Ｐｎｎ」から「０ｎｎ」に変更
　　２：再生モード時と記憶モード時の電圧表示器部の表示を「－－－」に変更
　　３：再生モード時と記憶モード時のＬＣＤ表示の変更
　　４：一部記憶データの共通化（全チャンネル同じデータを記憶）
　③プログラムエリア拡大のため、ＤＳＰプログラム格納エリア先頭番地を６６０００ｈから６８０００ｈへ移動


・２００９＿０２＿１６＿ＢＰ４＿ＩＨ
　２００９＿０２＿１６＿ＢＰ４＿ＴＮＹ＿ＮＯ１(Phase5-8)を元に作成
　①ＴＳ　ＯＮ電流検出なしで、ＴＳ　ＯＦＦするとアフターフローに入ること。
　②出力補正機能
　　初期区間、本電流区間、クレータ区間で動作。パルスなしのみ。
　　エキスパートモードでは動作しない。

・２００９＿０２＿１６＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿１６＿ＢＰ４＿ＩＨ
　①クリーニング幅反映
　②クリーニング幅、交流周波数を溶接中に変更できるようにした。


・２００９＿０２＿１７＿ＢＰ４＿ＩＨ
　２００９＿０２＿１６＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①ＭＩＸ周波数を生成できるように変更
　　但し、ＭＩＸパラメータはＤＳＰに反映されていない。（田中さん待ち）
　②アークが切れなくなる不具合発生
　　原因：２００９＿０２＿１６＿ＢＰ４＿ＩＨの①で修正した内容が原因で、高周波期間中にＴＳ　ＯＦＦされると
　　　　　ＡＦＴＥＲ＿ＦＬＯＷに移行してしまうのが原因。（ＡＦＴＥＲ＿ＦＬＯＷには出力を停止する信号機能がない）
　　修正：高周波期間中にＴＳ　ＯＦＦされると、ＢＵＲＮ＿ＢＡＣＫに移行するように変更
　③本プログラムより、ＣＰＳ番号：０４８　ＶＥＲ番号：００１とする。
　　今後プログラムが変更される毎にＶＥＲ番号を１づつ加算していく。

・２００９＿０２＿１７＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿１７＿ＢＰ４＿ＩＨ
　①溶接中、パルスデューティーを変更した時、小数点が表示される等の表示上の不具合を修正
　②詳細メニューから抜けた後、時計の再表示が遅れる不具合を修正
　＊Ｖｅｒ　００２

・２００９＿０２＿１８＿ＢＰ４＿ＩＨ
　２００９＿０２＿１７＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①溶接中にパラメータの変更ができるように修正
  ②パルス周波数が５Ｈｚまでしかでないようにした。（ＤＳＰが対応していないため）
  ③溶接ナビの残りの変数を反映した。
　＊Ｖｅｒ　００３

・２００９＿０２＿１８＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿１８＿ＢＰ４＿ＩＨを元に作成
　①ＭＩＸ処理を追加
　②高周波時トーチＳＷ　ＯＦＦでバーンバックで４秒間停止する不具合を修正
　③溶接中トーチをはなし、停止させた場合、アフターフローをとばしてしまう不具合修正。
　＊Ｖｅｒ　００４

　
//200.02.19
FPGA アオタイFS 2.75us切り替え、デッドタイム0.75us
DSP　
E13有効。MIX対応。
重畳TR EN(TIG)区間中オン継続
転流前電流、溶接指令X1.5＆100A以下

・２００９＿０２＿１９＿ＢＰ４＿ＩＨ
　２００９＿０２＿１８＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①クレータ反復時の終了方法をＷクリックに変更
　②ＦＲＡＭの内容が破損していた場合、初期値がセットされるように追加
　③パルス周波数最大５Ｈｚに変更。（ロード向け）
　④交流選択時、最低電流値が１０Ａになるように変更。
　＊Ｖｅｒ　００５

・２００９＿０２＿１９＿ＢＰ４＿ＩＨ_ＮＯ２
　２００９＿０２＿１９＿ＢＰ４＿ＩＨ
　①パルス周波数を０．１以下にすると５．０に戻る不具合修正（ロードレベル）
　②Ｐ１９の設定を行うと、アリ、ナシ選択だけではなく、不正な表示を行っていた問題を修正
　　（ＡＺ４でローパルス電圧の設定になっていたため発生した問題）
　＊Ｖｅｒ　００６

・２００９＿０２＿１９＿ＢＰ４＿ＩＨ＿ＮＯ３
　２００９＿０２＿１９＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①溶接ナビの２月１９日時点のデータを入れた。
　②交流周波数、クリーニング幅、ＭＩＸ周波数、直流比率の標準値を表示し、標準値であれは、７ｓｅｇＬＥＤを
　　点滅させるように変更。
　＊Ｖｅｒ　００７

・２００９＿０２＿２０＿ＢＰ４＿ＩＨ
　２００９＿０２＿１９＿ＢＰ４＿ＩＨ＿ＮＯ３と等価品
　①Ｖｅｒ更新
　　昨日溶接ナビ作成途中で、急遽プログラムが必要となり、そのＶｅｒが００７となっていたので、
　　プログラムの差を明確（あとでわからなくなるのを防ぐため）にするため、Ｖｅｒ００８にする
　　ことにする。

・２００９＿０２＿２０＿ＢＰ４＿ＩＨ＿ＮＯ２
  ２００９＿０２＿２０＿ＢＰ４＿ＩＨを元に作成
　①溶接ナビのプリフロー、アフターフロー、アップスロープ、ダウンスロープを反映
  ②溶接ナビの検索不具合を修正（したつもり）
　　アルミのみしか材質がない場合、アルミ、空白を選択してしまう。
  Ｖｅｒ　００９

・２００９＿０２＿２０＿ＢＰ４＿ＩＨ＿ＮＯ３
　２００９＿０２＿２０＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①直流時ホット電流を交流と同じ方式（指令値により変化する）に変更
　Ｖｅｒ　０１０

・２００９＿０２＿２０＿ＢＰ４＿ＩＨ＿ＮＯ４
　２００９＿０２＿２０＿ＢＰ４＿ＩＨ＿ＮＯ３を元に作成
　①スローダウン値を指令値と同じにすることにより、ホット発生後の出力の落ち込みをなくした。
　Ｖｅｒ　０１１

・２００９＿０２＿２０＿ＢＰ４＿ＩＨ＿ＥＸＰ＿ＴＥＳＴ２
　２００９＿０２＿２０＿ＢＰ４＿ＩＨ＿ＮＯ４を元に作成
　①エキスパートモード現在最終形を導入
　　ＴＳ　ＯＮ時、ＲＥＦ電圧を取得し、測定電圧の差分で、出力電流の調整を行う。
　　制限：
　　１）パルスモード不可
　　２）初期、クレータ動作不可
　　３）溶接指令値変更でも動作するかもしれいないが、再度リファレンス電圧を取得する必要がある。
　　　　（未確認）
　Ｖｅｒ　０１２

・２００９＿０２＿２３＿ＢＰ４＿ＩＨ
　２００９＿０２＿２０＿ＢＰ４＿ＩＨ＿ＥＸＰ＿ＴＥＳＴ２を元に作成
　①ＣａｌｃＰａｒｍ１８、２０、８４を従来の二次式方式に戻した。
　Ｖｅｒ　０１２


・２００９＿０２＿２３＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿２３＿ＢＰ４＿ＩＨを元に作成
　①プリフロー、アフターフロー時間が設定の半分になっていたので修正
　②交流の周波数、クリーニング幅が反映されていなっかので、反映。
　③エキスパートモードの動作速度を上げた。
　　１）電圧の平均時間を５０ｍＳタイマを使用
　　２）電流補正量を１回０．０１－＞０．１に変更
　Ｖｅｒ　０１３

・２００９＿０２＿２３＿ＢＰ４＿ＩＨ＿ＮＯ３
　２００９＿０２＿２３＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①溶接ナビ選択後、テーブルがアクセスされていなかった問題を修正
　Ｖｅｒ　０１４


・２００９＿０２＿２４＿ＢＰ４＿ＩＨ
　２００９＿０２＿２３＿ＢＰ４＿ＩＨ＿ＮＯ３を元に作成
　①パルス周波数が、溶接終了後すぐに反映されるように変更
　②エキスパートモード以外では溶接電流、電圧平均回数を20回にする。
　③クレータ時、一旦ＴＳ　ＯＦＦすると初期電流に戻るように変更。
　　（いままで：２秒以内にＴＳ　ＯＮするとクレータ電流がでるようにしていた＝仕様間違い）
　

・２００９＿０２＿２４＿ＢＰ４＿ＩＨ＿ＮＯ２
　２００９＿０２＿２４＿ＢＰ４＿ＩＨを元に作成
　①各溶接法での溶接条件を記憶するように変更
　②オール初期化機能搭載
　　オール初期化方法
　　１）ＤＳＷ１の７番をＯＮし、溶接電源起動
　　２）溶接電源ＯＦＦ
　　３）ＤＳＷ１の７番をＯＦＦし、溶接電源起動
  ③プログラムエリアの拡張
　　１）プログラムエリア６８０００－＞６９０００
　　２）ａｓｍテーブル　８００００－＞８２０００
　　３）溶接テーブル　　８２０００－＞８４０００
　　にそれぞれ変更

　Ｖｅｒ　０１６

・２００９＿０２＿２４＿ＢＰ４＿ＩＨ＿ＮＯ３
　２００９＿０２＿２４＿ＢＰ４＿ＩＨ＿ＮＯ２を元に作成
　①パルス周波数、ＭＩＸ周波数が溶接時調整すると　”０．１”を”．１”と表示する不具合修正
　②パルス周波数の最大値（初期値）を１０．０－＞５．０Ｈｚに変更。（現状最大５．０Ｈｚしかでないため）

　Ｖｅｒ　０１７


・２００９＿０２＿２５＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ１
　２００９＿０２＿２４＿ＢＰ４＿ＩＨ＿ＮＯ３を元に作成
　①ＳＵＳのダミーデータを入れた。
　Ｖｅｒ　０９０


・２００９＿０２＿２５＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ２
　２００９＿０２＿２５＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ１を元に作成
　①アークきれ発生時に高周波を発生させるように変更
　　内容：
　　もともとはアークきれが発生すると、高周波を停止する仕様にしていた。
　　ＢＰ２の仕様に合わせた。
　　発生タイミングとして、ＢＰ２はアークきれが発生すると即高周波を発生するが、
　　ＢＰ４はアークきれ検出に５００ｍｓかかるので、息をついた状態になる。
　　（この状態でアーク再生性がよくない）
　　そこで、電流値のみで高周波を動作させる仕様に変更。
　　電流検出きれ確定までの時間も電流値が１Ａ以下になったら、高周波を発生させる
　　ようした。ー＞アーク再生性が格段に向上した。
　　ＥＰスタートが完成すれば、ＢＰ２なみにはなると思われる。

    Ｖｅｒ　０９１

　　
・２００９＿０２＿２６＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ２＿ＴＥＳＴ１
　２００９＿０２＿２５＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ２を元に作成
　①交流時ＥＰスタート実験
　②ホットスロープ実験
　③アンダーシュートを抑える実験


・２００９＿０２＿２７＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ２＿ＴＥＳＴ２
　２００９＿０２＿２６＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ２＿ＴＥＳＴ１を元に作成
　①５Ｈｚ以上のパルス区間はＤＳＰに制御を渡すように変更



・２００９＿０２＿２７＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ２＿ＴＥＳＴ３
　２００９＿０２＿２７＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ２＿ＴＥＳＴ２を元に作成
　①直流パルス０．１～５００Hｚ実施


・２００９＿０３＿０２＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ３
　①パルス周波数範囲を０．１～９．９（０．１）、１０～１００（１）、１００～５００（１０）
　②交流選択時はパルス周波数は０．１～５．０HZとした。
  ③電圧ｻﾝﾌﾟﾘﾝｸﾞの割り算変数を削除（Ｉ＿Ｖ＿ＲＥＡＤ）
  ④初期化時、ホットレベル、外部特性等を初期化できるよに変更
  ⑤一次過電圧、低電圧のレベルを元に戻した。
  Ｖｅｒ　０９２


・２００９＿０３＿０２＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ４
　①直流時ホットレベルを一律６０Ａに変更（ＢＰ２相当に戻した）
　②アフターフロー中に再度トーチスイッチＯＮすると半固定パラメータを１／２にする方法をやめた。
　　（ホット時間が１／２になるため）
　③ホット時間を変更（半固定パラメータの書き換え）
  Ｖｅｒ　０９３


・２００９＿０３＿０２＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ５
　２００９＿０３＿０２＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ４を元に作成
　①ＤＳＰの改良
　　転流前の持ち上げ分を５０Ａ以上に制限
　Ｖｅｒ　０９４


・２００９＿０３＿０５＿ＢＰ４＿ＩＨ＿Ｓ
　２００９＿０３＿０２＿ＢＰ４＿ＩＨ＿ＲＯＤ＿ＮＯ５を元に作成
　①サーマルエラーを６分間後に解除する（途中）

・２００９＿０３＿０６＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿０５＿ＢＰ４＿ＩＨ＿Ｓを元に作成
　①アークスポットシーケンスを追加


・２００９＿０３＿０６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３（ＮＯ２は途中段階だったのでパス）
　２００９＿０３＿０６＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①直流手溶接モードを追加（但し、電防機能なし）
  ②アークスポット時間の初期化を追加

　Ｖｅｒ　０９５

・２００９＿０３＿０７＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿０６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３を元に作成
　①ハード電検によるアーク切れ判別（未確認）
　②直流手溶接モードの電防有無をＤＳＰに転送する機能
　③詳細メニューの変更（並びと名称）
　④詳細メニューにリモコンの選択追加
　Ｖｅｒ　０９６


・２００９＿０３＿０７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２
　２００９＿０３＿０７＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①直流手溶接用テーブルがアクセスできるように変更
　②直流、交流テーブルのアクセスキーを一部変更
　Ｖｅｒ　０９７

・２００９＿０３＿０７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３
　２００９＿０３＿０７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①詳細メニューのＬＣＤコントラスト調整（機能しないダミー表示）を追加
　Ｖｅｒ　０９８

・２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿０７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３を元に作成
　①リモコン接続の移植
　Ｖｅｒ　０９９

・２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２
　２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ
　①田中さんＤＰＳ追加
　　・でんぼう機能
　　・ﾊｰﾄﾞ電検

・２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３
　２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①直流時は高周波リカバリーが利かないように変更
　②詳細メニューでＡＣアーク切れリカバリーを選択するとＡＣアークきれ時高周波が出力されるように変更。
　Ｖｅｒ　０９Ａ

・２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ４
　２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３を元に作成
　①リモコン差込時、溶接法切り替えで、一旦リモコンを触らなければ、リモコンの内容が反映されない問題を修正
　　例：溶接電流のＪＯＧ値が５０Ａとし、リモコンを挿した段階では、リモコン値は反映されず、５０Ａのまま、
　　　　リモコンをＶＲを少しでも動かすと、リモコン値が反映される。
　Ｖｅｒ０９ｂ

・２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ５
　２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ４を元に作成
　①リモコン接続状態で、直流手溶接の設定値が変わらない不具合を修正。
　②ＭＩＸ溶接で初期とクレータが直流溶接になってしまっていた不具合を修正（初期、クレータは交流）
　③ＭＩＸ溶接でリモコンのパルスを受け付ける不具合を修正（ＭＩＸはパルス設定はできない）
　Ｖｅｒ０９Ｃ


・２００９＿０３＿１０＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１
　２００９＿０３＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ５を元に作成
　①２００９＿０２＿１７＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１(Phase8-9)の変更分を反映
　　１：詳細メニューに「ＬＣＤコントラスト調整」項目を追加
　　　　（コントラスト値の記憶／変更／表示の対応、及び通信プロトコルの追加）
　　　　（なお、コントラスト値の変更があった場合のみ、ＬＣＤコントラスト値変更通信プロトコルを実行させる）

【補足説明】
　※Phase10からPhase12は前バージョンにて組み込み済み。
　　Phase10：
　　　　　　1)：表示系コマンドを随時送信タイプから予約送信タイプに変更
　　　　　　　　（同じコマンドを続けて送信することが無くなる）
　　　　　　2)：表示制御基板向け（Ｍ１６）データ送信タイミングを１ｍ秒／バイトから０．５ｍ秒／バイトへ変更
　　　　　　　　（通常時の表示コマンド送信では１００ｍ秒以内に収まらなかったため、送信速度向上のため）
　　　　　　3)：リモコン用Ａ／Ｄ入力関係の通信コマンドに対応
　　　　　　　　（ただし、Ａ／Ｄチャンネル毎のコマンド送信では応答速度が０．５ｍ秒毎となってしまうため、全Ａ／Ｄチャンネルの一括送信方式に変更。
　　　　　　　　　それに伴い、表示基板のＭ１６、Ｒ８プログラムも変更）
　　Phase11：
　　　　　　1)：アナログリモコンに対応（再生機能は未対応）
　　　　　　※ Phase11の各種電流指令値が範囲外時の初期値の修正は反映せず（元版(ＩＨ版)を使用）
　　Phase12：
　　　　　　1)：個々の７セグＬＥＤ表示制御機能を試験的に追加

　②２００９＿０２＿２３＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１(Phase13)の変更分を反映
　　１：サービスマン・メニュー処理に対応開始（変更第１フェーズ）
　③２００９＿０２＿２４＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１(Phase14)の変更分を反映
　　１：サービスマン・メニュー処理に対応開始（暫定版）
　　２：レスキュー・メニュー処理に対応開始（暫定版）
　　３：オールクリア時の詳細データ、サービスマンデータ、レスキューデータの初期値を修正＆設定（※一部詳細データに関してはＩＨ版にすり合わせる）
　　４：時刻設定時の矢印表示文字を「－＞」「＜－」から「→」「←」に変更
　　５：サービスマン・メニューとフロントパネルの「プリフロー」「アフタフロー」を共用化
　④２００９＿０２＿２５＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１(Phase15)の変更分を反映
　　１：元溶接法が溶接ナビモード時でのサービスマン・メニュー／レスキュー・メニュー処理の不具合を修正
　　２：シーケンス停止異常での発生日時の表示に対応（復帰可能異常の場合は未対応）
　　３：Ｅ８１（コントローラ(表示基板)未接続検知）を削除
　　　　（Ｍ１６側のプログラムもＥ８１検知処理を削除）
　　４：初期起動速度を初期処理待ち約１０秒を約７秒に短縮（※現在未反映中）

　　※　Phase15の「オールクリア時の主溶接条件（パルス設定、クレータ設定、溶接電流、プリフロー時間など）の初期化の設定」の修正は反映せず（元版(ＩＨ版)を使用）

　⑤直流ＴＩＧスタート極性のデフォルト値をＥＮ（０）に変更。
　⑥サービスマン・モード／レスキュー・モードの時はエラーの監視＆シーケンスの実行は行わない(Phase14からの変更：Phase16)
　⑦コントローラ・ロックの対応（ロックの設定／解除項目は未搭載：毎時解除状態）(Phase16)
　⑧サービスマン・メニューにて設定した値を記憶出来ていなかった不具合に対応(Phase16)
　⑨サービスマン・メニューにて「プリフロー時間」「アフターフロー時間」の設定項目／初期化＆設定詳細を削除(Phase16)
　⑩レスキュー・メニュー移行にもパスワード入力を追加(Phase16)

　Ｖｅｒ　０９Ｄ


・２００９＿０３＿１２＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１
　２００９＿０３＿１０＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１を元に作成
　２００９＿０３＿１１＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１を元に作成
　①レスキュー・メニュー移行にもパスワード入力を追加の不具合修正(Phase16)

　Ｖｅｒ　０９Ｄ


・２００９＿０３＿１３＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿１２＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１を元に作成
　①温度異常時ＬＥＤ点灯させるようにした。
　②Ｖ＿ＭＡＸの感度調整（感度を上げた）
　③リモコン接続時の上下限設定（交流ハード、ソフトでの上下限も設定した）
　④ＭＩＸ時にパルス選択表示がされていたものを点灯しないように修正
　⑤ＡＣの波形モード記憶するように変更
　⑥電極短絡チェックができるようにした（未確認）
　⑦サーマル６分間動作ができるようにした。
　　確認内容：
　　条件６分間動作を待つのは大変なので２分間動作にし確認試験を行った。
　　１）１７：５９発生－＞電源ＯＦＦ－＞再び電源ＯＮ－＞１８：０１解除（時変わり）
　　２）２３：５９発生－＞電源ＯＦＦ－＞再び電源ＯＮ－＞００：０１解除（日変わり）
　　３）１ヶ月後の同じ時間になっても誤って、検出することはないのを確認。
　　４）月が変わると時間を待たずにエラー解除
　　　　例：３月３１日２３：５９発生－＞４月１日００：００解除
　　　　処理が非常に煩雑になるので、月変わりの処理は省略（仕様通り）
　　　　なお、年変わりも同じ動作（月変わりになるため）
　　上記動作を行うため、電源ＯＦＦ時（Ｅｒｒ００５の部分に仕込む）にエラー００３が出たというフラグをＦＲＡＭに
　　保存。（なお、エラー００３がでなくても保存：状態記憶のため）
　⑧一次低電圧異常が電源ＯＦＦ時に表示されるとの報告があったので、一次低電圧表示（記憶）ディレイ時間を
　　１秒から１．５秒に変更（実機確認未）
　⑨確認事項
　　Ｅｒｒ００８（電検異常）が起動時発生した状態の場合、Ｅｒｒ００８が操作パネルに表示されるかどうかを確認した。
　　表示されることを確認。

　　Ｖｅｒ０９Ｅ


・２００９＿０３＿１４＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿１３＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①可変反復機能を追加
　　但し、
　　１）動作未確認
　　２）詳細メニューで選ぶ部分が未

　Ｖｅｒ０９Ｆ
　
・２００９＿０３＿１６＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿１４＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　⑥電極短絡チェックができるようにした（未確認）－＞修正および確認
　⑧一次低電圧異常が電源ＯＦＦ時に表示されるとの報告があったので、一次低電圧表示（記憶）ディレイ時間を
　　１秒から１．５秒に変更（実機確認未）－＞修正および確認
　①前回溶接の測定電流が次回の溶接で一瞬表示される（修正後確認ＯＫ）

・２００９＿０３＿１６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２
　２００９＿０３＿１６＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①可変反復動作作成


・２００９＿０３＿１６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３
　２００９＿０３＿１６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①最長スポット時間が反映できるようにした。
　②溶接中、例えば待機中に時間関係の表示をした状態とすると、それを引き継いで表示するように変更。
　　（過去やっていたが、やめていた。ひょっとすると他に弊害があるのかもしれない）
　③５０ｃｈ分確保したが、いろいろ消したので、チェックを要する。
  Ｖｅｒ　０Ａ０

・２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿１６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３を元に作成
　①アークドライブを追加
　Ｖｅｒ　０Ａ１

・２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２
　２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①パネル送信部で0x20と0x21で中身をすべて消していたので、LED表示ができなかったのを修正
　Ｖｅｒ　０Ａ２


・２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３
　２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①カヘンハンプクアリ時　クレータ無でＴＳ　ＯＦＦが利かなくなりアークがとまらなくなる。
　　原因：
　　　カヘンハンプクアリでは、エキスパートモードとパルス時しか、カヘンハンプクを無効にしていなかったので、
　　　ＴＳシーケンスがカヘンハンプクのものになってしまっていた。
　　修正：
　　　カヘンハンプクアリかつ反復を選択したときのみカヘンハンプクが有効で、そのなかでもエキスパートモード
　　　とパルス時は無効とした。
　②ガス出力
　　・再生・記憶時にもガスが出力されるように変更
　　・詳細選択時は”ｎｏ　Ａｃｔ”が表示されるように変更
　③溶接ナビと直流手溶接時は選択ボタンが利かないように変更
　Ｖｅｒ　０Ａ３

・２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ４
　２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３を元に作成
　①記憶時、”ｒＥＣ”表示がでるように変更。
　Ｖｅｒ　０Ａ４


//2009.03.17
CD_CHECK_TIME 500ms→25ms　DCスタート性改善
FPGA.c　ｵﾌｾｯﾄ調整追加。直値書き込み。後日変数化。
IVRead  平均電流式変更。ゲイン直値書き込み。後日変数化。

DSP　オフセット調整、ゲイン調整有り
WELDDAT　変更

・２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ５
　２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ４を元に作成
　①電流、電圧の平均回数を１００に変更（１０ｍS)
　②溶接ナビで選択ボタンが利かないようにしたら、溶接ナビから抜けれなくなったので、
　　溶接ナビ中は選択ボタンが押せるようにもとにもどした。

　Ｖｅｒ　０Ａ５

・２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ６
　２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ５を元に作成
　①田中さんのインバータ変更試作品搭載
　②田中さんのＩ＿Ｖ＿ＲＥＡＤ搭載
　③電流電圧の二次平均回数をエキスパートモードで４０回（４００ｍｓ）　通常モードで８０回（８００ｍｓ）に変更
　④上記②について、問題点はクレータ選択とパルス選択のみだったので、溶接ナビ時はその２つを選択できないように
　　変更（他の項目は元から選択できない状態になっていた）
　⑤パルス５Ｈｚ以下では冶具端子にパルス出力ができるように変更。
　　（５Ｈｚ以上では常にパルス出力とした）
　⑥アークドライブの電流上限を直流手溶接の上限２５０Ａとした。
　２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ５の①の補足説明：
　平均回数を１００にしたのは従来２０００回では電圧値がなまってしまい、アークドライブが利かないという問題が発生したため
　１００回にすることでアークドライブが利くほどの電圧変動を検出できるようにした。
　Ｖｅｒ　０Ａ６

・２００９＿０３＿１８＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿１７＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ６を元に作成
　①エキスパートモード選択時はスポットに行かないように変更
　②ＭＩＸの範囲
　　１０～２００になっていた。１０～３００に変更
　③プリフロー　現状０～１０．０　０～３０．０
　④スポット時
　　プリフロー、アフターフロー選択ができない不具合を修正
　　スポット時間下限０．１秒に変更
　⑤ＭＩＸ周波数がぐるぐる回る不具合修正
　　下限値を０．５－＞０．１に修正
　⑥パルス幅がぐるぐる回る不具合を修正
　⑦最終の溶接ナビテーブルを入れた。

　Ｖｅｒ　０Ａ７


・２００９＿０３＿１９＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿１８＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①起動時間を７秒に短縮した。
　
　Ｖｅｒ　０Ａ８


・２００９＿０３＿２１＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿１９＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①ＬＣＤコントラストの範囲を１～１２に修正
　　１の設定で従来の４が出力されるようにした。
　　（４がＬＣＤ輝度がもっとも薄く安定した表示をするため）
　　これに伴い、オールクリア時の初期値を１に変更

  Ｖｅｒ　０Ａ９

・２００９＿０３＿２３＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿２１＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①パルス周波数を０．１にセットした場合、溶接中．１になる不具合を修正
　②パルス出力時の表示を周波数に応じて、指令値、計算値に変える。

　　Ｖｅｒ　０ＡＡ

・２００９＿０３＿２４＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿２３＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①パルス出力時の表示を
　　０．１～０．７Ｈｚ
　　電流値：指令値の平均
　　電圧値：パルス一周期あたりの平均
　　０．８～５．０Ｈｚ
　　電流値：パルス一周期あたりの平均
　　電圧値：パルス一周期あたりの平均
　　５．１Ｈｚ～
　　電流値：８０サンプリングの平均値
　　電圧値：８０サンプリングの平均値
　②電流指令値変化時のスロープ時間を０にした。
　　（パルス時の立ち上がりスロープがなくなった）
　　ｗ＿Ｉｎｉｔ２（）のpDat->Nを強制的に１にした。
　③隠していた可変反復機能を有効にした。
　④スポット時間の最大値を５．０秒に変更した。
　　これに伴い、サービスマンメニューの最長スポット時間の調整範囲を
　　５．０～１０．０秒に変更

　　Ｖｅｒ　０Ａｂ


・２００９＿０３＿２５＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　２００９＿０３＿２４＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　
　3/25 河原田さん確認用

　①ＤＳＰ　3/17 施工確認用
　②データ　3/18 交流ｱｰｸ切れ対策（田中、小林）

　　Ｖｅｒ　０ＡＣ


・２００９＿０３＿２６＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿２５＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①可変反復の問題点を修正
　　・ダウンスロープ中にアップスロープに移る時、出力停止になる問題点を修正
　　・初期電流時はダブルクリックで出力停止になるように修正
　②溶接終了時の電流電圧表示を初期、本、クレータ時の電流、電圧に限定されていたので、
　　初期～クレータに変更。
　　例：アップスロープ期間中に溶接を終了すると、初期時の電流、電圧を表示されてしまう。

   Ｖｅｒ　０Ａｄ

・２００９＿０３＿２６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２
　２００９＿０３＿２６＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①可変反復の問題点を修正
　　・アップスロープ、ダウンスロープ時間を０にすると本電流、クレータに移らない問題を修正
　Ｖｅｒ　０ＡＥ


・２００９＿０３＿２６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３
　２００９＿０３＿２６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①実効値計算を入れた。（動作未確認）

・２００９＿０３＿２７＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿２６＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３を元に作成
　①実効値計算を修正。
　　田中さんの複雑な式で出た結果を２乗すると、結果がおかしくなるので、
　　元の形に戻した。（実効値計算時のみ）
　②パルス時の計算周波数域と算出方法を変更した。
　　０．１～０．４Ｈｚ
　　電流値：８０サンプリングの平均値（または実効値）
　　電圧値：パルス一周期あたりの平均（または実効値）
　　０．５～５．０Ｈｚ
　　電流値：パルス一周期あたりの平均（または実効値）
　　電圧値：パルス一周期あたりの平均（または実効値）
　　５．１Ｈｚ～
　　電流値：８０サンプリングの平均値（または実効値）
　　電圧値：８０サンプリングの平均値（または実効値）
　③パルス周波数の計算時、パルス周波数は小さい時で、パルス幅を９０％とか１０％にした場合
　　計算途中で、オーバーフローする恐れがあるので、関連する変数をｓｈｏｒｔからｌｏｎｇに
　　変更。ＭＩＸ周波数についても同様に変更。
　④パルス時に本電流とパルス電流が異なる場合、またはクレータ有時に、本電流と初期電流が異なる
　　場合、スタート時、２段階の階段状となる。
　　これは、ＨＦ＿ＣＴＲＬ時、本電流をセットすることが原因。
　　パルス時はパルス電流値とクレータ有時には初期電流をセットするように変更。
　⑤パルス時最初パルス電流が長めに出る不具合の修正。
　　L3_table_data_read_member.cのパルス初期設定において、電流をセットしていなかったのが原因。
　　if (gtt_Ctrl_flag.Wave_current_time == OFF)
    {
        gtt_Ctrl_flag.Wave_current_time = ON;
        gtt_Ctrl_flag.Condition_time_set = OFF;
        gtt_Ctrl_flag.Condition_change = OFF;
        _union.Nrm.CalParm[18 - 1].max = 400;               //パルスピーク電流
        _union.Nrm.CalParm[18 - 1].min = 1;               //パルスピーク電流
        _union.Nrm.CalParm[20 - 1].max = 400;      //パルスベース電流
        _union.Nrm.CalParm[20 - 1].min = 1;      //パルスベース電流
        ★　ctlclsWeldCondSet( gtt_Internal_pack.Data.In.usIP , gtt_Internal_pack.Data.In.usWeldingVolt); //2009.03.27
    } else { 
　　★部のコードを追加。

・２００９＿０３＿２８＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿２７＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①アナログリモコンによるＣＨ再生機能（途中、動作未確認）


・２００９＿０３＿３０＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿２８＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①アナログリモコンによるＣＨ再生機能追加（シミュレータで動作確認済み）
  Ｖｅｒ　０Ｂ０

・２００９＿０３＿３０＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２
　２００９＿０３＿３０＿ＢＰ４＿Ｓ＿ＩＨ
　①アナログリモコンによるＣＨ再生機能不具合修正
　　不具合内容：
　　１）溶接を行ったたら、ＶＲを値を読み込み再生電流を忘れていた。
　　２）あるＣＨで一旦再生を行い、同一ＣＨの範囲でＶＲを動かしたら、ＣＨセンタクチュウになってしまっていた。
　②アナログリモコンによるＣＨ再生を再生ボタンを押して、離した段階で反映していたのを、押して０．５秒で反映する
　　ように変更。
　③直流手溶接時、アークスタートして一旦アークが切れると、再スタートをさせ、ホット電流がでるように変更（動作未確認）
　Ｖｅｒ　０Ｂ１

・２００９＿０３＿３１＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿３０＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①直流手溶接時の再スタート不具合修正
　　アークきれを検出して、再スタートするまでの時間が非常に短いとＤＳＰが受け付けることができず、
　　出力しなくなる。
　　アークきれを検出して、再スタートまでの時間を０．５秒とった。
　②ホット電流の設定ができていなかったので追加した。なお、直流手溶接ではホット電流は１５０Ａであるので１５０Ａをセットする
　　ようにした。

　Ｖｅｒ　０Ｂ２


・２００９＿０３＿３１＿ＢＰ４＿Ｓ＿ＩＨ＿ＤＳＰ
　２００９＿０３＿３１＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３を元に作成
　①２００９＿０３＿２７＿ＢＰ４＿Ｓ＿ＩＨ＿ＤＳＰで行ったＤＳＰインターフェースを
　　移植

　Ｖｅｒ　９００


・２００９＿０４＿０１＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０３＿３１＿ＢＰ４＿Ｓ＿ＩＨ＿ＤＳＰを元に作成
　①田中さん修正分を反映（田中ノートＰＣ　Ｄ０１）
　②交流ソフト・ハードを選択した場合に波形（波形テーブル）が切り替わらない不具合修正

　Ｖｅｒ　９０１



・２００９＿０４＿０１＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２
　２００９＿０４＿０１＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①アナログリモコンの再生で交流選択後、再生の直流ＣＨを選択し（但し確定はさせていない状態）で、
　　再生を解除すると、表示は交流のままで、直流として溶接してしまう不具合修正
　　修正内容：
　　　今回のＴＩＧ機ではリモコン接続時、明確にキーチェンジを行っていなかったので、再生後明確に
　　　キーチェンジをするように変更した。
    Ｖｅｒ　９０２

・２００９＿０４＿０１＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３
　２００９＿０４＿０１＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①交流の標準、ハード、ソフトのそれぞれで、初期電流、本電流、クレータ電流、パルス電流、交流周波数、クリーニング幅を持つように変更
　②上記に伴い初期化をそれぞれに実施するように変更
　③ＡＣソフト選んだ後ＡＣ標準を選ぶと最高電流設定が２００Ａになってしまう不具合を修正。
　　Ｖｅｒ　９０３


・２００９＿０４＿０１＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３
　２００９＿０４＿０１＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①再生時、再生内容をテーブルに反映できていなかった。
　②田中さんのDSPとテーブルを入れた。
　　ｖｅｒ　９０４

・２００９＿０４＿０２＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０４＿０１＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３を元に作成
　①溶接ナビテーブルを更新
　Ｖｅｒ　９０５


・２００９＿０４＿０３＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０４＿０２＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①エキスパートモード時はパルスが選択できないように変更
　　Ｖｅｒ　９０６


・２００９＿０４＿０３＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２
　２００９＿０４＿０３＿ＢＰ４＿Ｓ＿ＩＨ
　①サービスマンメニューの変更と反映
　　反映内容はＨＯＴに関連すること等。
　②ＤＳＰ割り込み追加　
　　・パルス信号
　　・オフセット量
　　・スタート処理完了信号
　　Ｖｅｒ　９０７

・２００９＿０４＿０３＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ３
　２００９＿０４＿０３＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①サービスマンメニューの反映不具合修正
　②クレータ、パルス有り時、ＤＳＰパルス制御にいった状態（５．０ＨＺ以上）で終了すると次の
　　初期電流でパルスがでる不具合発生。
　　初期、クレータ、パルス無し本溶接時は一旦ＤＳＰパルス制御ｸﾘｱするように変更
　③スポット時、初期、アップスロープ、クレータ電流のボタンを押すとＬＥＤは光らないが、選択できてしまう不具合修正
　　Ｖｅｒ　９０８

－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－
田中修正

・2009.04.06　Ｖｅｒ　９Ｆ８ 
DSP変更　スタート70Hz追加、交流ｽﾀｰﾄSLP追加中

・2009.04.06　Ｖｅｒ　９Ｅ８
DSP変更　DC時HOT区間無効

・2009.04.06
■I_V_Read
ﾊﾞｲｱｽｵﾌｾｯﾄ一旦無効。
算出後、-1A 実施する。（未実施）

■calc.c
V71 変更。
CalcParm71 内にて、CalParm 関数の中身を実行するような感じ。
これにより、ﾃﾞｰﾀﾃｰﾌﾞﾙの値を利用できる。（ﾓｰﾄﾞ毎に切り替える）
電流指令／１００＝送給指令として逆算出している。

■hpidsp.c
オフセット受信。未使用

■Global.c
外部変数追加。未使用

■weldtbl.c
DC時のオフセット（１A加算）
ﾊｰﾄﾞ、ｿﾌﾄ波形のマッチング（換算係数）をデータ化する。
標準交流のEPT→ENTへの転流時の持ち上げ量(H339）を無効化する。
（アークチェックの結果より、鳴戸さん要望）

　　Ｖｅｒ　９ｄ８

－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－
・２００９＿０４＿０６＿ＢＰ４＿Ｓ＿ＩＨ
井原さん修正
　　田畑さん内容修正
　　ＴＳオン時に、可変Ｖ７１を送信もらう。スタートＳＬＰのつなぎのため必要。

　　Ｖｅｒ　９ｄ９


－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－
・２００９＿０４＿０８＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１
谷川修正
　①レスキューメニューのパスワード除去
　②エラー履歴クリアをレスキュー・メニューからサービスマン・メニューＮ０１９へ移動
　③ＣＨメモリ記憶ロックをレスキューメニューへ追加＆有効

　　Ｖｅｒ　９ｄＡ


・２００９＿０４＿０８＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０４＿０８＿ＢＰ４＿Ｓ＿ＴＮＹ＿ＮＯ１を元に作成
　①リモコンの最大ＡＤ読み値を９３０－＞９２０に変更。

　　Ｖｅｒ　９ｄｂ


・２００９＿０４＿０８＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２
　２００９＿０４＿０８＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①詳細メニュー変更
　　リセット後の初期値変更
　　００７：ＡＣアークきれリカバリー　無（true、falseが逆転していたのでこの際変更した）
　　００９：日時表　　　　　　　　　　日付（時間になっていた）
　　Ｖｅｒ　９ｄｅ
　

・２００９＿０４＿０９＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０４＿０８＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２を元に作成
　①サービスマンメニューの１２番”一次電圧オフセット”を反映

　Ｖｅｒ　９ｄＦ



＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
　田中修正～４／９分までを移植
＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
//--------------------------------------------------------------------
// BP4 田中追加　2009.04.06 CTOFFSET
//--------------------------------------------------------------------
①ＣＴオフセット関連修正
・hpidsp.c　CTオフセット量割り込みにて受信。
・Global.c　extern.h　外部変数追加。
short			gtt_DSPCToffset;			//DSP自動オフセット調整値
・FPGA.c　電流ADC読み込み部にて、受信オフセット量加算
・L3_mag_ctrl_memory_member.c　変数初期化
・LA1_I_V_READ.c　ｵﾌｾｯﾄ-1 実施する。ｻｰﾋﾞｽﾏﾝﾒﾆｭｰｵﾌｾｯﾄ量(H256)にて算出する。
・L2_int_permit_class.c　fpgaFifoInit(70);へ修正。
②EPスタート修正 2009.04.06 EPSTART
・ifsub_task.c
③DSP変更。直流ｽﾀｰﾄ2段SLP(20A)
　　Ｖｅｒ　９ｃ９
//--------------------------------------------------------------------
// BP4 田中追加　2009.04.07
//--------------------------------------------------------------------
Ｖｅｒ　９ｃ９での直流ＴＩＧ安定性はよくなかった。
９Ｅ９の方がベター
ＤＳＰ：ＤＣＴＩＧ低電流用ＦＤＢＫ実装
データ：ゲイン変更
ＭＯＮＩにて、Ｈ２５９＝１ 送信にて新ＦＤＢＫ動作。
低電流専用。電流あげるとキーンとすごい音する。
　　Ｖｅｒ　９ｂ９
//--------------------------------------------------------------------
// BP4 田中追加　2009.04.09
//--------------------------------------------------------------------
ＤＳＰ変更。
ＤＣＴＩＧ低電流アーク切れ対策、安定性向上。
ＤＣＴＩＧ時のみ実施
・第2ﾀﾞｳﾝSLP中、ｽﾀｰﾄ用ｹﾞｲﾝによる、新FDBK
・7A以下かつ本溶接中、本溶ｹﾞｲﾝによる、新FDBK
・7A以上かつ本溶接中、通常FDBK
新FDBKにて、ｽﾀｰﾄ性向上のためのｹﾞｲﾝではｱｰｸ切れはないが、音の問題があった。
7A以下の指令に対し、スタート中はゲインを高く、本溶接中はｹﾞｲﾝ下げるようにする。
■スタート時高周波が切れるのが遅れる。
初期電流検出で、ＨＦオフするようにする。
・L2_weld_class.c　467行目
//2009.04.09                  if (gtt_Ctrl_flag.Hf_exec == ON) //高周波の起動tanaka
                  if (gtt_Ctrl_flag.Hf_exec == ON && gtt_Ctrl_flag.Lift_up_cd == OFF) //高周波の起動//2009.04.09
　　Ｖｅｒ　９９９
//--------------------------------------------------------------------
// BP4 田中追加　2009.04.09
//--------------------------------------------------------------------
//(2009.04.09)BP_V20_V71_3JICALC+++++
ハード波形マッチンング、５次式を用いる。
パラメータは、calc中直に書き込み。
calc.c
V20とV71の式異なる。ﾒﾓﾘｴﾘｱ不足のため、対応難しい。
　　Ｖｅｒ　９８９
//--------------------------------------------------------------------
// BP4 田中追加　2009.04.09
//--------------------------------------------------------------------
calc.c　V20とV71の式を合わせる。
GB31d1.ms　比例ゲイン変更　7000 → 9000　アークＴ中川さん検証


　Ｖｅｒ　Ａ００

＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
　田中修正～４／９分までを移植　ここまで
＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝



・２００９＿０４＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２＿【Ａ００】
　２００９＿０４＿０９＿ＢＰ４＿Ｓ＿ＩＨを元に作成

田中移植完了分にてヴァージョン作成

　Ｖｅｒ　Ａ００


・２００９＿０４＿１０＿ＢＰ４＿Ｓ＿ＩＨ＿【Ａ０１】
　２００９＿０４＿０９＿ＢＰ４＿Ｓ＿ＩＨ＿ＮＯ２＿【Ａ００】を元に作成

井原さん修正。４／１０打合せ内容反映
ＤＣＴＩＧ低電流のＨＯＴ電流値を変更。4A～19A のホット電流を３０Ａ(標準)とする。
ＥＰスタート時、ホット電流値が１００Ａを超えないようにする。

　Ｖｅｒ　Ａ０１


・２００９＿０４＿１１＿ＢＰ４＿Ｓ＿ＩＨ
　２００９＿０４＿１０＿ＢＰ４＿Ｓ＿ＩＨ＿【Ａ０１】を元に作成
　①冶具端子のパルス出力を修正
　②溶接ナビを修正
　Ｖｅｒ　Ａ０２


・２００９＿０４＿１１＿ＢＰ４＿ＦＩＸ＿０００
　２００９＿０４＿１１＿ＢＰ４＿Ｓ＿ＩＨを元に作成
　①パルス溶接時の平均値の取り方を修正
　②ＭＩＸのスタートバラつきの修正
　③溶接前にパルスのスイッチをＤＳＰに送るように変更
　④直流手溶接時、電検がない間は出力値を０表示するように変更
　⑤ＰＬＳ＿ＯＵＴをＩＤＬＩＮＧ中はＯＦＦにするように変更。
　⑥ バーンバックシーケンスに移る前は必ずgtt_Ctrl_flag.Burn_back  = OFFするように変更。
                              gtt_Ctrl_flag.Burn_back  = OFF; //2009.04.11
                              puc_Sequence_mode = BURN_BACK;
　⑦バーンバック処理時に保険で下記を入れることにした。
     ptt_Ctrl_word.Inverter_ctrl_code = OFF;             //インバータ起動 2009.02.27 del 2009.04.11 復活
　⑧ＤＳＰを更新。
　　Ｖｅｒ　０００
　　一応ＦＩＸ

・２００９＿０４＿１３＿ＢＰ４＿ＦＩＸ＿０００
　２００９＿０４＿１１＿ＢＰ４＿ＦＩＸ＿０００を元に作成
　①上記②修正時、ﾊﾟﾙｽのＭ３２制御、ＤＳＰ制御に関しても０または１を送るようにしたが、送っていたのがＨＦ＿ＣＴＲＬなので
　　５．１ＨＺ以上でクレータ溶接を行うと初期からﾊﾟﾙｽが出てしまう不具合発生。
　　クレータ有り、なし、ＤＳＰ、Ｍ３２にかかわらず０で初期化するように変更。
　②溶接期間が極めて短い場合、０Ａ表示を０Ａ点滅表示を行ってしまうので、０Ａの時は表示保持を０にするように変更
　③サービスマンメニューの単位を変更（永野さんより指摘）
　④サービスマンメニューの交流ＨＯＴに関連する初期値の変更（田中さん要請）
　⑤ＤＳＰ変更。CTｵﾌｾｯﾄ自動調整量ﾘﾐｯﾀ幅変更（±1.8A → ±11.52A）

　　2009/4/13 ロード車用キバン３枚作成し送付済

　　Ｖｅｒ　０００


・２００９＿０４＿１４＿ＢＰ４＿ＦＩＸ＿０００
　２００９＿０４＿１３＿ＢＰ４＿ＦＩＸ＿０００を元に作成

　①製造検査対応
//(2009.04.11)BP_CTOFFSET_1+++++
　サービスマンメニューのCTオフセット調整が効果あるようにする。
　製造検査にて最低電流が確保できなかったときのための対策用
　②ＤＳＰ変更。CTｵﾌｾｯﾄ調整自動調整の平均幅変更
　連続ｽﾀｰﾄの際、調整量を更新しないようにする。
　　　現行 12.8ms　→　204.8ms
　③ＤＳＷ２を用いて、CTｵﾌｾｯﾄ調整、ゲイン調整可能とする。
　　■CTオフセット調整　１ポイントＸ０．２Ａを加算
　　DSW2-1　CTｵﾌｾｯﾄ調整　オン＝１ポイント調整
　　DSW2-2　CTｵﾌｾｯﾄ調整　オン＝２ポイント調整
　　DSW2-3　CTｵﾌｾｯﾄ調整　オン＝４ポイント調整
　　DSW2-4　CTｵﾌｾｯﾄ調整　オン＝マイナス調整（オフでプラス調整）

　　■CTゲイン調整　１ポイントＸ５をゲインセンター値に加算
　　DSW2-5　CTｹﾞｲﾝ調整　オン＝１ポイント調整
　　DSW2-6　CTｹﾞｲﾝ調整　オン＝２ポイント調整
　　DSW2-7　CTｹﾞｲﾝ調整　オン＝４ポイント調整
　　DSW2-8　CTｹﾞｲﾝ調整　オン＝マイナス調整（オフでプラス調整）

　④CTゲインの調整方向を±逆にする。
　　ゲイン調整＋　→　出力値大　となるようにする。
　　ゲイン調整－　→　出力値小　となるようにする。

　⑤サービスマンメニュー、ゲイン調整幅±１００に変更

　課題１
　　上記①修正の際に、パルス有スタート時、パルス有無にかかわらず、０で初期化される。
　　そのため、１発目のパルス幅がばらつく。また仕様上パルス初期値も不定となる。
　　クレータ無しＤＳＰパルス有のスタートの際、パルス有りの送信が必要。
　　現時点で、他シーケンスの確認の時間がなく、リスクが高いため実装しない。
　　後日実装し、シーケンスの確認（不要なパルスが出力されないか？）する。

　課題２
　　実効値表示算出(I_V_READ)にオフセット、ゲイン調整の補正分が反映されていない。
　　元々、実効値は厳密に合わないので、リスクを見て今回対応しない。後日対応とする。


　　Ｖｅｒ　０００

・２００９＿０４＿２０＿ＢＰ４＿ＦＩＸ＿００１
　２００９＿０４＿１４＿ＢＰ４＿ＦＩＸ＿０００を元に作成
　①ＤＳＷ１５がＲ８通信異常のキャンセルに使われていたので、解除
　②ＤＳＷ６のオールリセット機能を削除
　③ＤＳＷ読み値範囲の修正
　
　　Ｖｅｒ００１
　

・２００９＿０５＿１４＿ＢＰ４＿ＦＩＸ＿００２
  ２００９＿０４＿２０＿ＢＰ４＿ＦＩＸ＿００１を元に作成
　①アフターフロー、プリフローのナビの値が、表示用変数のみに反映され、実カウント変数には反映されていなかった。
　　不具合状況：
　　通常の状態でアフタフローを例えば、３秒にする。
　　その後ナビによってデータを呼び出す。（ナビのアフターフローは全て１０秒）
　　その後アフターフローの時間をチェックするすると表示は１０秒になっている。
　　しかし実際のアフターフロー時間は３秒のまま。
　　（一旦電源をＯＦＦするまたは、ＪＯＧの操作により少しでもアフターフロー時間を変更すると１０秒が反映される）
　　不具合の原因：
　　アフターフロー、プリフロー時間は、表示用の変数と実カウントの変数にわけており、反映時は両方の変数に反映する必要
　　があるが、表示用変数のみに反映していた。
　　一旦電源をＯＦＦしたり、ＪＯＧをさわると、両方の変数に値が反映されるので、正常に動作するようになる。
　　修正：
　　元もと変数を２つに分けていたのは、ＡＺ，ＧＺではこの２つの変数は詳細メニューにあるからであり、それをそのまま使用
　　したため、ＢＰ４ではその必要がないので、表示用変数をそのまま、カウント変数に使用するように変更。

　　Ｖｅｒ００２


・２００９＿０５＿２０＿ＢＰ４＿ＦＩＸ＿００３　　※田中設計変更
　２００９＿０５＿１４＿ＢＰ４＿ＦＩＸ＿００２を元に作成
　①交流スタートアーク切れの際のリスタートを早くする。ＤＳＰのみ変更
　（現状）
　　スタート中に、アーク切れ（電流検出オフ）が発生しても、DSPからのｽﾀｰﾄ完了割込みを受信するまで、
　　リスタート処理に入らない。
　（改善）
　　ＤＳＰ処理にて、スタート処理中にアーク切れが発生した場合に、強制的にｽﾀｰﾄ完了割込みを送信する。
　　これで、32Rはメインシーケンスに移行し、電検オフを受信後すぐにリスタート処理を実施できる。
　（懸案）
　　抜本的には、ｱｰｸｽﾀｰﾄ完了割込み受信前でも、電流検出オフを受信したら、リスタート処理を
　　実施するようにできればよい。
　②交流スタート中のクリーニング幅を５０％→３０％とする。BP2同等とする。ＤＳＰのみ変更。

　　Ｖｅｒ００３

　（懸案）ホット時間２初期値20ms変更無し。次回時40ms（BP2相当）を検討する。
　　　　　スタート感応性変わるため、今回は見送り。


・２００９＿０６＿１１＿ＢＰ４＿ＦＩＸ＿００４
　２００９＿０６＿１１＿ＢＰ４＿ＦＩＸ＿００３を元に作成
　①メモリ記憶不具合
　　メモリは５０ｃｈ再生、記憶できるが、ｃｈ名入力部（詳細メニュー）が１６ｃｈまでしか対応していなかった。
　　（メモリ初期化部のアトリビュートのＭＡＸが１６になっていたのが原因→５０に変更）

　　Ｖｅｒ００４


・２００９＿０７＿１０＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０６＿１１＿ＢＰ４＿ＦＩＸ＿００４を元に作成
・ＹＣ－３００ＢＰ４ロボット通信対応（０９年０７月１０日より開始）
　７月１０日
　①Ｖｅｒ表示変更
　②機種コード　０ｘ５３に変更。
  ③ロボット通信コマンド０ｘ８Ａ、０ｘ８Ｂ分の受信部作成。（GD2Rcv4.c、L2_rob_pc_re_rcv_class.c、com.h、custom.h）

・２００９＿０７＿１３＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿１０＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①コントローラ未接続確認フラグの追加
　②６Ｂコマンドの追加（ロボット通信）
　　ＥＰ／ＥＮスタート切り替えの追加（ロボット通信）
　　電極短絡有／無追加（ロボット通信）
　　アーク切れリカバリー追加（ロボット通信）
　　高周波出力有／無追加（ロボット通信）
　　パルス有／無
　③６Ｃコマンドの追加（ロボット通信）
　　溶接法、パルス有／無追加（ロボット通信）
　④６９コマンド追加（ロボット通信）
　　溶接電流指令反映
　　パルスピーク電流反映
　　パルス周波数反映
　　パルス幅反映
　⑤０ｘ８Ａ、０ｘ８Ｂコマンド関連
　　ホット電流調整反映
　　ホット時間調整反映
　　ホットスロープ調整反映
　⑥０ｘ６９コマンド関連
　　パルス周波数反映（実態に反映）
　　パルス幅反映（実態に反映）


・２００９＿０７＿１４＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿１３＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①クリーニング幅、交流周波数、ＭＩＸ周波数、ＭＩＸ直流比率の反映
　②０ｘ６９コマンドのデータ書き換えフラグ宣言追加
　③スティック機能を使って、電極短絡チェックとした。（ＤＳＰ側田中さん）
　④ロボット接続時の前パネル表示の作成
　⑤バージョンをcustom.hに統一（うまくいったらＡＺ４、ＧＺ４にも反映）
　⑥ＡＺ４、ＧＺ４に施した、ロボット通信時のエラー発生処理を追加。（Ｅ８１がでる問題を解決）


・２００９＿０７＿１４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２
　２００９＿０７＿１４＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①ロボット通信開始時、前パネルにロボット接続を意味する表示を行うが、ＢＰ４は通信予約方式を
　　使っているので、表示ができない不具合があった→ロボット接続を意味する表示を行う時は通信予約
　　方式ではなく、ＡＺ４、ＧＺ４と同じ方式にするように変更


・２００９＿０７＿１５＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿１４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２を元に作成
  ① gtt_Internal_pack.Data.In.ucMixFreq       = ComuniPack.Data.To.ucMixFreq;
     gtt_Internal_pack.Data.In.ucMixAcRatio    = (char)ComuniPack.Data.To.ucMixAcRatio * 5;
　　に変更
　② ucImprudenceVolt; // 電極短絡電圧指令値  uchar->shortに変更
　③ＷＳＥＴ＿ＰＲＭ１とＷＳＥＴ＿ＰＲＭ２命令共に０番の入力ができてしまうので、０番が送られてきた処理しないように変更。
　　（０番は存在しないので、メモリを壊してしまうため　ＡＺ４，ＧＺ４にも対応すること）


・２００９＿０７＿１７＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿１５＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①ロボット接続時、溶接条件が変更されたら、ＩＤパラメータをリフレッシュする。
　　ロボット命令例：
　　　ＢＢＫＰＵＬＳＥ　=＋１０
　　　ＷＰＬＳ　＝　ＯＮ
　　とすると、溶接条件が変更されるので、ＢＢＫＰＬＳＥが無効になってしまう。
　②ロボット接続時はプリフロー、アフターフロー時間を強制的に５０ｍｓになるように変更
　　（ガスのＯＮ、ＯＦＦはロボット命令に従わせるため）


・２００９＿０７＿２４＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿１７＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①交流モードに切り替わらない不具合を修正（ロボット通信を行った場合ＤＣ＿ＭＯＤＥが１になる場合があった）
　　ＢＰ４の場合全モードでＤＣ＿ＭＯＤＥは２であればよいので、強制的にＤＣ＿ＭＯＤＥが２になるように変更
　②ＨＯＴ関連の処理の不具合を修正
　③溶接中に電極短絡を起こすと、再度トーチスイッチが入らなくなる不具合修正（ロボットモード時、一定時間トーチスイッチを受け取らない
　　処理があったためデッドロックを起こしていた）→ＧＺ４、ＡＺ４も修正すること。


・２００９＿０７＿２４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２
  ２００９＿０７＿２４＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①ステッィクチェック不具合修正（ロボット通信のセットビットが電極短絡異常になっていたので”スティックタイムアウト”となっていた）


・２００９＿０７＿２４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ３
　２００９＿０７＿２４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２を元に作成
　①ＤＳＰ変更　、交流シフト、ハードモードのスタート中のクリーニング幅を５０％→３０％とする。（標準は対応済）
　②スティックチェック修正（ロボット通信　Ｃ４コマンドをＤ２に変更）
　③ＭＩＸ、パルス周波数をＤＳＰ側４．１Ｈｚ以上に変更
　④ＭＩＸ、パルス周波数の時間計算を変更
　⑤電極短絡異常のロボット通信時の比較電圧変数を変更（２００９＿０７＿２４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２より対応）


・２００９＿０７＿２４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ４
　２００９＿０７＿２４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ３を元に作成
　①ＤＳＰパルスの時はＶ６８に溶接前から１を書くように変更


・２００９＿０７＿２７＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿２４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ４を元に作成
　①エラー発生時、アフターフローを発生するように変更（未試験）
　②ロボット溶接時、溶接条件（ＤＣ、ＡＣ、ＭＩＸ）はＩＤＬＩＮＧ中のみ変更できるようにした。
　③交流溶接時のpf_Hot_t1の最低値を０ｘ００Ａ０に変更


・２００９＿０７＿２８＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿２７＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　（２００９＿０７＿２７＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２が存在したが、うまく動作しなかったので、破棄する）
　①溶接電流、電圧測定値をロボット、ハンドと同じにした。
　　ただし、ｒｏｂ＿ｓｎｄ＿ｃｌａｓｓにプログラムを入れるとうまく動作しないので、L2_rob_pc_re_rcv_class.cにプログラムを入れた。


・２００９＿０７＿２８＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２
　２００９＿０７＿２８＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①ロボット通信で、個別、一括の受信部（L2_rob_pc_re_rcv_class.c）の係数HOTCURを削除


・２００９＿０７＿２９＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿２８＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２を元に作成
　①２００９＿０７＿２８＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２と同じ。
　　ロボット接続試験（ＥＰスタートを除く）終了
　

・２００９＿０７＿２９＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２
　２００９＿０７＿２９＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①記憶モードの”ｒＥＣ　ｎｏ（ｏｒ　ＹＥＳ　ｏｒ　ｄＥＬ）”の表示状態で、モードボタンを押し、記憶モードが一旦抜け、
　　再び再生モードに入った場合、”ｒＥＣ　ｎｏ（ｏｒ　ＹＥＳ　ｏｒ　ｄＥＬ）”の表示になってしまう不具合修正。

・２００９＿０７＿２９＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ３
　２００９＿０７＿２９＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２を元に作成
　①ＤＳＰ変更。EPｽﾀｰﾄ時にスタート中アーク切れ発生した場合にEN側に転流できない不具合の修正。（田中）
　

・２００９＿０７＿３０＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿２９＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ３を元に作成
　①パラメータの制限をつけた（一部）
　　・パルス周波数
　　・パルス幅
　　・交流周波数
　　・クリーニング
　　・ＭＩＸ周波数
　　・ＭＩＸ比率
　②パルス周波数０Ｈｚでパルスなしになるように変更

・２００９＿０７＿３１＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿３０＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①ＤＳＰ変更（田中さん）
　②可変反復クレータ部シーケンス検討
　③アナログリモコン接続時、ＪＯＧによる変更（例：交流周波数等）を記憶しないにしていたが、記憶できるように変更。


・２００９＿０８＿０３＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０７＿３１＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①可変反復の不具合修正。
　　シーケンス番号クレータ時、ＴＳをゆっくりＯＮ－ＯＦＦを繰り返すと、稀に電流上昇に転じていた。

・２００９＿０８＿２１＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０８＿０３＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①ＤＳＰ変更　ロボット対応時に判明した不具合の修正。（半自動でも発生する）
　　・ｽﾀｰﾄ時ｱｰｸ切れ発生した場合の、ｽﾀｰﾄ完了割込み送信ﾀｲﾐﾝｸﾞの変更。EP→EN転流前は判定・送信しない。
　　・ｽﾀｰﾄSLP中にｱｰｸ切れ発生しても、SLP処理を無効としない。復帰時に必要なHOT電流を得る。
　　・EPｽﾀｰﾄ時、HOTTM=0 の場合のarc3stt_idiの初期値を設定。
　　・電流検出CNT用ｶｳﾝﾀをﾘｾｯﾄを追加。実害はなかった。
　　・初期短絡発生時（割り込み送信時）に同時に送信しているﾊｰﾄﾞ電検の送信を無効とする。通常検出部で送信。（2重になっていた）
　　・2次主回路異常割込みを送信しない。（GZでのｴﾗｰ、BPでは不要）
　　・ｽﾀｰﾄ完了割込み(9D)の誤送信修正。ｽﾀｰﾄ時ｱｰｸ切れが発生するﾀｲﾐﾝｸﾞにより、
　　　大量に割込みが送信される場合があった。1回のみ送信するように変更。
　　・ACSOFT、ACHARDのｽﾀｰﾄ時、HIPと指令との換算があわないため、HOTが正しく出力されない。
　　　修正。HOTの出力が現行製品とかわるため、CSの了承が必要。（田畑さん確認済）
　　　この修正により、IHOT命令がただしく機能する。
　　・EPｽﾀｰﾄ、ACｽﾀｰﾄ時の初期転流実施の前後に、一定電流区間を設ける。ｱｰｸ切れ対策。
　　　V1.00 では、ﾃﾞｰﾀ=0 とし、機能無効としておく。
　　・H39(ｽﾀｰﾄSLP傾度)を8倍した値を用いる。現行 指令更新/12.5us → 指令更新/100us に変更。
　　　ｽﾀｰﾄSLPのばらつきを修正。
　　・DCｽﾀｰﾄ時、HOT<20Aとなった際に、2段SLP開始点をHIPの値とする。

　②H39の値を8倍して送信する。桁落ち注意。ifsub_task 修正。（田中修正、井原さん確認OK）
　③交流溶接時のpf_Hot_t1の最低値を０ｘ００Ａ０→１に変更


・２００９＿０８＿２６＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０８＿２１＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①パルス有り時にスタート条件（HOT電流）をＩＰ指令を元に作成する。（田中要請）
　　　・パ無　初期無→ベース指令よりHOT条件を作成　（従来どおり）
　　　・パ有　初期無→ピーク指令よりHOT条件を作成
　　　・パ無　初期有→初期電流指令よりHOT条件を作成（従来どおり）
　　　・パ有　初期有→初期電流指令よりHOT条件を作成（従来どおり）


・２００９＿０８＿２７＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０８＿２６＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①初期有、パルス有時、初期電流≒本電流（IB）≒クレータ電流となると、
　　アップスロープ、ダウンスロープ中のパルス出力が不安定となる不具合の修正。
　　　（出力されない、出力が欠ける、スロープがでない 等）

　②クレータ中にアーク切れし、リスタートした際は、クレータに戻る。
　　本来製品仕様だったはずだが、なぜか抜けていた。
　　　初期中　　　→初期 に戻る
　　　アップSLP中 →初期 に戻る
　　　本溶接中　　→アークオフ（リスタート無）
　　　ダウンSLP中 →初期 に戻る
　　　クレータ中　→クレータ に戻る


・２００９＿０８＿２８＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０８＿２７＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①初期有り時のアップスロープ、ダウンスロープ波形の不具合修正
　　　アップSLP中、本電流到達前に、ＴＳオフしダウンSLPに移行すると、
　　　ダウンSLP波形が不正になる。

　　　初期有クレータ反復中、本電流＜クレータ にて、反復中に、
　　　クレータ→本電流到達（アップSLP）前に、ダウンSLPへ移行すると、
　　　SLP波形が不定になる。


　　Ｖｅｒ１００



・２００９＿０９＿２９＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０８＿２８＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①水回路異常時Ｅ１０を表示する。
　　本来回路上で２番に水回路異常が入力されるべきだが、１番に入力されている。
　　これを受け、プログラムをＥ１０が水回路異常になるように変更してしまった。（開発時）
　　ところが、取り扱い説明書を確認するとやはり、入力はＥ１１であるため、問題となった。
　　今更ハードを変更することはできないので、１番の入力が水回路異常（Ｅ１１）になるように
　　プログラムを変更する。

　　Ｖｅｒ１０１ （取り消し）

・２００９＿０９＿３０＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０９＿２９＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①ロボット通信時の不具合を修正。
　　現状のロボット通信はＥｎｎのエラーが発生しても回線を閉じない仕様としている。
　　回線を閉じない理由はエラー発生時、ロボットがキャンセルキーを押しても、エラー内容
　　が消えないようにするため。
　　この仕様をそのまま通信異常（例えば通信タイムアウト）に適用すると、問い合わせに対し
　　ＡＣＫを送り返すが、エラー内容は返さないので（通信異常はロボットに送り返すエラーコード
　　がない）ロボットには通信異常やそれに代わるエラー表示がされないので、ロボットＴＰを見る
　　限り通信異常が発生したように思えない。また溶接機も前パネルに表示がされないので、通信
　　異常が発生しているように思えない。（但し、基板上の７ｓｅｇＬＥＤには表示）
　　対処：
　　　通信異常関連のエラーは全てＥＲＲ　ＬＥＶＥＬ３なので、L1_sequence_stop_manager.c内に、
　　　これら通信異常関連のエラーが発生した場合だけ回線を切断するように変更。

　　Ｖｅｒ１０１（取り消し）

・２００９＿１０＿０１＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿０９＿３０＿ＢＰ４＿ＲＯＢＣＯＭ
　①ロボット通信時のリトライ間隔を１００ｍＳ→１０００ｍＳに変更（ＢＰ２と同じ）

　　Ｖｅｒ１０１


・２００９＿１２＿０８＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿１０＿０１＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①ＲＴＣのＩ２Ｃのクロックを４５０ｋＨｚから３１２ｋＨｚに変更
　②プリフローがでない不具合を修正
　　発生手順：
　　１）プリフロー時間中にＴＳを離す。（アフターフローに移動）
　　２）アフタフロー期間が終了するのを待つ。
　　３）再度ＴＳを押す。
　　　　ここでプリフローを再開すべきだが、プリフロー時間を飛ばして、ＨＦ期間に移動する。
　　プリフローがないのでビードが黒く変色する。
　　原因：
　　　１）の手順で、gtt_Ctrl_flag.Pre_flow_time = OFF;を実行していなかったので、
　　　再度ＴＳを押されると、プリフロー時間は終わっているにも関わらず、プリフロー時間が再セットできない
　　　のですぐにプリフローが終了してしまう。
 ③スティック＆リリースを削除（一応）

　　Ｖｅｒ１．０２＜＝ボツ


・２００９＿１２＿０９＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿１２＿０８＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①上記プリフロー不具合で、プリフロー→アイドリングに戻るように変更。

・２００９＿１２＿０９＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２
　２００９＿１２＿０９＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　再コンパイル
　Ｖｅｒ１．０２


・２００９＿１２＿１４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２
　２００９＿１２＿１４＿ＢＰ４＿ＲＯＢＣＯＭを元に作成（これのコメントなし）
　（２００９＿１２＿０９＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２から２００９＿１２＿１４＿ＢＰ４＿ＲＯＢＣＯＭを作成）
　①Ｅｒｒ００７（レベル２エラー）発生後ガスが停止しない不具合修正
　②高周波期間中レベル２の異常が発生した場合ガスが停止しない不具合修正
　③Ｅｒｒ００６（レベル２エラー）発生後ガスが停止しない不具合修正
　④レベル２エラー発生時、ＨＦ＿ＯＵＴ　＝　ＯＮにしている不具合修正。（移植ミス）
　　（エラー発生時は出力がでないので実害なし）
　①②③の不具合が発生した原因：
　　Ｖｅｒ１．００から採用したエラーが発生した場合アフターフロー時間後、ガスを停止する仕様で、
　　ガス停止カウントをｅｒｒ＿ｐｒｏｃｅｓｓで行っていたが、エラー発生後ｅｒｒ＿ｐｒｏｃｅｓｓには
　　一度しかいかないように変更されていたので、カウントができずガスが停止しない不具合が発生した。
　　なお、レベル３エラーはｓｅｑｕｅｎｃｅ＿ｓｔｏｐ＿ｃｌａｓｓでガス停止カウントを行っているので
　　問題なく停止。
　確認事項：
　　プリフロー、ＨＦ、初期、ＵＰスロープ、ＭＡＩＮ、ＤＯＷＮスロープ、クレータ中にレベル１エラーを発生させたが
　　ガス、出力ともに問題なく停止。

　現ＶｅｒＦ０１にした。


・２００９＿１２＿１５＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿１２＿１４＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２を元に作成
　①Ｖｅｒ１．０２において見つかった不具合
　　１）エラーレベル２発生でガスが止まらないシーケンス
　　　　・プリフロー、ＨＦ中、ダウンスロープ中、アフターフロー中
　　２）手棒時不具合
　　　　・出力中水回路異常が発生しても、出力し続ける。⇒但し一旦アークが切れると出力停止。
　　　　・エラーレベル２、３発生では即出力停止。（これはＯＫ）
　　　　・エラーレベル２が復旧しても出力が再びでるようにならない
　②ＶｅｒＦ０１において見つかった不具合
　　水回路異常、エラーレベル２の発生によってアフターフロー経過後出力、ガスが停止するようになったが、
　　２つの不具合が見つかった。
　　１）ＨＦ、ダウンスロープ、クレータ（クレータなし時はメインも含む）で水回路異常が発生した場合
　　　　ＴＳ　ＯＦＦ状態にも関わらず、エラー復帰後一瞬ガスバルブが動作する。
　　　　原因：水回路異常が発生するとトーチＳＷの入力をキャンセルするが、この時バッファに残った値が残った
　　　　　　　ままだったので、トーチＳＷの入力が再開されるとバッファに残った値が有効となり、ＴＳ　ＯＮされる
　　　　　　　但し、もともとＴＳはＯＦＦされているので、即ＴＳ　ＯＦＦとなる。
　　　　　　　このため一瞬プリフロー期間に入りガスバルブが動作する。
　　２）アップスロープでエラーレベル２が発生した場合
　　　　アフターフロー設定が５秒にも関わらず、数秒間アークがとまらずその後８秒程度ガスが出る。
　　　　原因：アップスロープでエラーレベル２の処理が行われていなかったので、アップスロープ時間が終了するまで
　　　　　　　アークが止まらない。その後メインに入るとエラー検出できるので停止動作に入った。
　修正：
　　①について
　　　１）エラーレベル２発生でガスが止まらないシーケンス全てに停止動作を実行しアフターフロー後ガスが止まるように変更
　　　２）手棒時、水回路異常、エラーレベル２が発生した場合、出力を即停止し、復帰時は手棒スタートシーケンス
　　　　　（手棒切り替えから５秒後に出力する）を実行し、再スタートができるように変更
　　②について
　　　１）トーチＳＷのバッファ部だけトーチＳＷキャンセル時も読み込みを行い、ＴＳの状態がエラー復帰後即反映できるように
　　　　　変更（この項目についてはＧＺ、ＡＺも反映させる必要があるかもしれない）
　　　２）①－１）の手当てにより解決した。

　　現ＶｅｒＦ０２にした。

　　
　　　　　　
・２００９＿１２＿１６＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿１２＿１５＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①温度異常発生時の即ガス停止にするように変更
　②各シーケンスのエラー検出部をもっとも後ろ側にし、エラー検出部が決定した次のシーケンスに他の処理が影響しないようにした。
　　L2_mag_sequence_dicision_class.c内
  ③エラー２，３が発生した場合、電流検出をＯＦＦするように変更。

  現ＶｅｒＦ０３

・２００９＿１２＿１７＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿１２＿１６＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①温度異常発生時、負荷が大きくなるのを避けるためＲＴＣのｒｅａｄを３００ｍｓに一回に変更。

　現ＶｅｒＦ０４


・２００９＿１２＿１７＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２
　２００９＿１２＿１７＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①ダウンスロープ時アーク切れするとクレータに戻るように変更。

　現ＶｅｒＦ０５


・２００９＿１２＿１８＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿１２＿１７＿ＢＰ４＿ＲＯＢＣＯＭ＿ＮＯ２を元に作成
　①エラー１，２発生時ＴＳ　ＯＮ状態を保持し、ＴＳ　ＯＮ保持状態で、エラー１，２が解除されると
　　プリフローシーケンスがスタートしてしまう。
　　⇒ＴＳ　ＯＮ状態でエラー復帰するとＥｒｒ００７を表示し、一旦ＴＳ　ＯＦＦしなければ再度ＴＳ　ＯＮ
　　　できない仕様に変更。

　現ＶｅｒＦ０６


・２００９＿１２＿２１＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿１２＿１８＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①電極短絡検出を”有り”にし電極短絡を検出した場合、ガスが停止しない不具合修正

　現ＶｅｒＦ０７


・２００９＿１２＿２５＿ＢＰ４＿ＲＯＢＣＯＭ
　２００９＿１２＿２１＿ＢＰ４＿ＲＯＢＣＯＭを元に作成
　①アナログリモコン使用時の不具合修正
　　・溶接中にクレータ無し、クレータ、クレータ反復が切り替わらないように変更
　　・溶接中にパルス有／無が切り替わらないように変更。
　　・溶接中に再生モードを選択できないように変更
　　・ｃｈが確定していない状況ではＴＳ　ＯＮしない仕様に不具合があり、溶接中もＴＳを強制ＯＦＦしていた
　　　ので、クレータ溶接時本溶接から抜けられない不具合修正。－＞ＩＤＬＩＮＧ時のみＴＳを強制ＯＦＦするように変更。
　②溶接モードの切り替えの問題。
　　手棒溶接にいった直後に他の溶接モードに切り替えた場合（５秒以内）、一旦アフターフローに入ってしまい、アフターフロー
　　期間中に例えば直流溶接を開始するとプリフローが省略されてしまう。
　　→手棒溶接から他の溶接モードに移行したら、ＢＵＲＮ＿ＢＡＣＫ→ＩＤＬＩＮＧ２に移行するようせに変更。

現ＶｅｒＦ０８
　　
　
・２００９＿１２＿２８＿５００ＢＰ４
　２００９＿１２＿２５＿ＢＰ４＿ＲＯＢＣＯＭを元に開発
　気づきのＮＯ２，６，７，８，１０網羅済み
  ①ＣＰＳ、Ｖｅｒ番号変更
　②ロボット機種コード変更
　③３００～５００Ａ設定時のＨＯＴ電流値を追加
　④＜custom.h＞
　　　　MAX_CURRENT変更に伴い、変数領域を確保する必要がある。
        unsigned char  Okcv[260];      //2009.12.28 500BP4
        unsigned char  Okcv_real[260]; //2009.12.28 500BP4
        char  Okcv_real_p[260];        //2009.12.28 500BP4
        char  Okcv_real_m[260];        //2009.12.28 500BP4
        char  Okcv_real_0[260];        //2009.12.28 500BP4
        char  Okcv_crater_short[260];  //2009.12.28 500BP4
        unsigned short Sb0[1040];      //2009.12.28 500BP4
　⑤ＶｅｒＦ０９変更分を追加

・２００９＿１２＿２９＿５００ＢＰ４
　２００９＿１２＿２８＿５００ＢＰ４を元に作成
　①出力の最大値、最小値を追加
　②ac_frequency_limit()関数によって周波数制限がかかるように変更。（ac_frequency_limit()は未作成）

・２０１０＿０１＿０７＿５００ＢＰ４
　２００９＿１２＿２９＿５００ＢＰ４を元に作成
　①ガスチェック時エラーレベル１，２が発生した場合、ガスチェックをキャンセルするように変更。
　　（但し、ハンド時のみ。ロボットでは必要なし）
　②ac_frequency_limit_member()関数を作成

・２０１０＿０１＿０７＿５００ＢＰ４＿ＮＯ２
　２０１０＿０１＿０７＿５００ＢＰ４を元に作成
　①START1 = ON; 削除　（ＢＰ４には必要ないため）
　②５００ＢＰ４用ナビテーブルの作成開始　（現状ＮＯ１～ＮＯ１８）

・２０１０＿０１＿０８＿５００ＢＰ４
　２０１０＿０１＿０７＿５００ＢＰ４＿ＮＯ２を元に作成
　①５００ＢＰ４用ナビテーブル完了（但し、枠だけ作成）
　②エキスパートモードマスク時間入力部完成
　③電流制限入力部完成
　
・２０１０＿０１＿１２＿５００ＢＰ４
　２０１０＿０１＿０８＿５００ＢＰ４を元に作成
　①エキスパートモードマスク時間入力値反映（未実験）
　②電流制限入力反映（注：ナビモードには現在制限かかっていない）
　③田中さん要請分追加
　　・Ｈ２５６データをｗｅｌｄｔｂｌ読みとする。
　　・Ｖ７２、Ｖ７３をＣｏｎｖｅｒＴ化する。

・２０１０＿０１＿１２＿５００ＢＰ４＿ＮＯ２
　２０１０＿０１＿１２＿５００ＢＰ４を元に作成
　①リモコンでも電流制限がかかるように変更。
　②再生での電流制限がかかるように変更。（但し、リモコンでの再生は未確認）

・２０１０＿０１＿１８＿５００ＢＰ４
　２０１０＿０１＿１２＿５００ＢＰ４＿ＮＯ２を元に作成
　①ＦＡＮモータ制御を変更するためポートを変更（田中さん指示で変更）
　②交流周波数が上手く変更されない不具合を修正。
　　例：３００Ａ　４００Ｈｚの設定　－＞　３００Ａ　４００Ｈｚ出力
　　　　　　　　　　　　　　　　↓
　　　　５００Ａ　４００Ｈｚに設定変更　－＞　５００Ａ　２００Ｈｚ出力
　　　　　　　　　　　　　　　　↓
　　　　電流を３００Ａに変更　－＞　一回目の溶接で　３００Ａ　２００Ｈｚ出力　－＞二回目の溶接で　３００Ａ　４００Ｈｚが出力
　③送給量データを計算する際、最大電流が制限値によって変化するのはまずいので、500A固定のMAX_CURRENT_ABSを設けた。
 
  ＶｅｒＦ０１

・２０１０＿０１＿１９＿５００ＢＰ４
　２０１０＿０１＿１８＿５００ＢＰ４を元に作成
　①出力制限不具合修正
　　不具合内容：
　　設定を例えば３００Ａにし、出力制限を掛けると５０Ａになることがある。
　　不具合原因：
　　出力制限は５０Ａ～５００Ａまでなので、制限を掛ける時、一瞬でも最小値まで落ちると、電流指令値がそれによって
　　下げられるので、５０Ａになってしまっていた。
　　詳細メニューでの調整中の値がリアルタイムで、反映されるのが原因
　　修正：
　　リアルタイム反映をやめて、詳細メニューから抜ける時に反映するように変更。
　②プログラム領域の変更。

　ＶｅｒＦ０２

・２０１０＿０１＿２０＿５００ＢＰ４
　２０１０＿０１＿１９＿５００ＢＰ４を元に作成
　①詳細メニューに「マイルドパルス・レベル設定」と「交流周波数表示設定」の項目画面を追加
　②レスキュー・メニューに「ＥＸＴ ＳＷ」の設定項目画面を追加

　バージョンは変更せず。

・２０１０＿０１＿２１＿５００ＢＰ４（２０～２１日開発）
　２０１０＿０１＿２０＿５００ＢＰ４を元に作成
　①交流時のパルス周波数が溶接モードを一周すると５．０Ｈｚになってしまう不具合を修正。
　　（設定が５．０Ｈｚ以下であれば関係ない）
　②３００ＢＰ４において、治具端子パルス出力が４．１～５．０Ｈｚの間出力されていない不具合有り。
　　Ｖ１．００以降パルスのＭ３２とＤＳＰとの切り替えは４．０Ｈｚ（それまでは５．０Ｈｚ）に変更されたが、
　　output_manager.c内の周波数は５．０Ｈｚのままだったため発生。→４．０Ｈｚ以下に修正
　③交流設定のままで再起動すると交流標準の電流最小値が１０Ａになってしまう。
　　→初期化時最低電流設定が１０Ａになっていたのを２０Ａに修正。
　④マイルドパルス可変パラメータへの反映、ナビ使用時はマイルドパルスを無効にする　を追加
　⑤ナビカウンタを１９→２０に変更。
　⑥出力電圧表示制限を追加（５０Ｖ　田畑さん、田中さん打ち合わせ済み）
　⑦リモコン切断時に各設定電流を最低値にする部分の不具合修正
　　溶接モード設定に関わらず全て４Ａに落ちていた。
　　溶接モード毎の最低電流になるように修正すること。
　　ＲＥＭＯＲｃｖ４．ｃ（１７３行目付近）
　⑧再生での電流制限がかかるように変更。（但し、リモコンでの再生は未確認→リモコンで確認）
　⑨ＥＸＴ　ＳＷ（延長モード）の有効、無効をＨ２５８に送信

　　ＶｅｒＦ０３

・２０１０＿０１＿２１＿５００ＢＰ４＿ＮＯ２
　２０１０＿０１＿２１＿５００ＢＰ４を元に作成
　①出力制限によるナビの利用判定を追加（見た目の動作はＯＫだが、コードを再度確認すること）
　②手溶接時は強制的にＨＦ＿ＯＵＴ　＝　ＯＦＦを追加

　　ＶｅｒＦ０４

・２０１０＿０１＿２２＿５００ＢＰ４
　２０１０＿０１＿２１＿５００ＢＰ４＿ＮＯ２を元に変更
　①設定電流が何Ａでも３００ＡのＨＯＴ電流となってしまう。
　　原因：ｗｅｌｄ＿ｃｌａｓｓのHAND_STICKで、gf_Hot_current_level = Current_level * HOTCUR;となっており、HOTCURを掛けて
　　　　　いるのが原因（その他のモードでは４月に消している）

　　ＶｅｒＦ０５



・２０１０＿０１＿２４＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０１＿２２＿５００ＢＰ４を元に変更
　５００Ａ実出力可能に改造。
　①weldtbl E07-F03 よりコピー
　②固定パラメータ変更。E07-F03よりコピー。（Section記述変更済）
　③DSP変更
　④LA1_I_V_READ.c 変更　E07-F03 よりコピー
　　　表示と実測があうように変更。
　　　（１）H256データ=1006　を　990に変更
　　　（２）オフセット調整　－１　を　－０．５　に調整、weldtblと関連あり。注意。
　　　（３）電圧値換算部修正。換算後、0.982421875　倍しているが不要。
　　　上記は電流用の換算で、電圧表示には不要であった。
　　　３００ＢＰ４も同様だが、1.8％程度のずれなので、実害はない。
　⑥calc.c 変更
　　//2010.01.17
　　V20、V71は、ハード波形の際は、5次式にてマッチングをとるようにしているが、
　　標準交流と同様に、2次式（weldtblの値にて動作するようにする。
　　マッチング検討が楽になるように。一旦、weldtblとする。
　　//2010.01.21
　　V76をConvertA化する。
　②if_subtask.c　レスキューSWの読み場所を変更
//2010.01.22    if (gtt_Special_menu.ss_Rescue_data[3] == OFF)
    if (gtt_Special_menu.ss_Rescue_data[4] == OFF)//2010.01.22

　　ＶｅｒＥ０８－Ｆ０５


・２０１０＿０１＿２５＿５００ＢＰ４
　２０１０＿０１＿２４＿５００ＢＰ４＿ＴＡＮを元に作成
　①レスキューメニューの”ＣＨキオクロック”が現在オールクリアでも初期化されないが、
　　初期化（ＣＨキオクロックなし）にされるように変更。（田中さん仕様）

　　ＶｅｒＥ０８－Ｆ０６

・２０１０＿０１＿２９＿５００ＢＰ４
　２０１０＿０１＿２５＿５００ＢＰ４を元に作成
　①EXT SW→ｴﾝﾁｮｳｱｼｽﾄに変更
　②sec→sに変更
　③オートシユウハスウのユを小文字に変更
　④オートシュウハスウ表示時、周波数１００Ｈｚ未満のシュウハスウでは例えば”０７０Ｈｚ”
　　と表示されていたものを”　７０Ｈｚ”と表示されるように変更、
　⑤エキスパートマスク時間の最小値を０．０秒から１．０秒に変更。

　　ＶｅｒＥ０８－Ｆ０７

・２０１０＿０２＿０３＿５００ＢＰ４
　２０１０＿０１＿２９＿５００ＢＰ４を元に作成
　①アナログリモコン”ＢＰＲ４”のみ選択するように変更

　　ＶｅｒＥ０８－Ｆ０８
　（未コンパイル）

・２０１０＿０２＿０４＿５００ＢＰ４
  ２０１０＿０２＿０３＿５００ＢＰ４を元に作成
　①アナログリモコンの不感帯の範囲を上限９００～１０２４　下限０～２０に変更
　②アナログリモコンＡ／Ｄ値→溶接電流の変換式の変更

　ＶｅｒＥ０８－Ｆ０９
　（未コンパイル）


・２０１０＿０２＿０５＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０２＿０４＿５００ＢＰ４を元に作成

　①2010_02_04_500BP4_TINV_【C04-E07】よりコピー
　　ＦＰＧＡ、固定パラ、データ、ＤＳＰ
　②固定パラ、I_V_READ.C、ifsub_task.C　内容確認。コピー済問題なし。
　③calc.c変更 2010.01.26
　　ハード波形を、5次式のマッチングとする。
　④DSP変更。ハード、ソフト波形持ち上げ量化変化
　⑤cal.c変更 2010.02.04
　　V77 をConvertA
　⑥weldtbl変更。V77.

　２／５のＣＳ上野さんオペレーションテスト用。問題なければ、ＤＰＳＮｏを変更し、
　製品審査用とする。

　ＶｅｒＣ０５－Ｆ０９


・２０１０＿０２＿０６＿５００ＢＰ４
　２０１０＿０２＿０５＿５００ＢＰ４＿ＴＡＮを元に作成
　★製品審査用
　①ソフトマッチング調整（簡易）
　②製品審査用にバージョンを変更。
　③ナビデータ更新（井原さん）
　④デッドタイム1.25us確認。固定パラ、ＦＰＧＡ【C02-E07】より上書き。
　⑤ＤＳＰ確認。NEWCO2_20100204よりコピー。

　　本プログラムに改造を加える場合は、必ず、バージョンを開発バージョンに戻し、
　　製品審査用と混在しないようにすること。


　Ｖｅｒ０５２－１００



・２０１０＿０２＿１０＿５００ＢＰ４
　２０１０＿０２＿０６＿５００ＢＰ４を元に作成
　①エキスパートモードの溶接電流指令値変化量を１０％→２０％に変更

　ＶｅｒＣ０５－Ｆ１０


・２０１０＿０２＿１０＿５００ＢＰ４＿ＮＯ２
　２０１０＿０２＿１０＿５００ＢＰ４を元に作成
　①実効値、平均値表示のバッファのクリアを追加→前回のデータがバッファに残り、溶接開始時表示値が大きめに
　　表示されていた。
　　・測定値表示をプリフローからに変更。


　ＶｅｒＣ０５－Ｆ１１


・２０１０＿０２＿１０＿５００ＢＰ４＿ＮＯ３
　２０１０＿０２＿１０＿５００ＢＰ４＿ＮＯ２を元に作成
　①レスキューメニューの”エンシチョウアシスト”の表示をスペースにした。
　②手棒時のアークドライブ最大電流が２５０Ａ（３００Ａ機）のままになっていた→手棒の最大値に変更


　ＶｅｒＣ０５－Ｆ１２


・２０１０＿０２＿１８＿５００ＢＰ４
  ２０１０＿０２＿１０＿５００ＢＰ４＿ＮＯ３を元に作成
　①ホット電流の制限を１００Ａから３００Ａに変更（田中さん依頼分）
　②自己保持中は電流検出ＯＦＦまでの時間を１００ｍｓにするように変更。（アップスロープ、メイン期間変更）（田中さん依頼分）
　③デンリュウヒョウジナイヨウのデフォルトを”ジッコウチ”に変更。（田中さん依頼分）
　④　③に伴い、パルス時ＴＳの反応が鈍い件の修正を実施（型変換を行うように変更）→効果がないかもしれない。

　ＶｅｒＣ０５－Ｆ１３

・２０１０＿０２＿１９＿５００ＢＰ４
  ２０１０＿０２＿１８＿５００ＢＰ４を元に作成
　①溶接電流指令値のテーブルを持ち、外部（主にＪＯＧ、アナログリモコン）から入力される溶接電流指令値から内部で使用する
　　溶接電流指令値を引く構成とした。（田中さん依頼分）
　　なお、出力制限や交流周波数制限は外部から入力される溶接電流指令値によって実行される。（動作未確認）
　②可変クレータ反復時、クレータ、ダウンスロープ期間中にアーク切れすると、再度アークが復活した時、初期電流がでる不具合があった。
　　→クレータ電流値が出力されるように修正（動作未確認）（３００Ａ機も修正すること）
  ③ＤＳＰＰアドレス変更
  ④電流、電圧計算を実効値で行った場合、手棒溶接で５０Ａの出力しかされない不具合の修正。（３００Ａ機も修正すること）
　　原因：手棒では”アークドライブ機能”があるため、電圧のしきい値の判断をgtt_Fpga.Volt_resultで行っていた。
　　　　　しかし、実効値表示を選択すると、gtt_Fpga.Volt_resultではなくgtt_Fpga.Volt_result_rmsを使用するため、gtt_Fpga.Volt_resultは常に
　　　　　０Ｖとなり、５０Ａの出力制限に引っ掛かってしまう。
　　修正：実効値表示の選択を行った場合はgtt_Fpga.Volt_result_rmsをしきい値判断に用いる。但しgtt_Fpga.Volt_result_rmsは２乗値が入っているので
　　　　　比較する電圧も２乗したものとする。（１５Ｖ：22500　５Ｖ：2500）

　ＶｅｒＣ０５－Ｆ１４


・２０１０＿０２＿２２＿５００ＢＰ４
　２０１０＿０２＿１９＿５００ＢＰ４を元に変更
　①hfix_data_transfer_member内のpCURTBL    = pWT->pCURTBL_Data;の実行位置がDataUpdate( );より前になっていたので、
　　pWTが定まらず、一つ前の溶接法のアドレスでgss_Current_table_data[pss_Index] = pCURTBL->CUR_DATA[pss_Index];が実行されていた
　　ので、溶接電流の引いてきた値がおかしかった。（一つ前の溶接法のものを引いていた）
　　→pCURTBL    = pWT->pCURTBL_Data;の実行位置をDataUpdate( );より後に変更。

　ＶｅｒＣ０５－Ｆ１５

・２０１０＿０２＿２４＿５００ＢＰ４
　２０１０＿０２＿２２＿５００ＢＰ４を元に変更
　①可変クレータ反復時、クレータ、ダウンスロープ期間中にアーク切れすると、再度アークが復活した時、初期電流がでる不具合があった。
　　（この件は２０１０＿０２＿１９＿５００ＢＰ４に修正したつもりだったが直っていなかった）
　　→クレータ電流値が出力されるように再度修正（動作未確認）（３００Ａ機も修正すること）

　ＶｅｒＣ０５－Ｆ１６


・２０１０＿０３＿０１＿５００ＢＰ４   （２月２６日～３月０１日の間に変更追加）
　２０１０＿０２＿２４＿５００ＢＰ４を元に作成
　①レスキューメニュー”エンチョウアシスト”表示復活
　②レスキューメニュー”アークキレボウシアシスト”の入力部、ＤＳＰ反映部作成完了
　③アークアシスト入力部完了
　④アークアシスト反映部完了

　ＶｅｒＣ０５－Ｆ１７

・２０１０＿０３＿０２＿５００ＢＰ４
　２０１０＿０３＿０１＿５００ＢＰ４を元に作成
　①新ナビデータ入力
　（未コンパイル）
　ＶｅｒＣ０５－Ｆ１８

－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－田中改造追加のコメント
・２０１２＿０２＿１０＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０２＿１０＿５００ＢＰ４＿ＮＯ３を元に作成
　①ＤＳＰ変更
　②weldtbl　2010_02_08_500BP4_TAN_【C06-E09】_ホット150A　よりコピー
　③weldtbl変更　H275=0x0019(=250us)

　2010/2/12 ロード車用3台＋ナビ用1台に書き込み済
　
　ＶｅｒＣ０７－Ｆ１２


・２０１２＿０２＿１７＿５００ＢＰ４＿ＴＡＮ
　２０１２＿０２＿１０＿５００ＢＰ４＿ＴＡＮを元に作成
　新ハード波形対応。２段屈曲制御。
　①dsp変更
　②weldtbl変更。新ハード波形パラメータ入力。
　③calc変更。V78,V79,V80,V81換算。A/ms を入力とする。マイルドパルスのSWを利用して、傾きを変更できるようにする。
　
　ＶｅｒＣ０８－Ｆ１２

・２０１２＿０２＿１８＿５００ＢＰ４＿ＴＡＮ
　２０１２＿０２＿１７＿５００ＢＰ４＿ＴＡＮを元に作成
　新ハード波形対応。ダウン側制御追加
　①dsp変更
　②weldtbl変更。新ハード波形パラメータ入力。コメント 2/17を利用
　
　ＶｅｒＣ０９－Ｆ１２

・２０１０＿０２＿１８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２
　２０１０＿０２＿１８＿５００ＢＰ４を元に作成
　新３２Ｒ結合
　①DSP変更　2010_02_18_500BP4_TAN_【C09-F12】_新ハード　よりコピー
　②weldtbl変更　2010_02_18_500BP4_TAN_【C09-F12】_新ハード　よりコピー
　③calc変更　　2010_02_18_500BP4_TAN_【C09-F12】_新ハード　よりコピー（日付的に問題ない）

　④DSP変更　ピーク最大変更。550A→520A（理論値）
　⑤weldtbl変更　ハード波形傾き変更

　ＶｅｒＣ０９－Ｆ１３

・２０１０＿０２＿２３＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０２＿２２＿５００ＢＰ４を元に作成
　新３２Ｒ結合（新マッチング）
　①DSP変更　2010_02_18_500BP4_TAN_NO2_【C09-F13】_32R結合_新ハードよりコピー
　②weldtlb変更　2010_02_18_500BP4_TAN_NO2_【C09-F13】_32R結合_新ハードよりコピー
                 新マッチング用のラベル追加！
　③calc変更　　2010_02_18_500BP4_TAN_NO2_【C09-F13】_32R結合_新ハードよりコピー（日付的に問題ない）

　ＶｅｒＣ１０－Ｆ１５

・２０１０＿０２＿２３＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２
　２０１０＿０２＿２３＿５００ＢＰ４＿ＴＡＮを元に作成
　新ハード検討
　①DSP変更。
　　垂下特性を持たせる。
　　ハード波形、最低補償量を、25→40（500us）とする。

　ＶｅｒＣ１１－Ｆ１５

・２０１０＿０２＿２４＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０２＿２３＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２を元に作成
　新ハード検討用

　①DSP変更。ハード波形。HOTテスト。

　ＶｅｒＣ１２－Ｆ１５

・２０１０＿０３＿０１＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０２＿２４＿５００ＢＰ４＿ＴＡＮを元に作成
　ハード等検討
　①DSP変更。
　②calc.c変更。V82対応。
　②weldtbl　V82対応。ピーク電流、475A→520A、500A→550A　とする。

　ＶｅｒＣ１３－Ｆ１５


・２０１０＿０３＿０１＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２
　２０１０＿０３＿０１＿５００ＢＰ４を元に作成
　①DSP
　②weldtbl
　③calc.c　V78（A/ms）、V80（A/ms）、V82（A）
　　V79、V81換算無。
　④cal.c　V20、V71 を変更。ハード波形2次式化。テーブルで吸収する。

　ＶｅｒＣ１３－Ｆ１７


・２０１０＿０３＿０１＿５００ＢＰ４＿ＴＡＮ＿ＮＯ３
　２０１０＿０３＿０１＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２を元に作成
　①calc.c、ifsub_task.c　のアシスト微調整部を変更。検討用
　　直値入力化、H280対応
　②nabitbl 変更　３／２井原さん更新分（Ｆ１８）のナビデータを反映
　③DSP変更、H280対応

　ＶｅｒＣ１４－Ｆ１７


－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－ここまで田中コメント

・２０１０＿０３＿０２＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿０２＿５００ＢＰ４を元に作成
　①dsp
　②weldtbl　2010_03_01_500BP4_TAN_NO3_【C14-F17】よりコピー
　③calc.c　　V78（A/ms）、V80（A/ms）、V82（A）
　④ifsub_task.c　H280対か
　⑤calc.c、ifsub_task.c　のアシスト微調整部を変更。検討用。直値入力化。

　ＶｅｒＣ１５－Ｆ１８


・２０１０＿０３＿０３＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿０２＿５００ＢＰ４＿ＴＡＮを元に作成
　ナビ最大値変更。
　①custom.h　のナビの最大値を変更。105 → 125
　②calc.c、ifsub_task.c　のアシスト微調整値変更。

　ＶｅｒＣ１６－Ｆ１９


・２０１０＿０３＿０３＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿０３＿５００ＢＰ４＿ＴＡＮを元に作成
　①ＤＣパルス時のＴＳレスポンス改善修正
　②ナビデータ更新　小林依頼分
　③メモリを破壊していた件修正（SELECT_DITAL_MAX 30→32に変更）
　　アークアシスト入力を詳細メニューの途中に追加したため配列数が不足した。そのため配列外のメモリをクリアしていたため
　　クレータ電流、パルス電流が最低電流になっていた。
　④I_V_READの実効値電流、電圧の算出方法変更。→パルス時のＴＳレスポンス改善。
　　手棒時の短絡判定問題なし。
　⑤アークアシストの文字変更。「レベル？」等追加。

　ＶｅｒＣ１６－Ｆ２０


・２０１０＿０３＿０４＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿０３＿５００ＢＰ４＿ＴＡＮを元に作成
　①I_V_READの実効値電流、電圧の算出、オフセット調整項を追加。

　ＶｅｒＣ１７－Ｆ２０


・２０１０＿０３＿０５＿５００ＢＰ４
　２０１０＿０３＿０４＿５００ＢＰ４＿ＴＡＮを元に変更
　①詳細メニューの
　　・マイルドパルス
　　・ＡＣ　シュウハスウ　ヒョウジ
　　・アークアシスト
　　がＣＨ共通項目になっていなかった。→ＣＨ共通項目に変更

　ＶｅｒＣ１７－Ｆ２１


・２０１０＿０３＿０５＿５００ＢＰ４＿ＮＯ２
　２０１０＿０３＿０５＿５００ＢＰ４を元に作成
　①パルス溶接における実効値、平均値の計算の周波数範囲の変更。
　　ｒｏｂ＿ｓｎｄ＿ｃｌａｓｓ側（ハンド側）を修正
　　いままで：１．１～５．０Ｈｚと５．１Ｈｚ以上
　　修正　　：１．１～４．０Ｈｚと４．１Ｈｚ以上

　②Ｉ＿Ｖ＿ＲＥＡＤ修正
　　平均電流、実効電流計算結果に、０Ａ制限及び９９９Ａ制限をかける。
　　平均電圧、実効電圧計算結果に、０Ｖ制限及び６２５Ｖ制限をかける。

　③calc.c、ifsub_task.c　のアシスト微調整値変更。
　　ハード、標準交流のアシスト±５調整可能。
　　ハード(±０）、標準（－１）時に、weldtblの値を出力する。他調整時は直値が出力される。暫定仕様。

　④weldtbl 標準交流補償量変更。２００Ｈｚ時に、EP側、EN側とも、312.5us　となるように修正。
　　５００Ａ／２００Ｈｚ出力可能なように修正。

　⑤ナビデータ、１点修正。３／５の河原田さん変更要望。田中修正。
　　SUS 直流TIG NO38の溶接電流を160A→180Aへ変更。
　　　　//2010.03.05 ナビデータ変更
　　　　//    SUS 直流TIG NO38 データ変更
　　　　//            0x02 ,      // 材質	    ：SUS
　　　　//            0x10 ,      // 板厚     ：8.0mm 2pass
　　　　//            0x01 ,      // 継ぎ手   ：突き合わせ
　　　　//            0x01 ,      // 姿勢     ：下向き
　　　　//            0x01 ,      // パルス   ：無
　　　　//    変更内容：溶接電流　160A→180A


　★ロード車用。2010/3/8朝一にロード車搭載予定

　ＶｅｒＣ１９－Ｆ２２


・２０１０＿０３＿０８＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿０５＿５００ＢＰ４＿ＮＯ２を元に作成
　マッチング検討
　①WELDTBL。マッチングテーブル方式に備え、２次式テーブルを変更する。
　②calc.c V71のスケーリング修正。パルス電流はmax/min値で受けていたため、演算がおかしくなっていた。
　③L3_table_data_read_member.c V71(パルスピーク）電流指令設定部に、
　　current_table_data_member のテーブル換算を挿入

　ＶｅｒＣ２０－Ｆ２２


・２０１０＿０３＿０８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２
　２０１０＿０３＿０８＿５００ＢＰ４＿ＴＡＮを元に作成
　①DSP変更。IP<IBの際のマイルドパルス動作対応検討。

　ＶｅｒＣ２１－Ｆ２２


・２０１０＿０３＿０９＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿０８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２を元に作成
　①DSP変更。
　②weldtbl変更。
　③calc.c変更、マイルドパルス関連修正。

　ＶｅｒＣ２２－Ｆ２２


・２０１０＿０３＿０９＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２
　２０１０＿０３＿０９＿５００ＢＰ４＿ＴＡＮを元に作成
　標準交流の延長性能向上の検討。現状４００Ａ程度３０ｍ延長でＥ－１３発生する。
　①DSP変更。EN側の保証時間最大時間を500us→800usに変更
　　結果、最大５００ＡまでＥ－１３発生せず。
　　
　　新仕様案：４００Ａを超えたら、保証時間の最大値を500us→800us(４５０Ａにて）に変更する。
　　
		＜確認＞
　　延長無し、５００Ａ設定、保証時間８００ｕｓ、７０Ｈｚ、アシスト０にて、５００Ａ足らないが、
　　延長無し、５００Ａ設定、保証時間８００ｕｓ、２００Ｈｚ、アシスト＋５にて、５００Ａ出力ＯＫ。

　ＶｅｒＣ２３－Ｆ２２


・２０１０＿０３＿０９＿５００ＢＰ４＿ＴＡＮ＿ＮＯ３
　２０１０＿０３＿０９＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２を元に作成
　標準交流、ハード交流の延長性能向上シーケンス対応。
　①DSP変更　最大補償時間の可変化に対応。
　②weldtbl　標準交流、ハード交流の最大補償時間の可変化に対応。現行値を記載する。
　③calc.c
　　V93,V94 Convt_T化。最大補償時間の可変化に対応。[us]

　ＶｅｒＣ２４－Ｆ２２


・２０１０＿０３＿１０＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿０９＿５００ＢＰ４＿ＴＡＮ＿ＮＯ３を元に作成
　標準交流、ハード交流の最大補償時間可変化。
　①weldtbl変更。標準交流、ハード交流の最大補償時間の可変化に対応。
　　４００Ａまで、500us→800us（４５０A時）とする。
　②bkup_ram.c 変更（井原さん）
　　ＦＲＡＭエリア関連の修正


　ＶｅｒＣ２４－Ｆ２３



・２０１０＿０３＿１０＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２
　２０１０＿０３＿１０＿５００ＢＰ４＿ＴＡＮを元に作成
　①【ＮＯ３３】を追加
　②【ＮＯ１８】場所修正
　③【ＮＯ３４】を追加
　④マッチングデータ新規作成（田中）
　　３／１０の鳴戸データを入力。標準／ハード／ソフト 変更。

　ＶｅｒＣ２４－Ｆ２４


・２０１０＿０３＿１０＿５００ＢＰ４＿ＴＡＮ＿ＮＯ３
　２０１０＿０３＿１０＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２を元に作成
　①DSP変更。ﾏｲﾙﾄﾞﾊﾟﾙｽ変更。
　②calc.c変更。
　③マッチングデータ修正。整理。

　ＶｅｒＣ２５－Ｆ２４

・２０１０＿０３＿１７＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿１０＿５００ＢＰ４＿ＴＡＮ＿ＮＯ３を元に作成
　①新DSP可変演算検討。

　ＶｅｒＣ２６－Ｆ２４

・２０１０＿０３＿１８＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿１７＿５００ＢＰ４＿ＴＡＮを元に作成
　①新DSP可変演算検討。

　ＶｅｒＣ２６－Ｆ２４


・２０１０＿０３＿１８＿５００ＢＰ４
　２０１０＿０３＿１８＿５００ＢＰ４＿ＴＡＮを元に作成
　①井原さん修正。メニューの文字変更等。
　②ナビ読み込み時はアークアシストを初期化（０）にする。
　③ＡＣリカバリー時は高周波時間を２秒にする。


　ＶｅｒＣ２６－Ｆ２５


・２０１０＿０３＿１８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２
　２０１０＿０３＿１８＿５００ＢＰ４を元に作成
　①アーク切れ判定をＨＤ電検のみからＨＤ電検＋電圧チェックに変更。
　　電圧４８Ｖ以上ではアーク切れ状態と見る。

　　※ＤＳＰの変更無し

　ＶｅｒＣ２７－Ｆ２６


・２０１０＿０３＿１８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ３
　２０１０＿０３＿１８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２を元に作成
　①cal.c、ifsubtask.c　整理
　②DSP変更、DSP可変演算処理修正（整理）

　ＶｅｒＣ２８－Ｆ２６

－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－
テスト実装無し＞
テスト実装無し＞・２０１０＿０３＿１８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ４
テスト実装無し＞　２０１０＿０３＿１８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ３を元に作成
テスト実装無し＞　テスト用
テスト実装無し＞　①割り込み内容の受信
テスト実装無し＞　②ＣＰＵアーク切れ判定の電圧チェックを無効化。テストのため。
テスト実装無し＞　③ＤＳＰ交流ｱｰｸ切れ時の電流検出誤検対策。
テスト実装無し＞
テスト実装無し＞　ＶｅｒＣ２９－Ｆ２６
テスト実装無し＞
テスト実装無し＞
テスト実装無し＞・２０１０＿０３＿１９＿５００ＢＰ４＿ＴＡＮ
テスト実装無し＞　２０１０＿０３＿１８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ３を元に作成
テスト実装無し＞　テスト用
テスト実装無し＞　①ＤＳＰ電流検出誤検検討
テスト実装無し＞
テスト実装無し＞　ＶｅｒＣ２９－Ｆ２６
テスト実装無し＞
テスト実装無し＞
テスト実装無し＞・２０１０＿０３＿２０＿５００ＢＰ４＿ＴＡＮ
テスト実装無し＞　２０１０＿０３＿１９＿５００ＢＰ４＿ＴＡＮを元に作成
テスト実装無し＞　テスト用
テスト実装無し＞　①ＤＳＰ電流検出誤検検討
テスト実装無し＞
テスト実装無し＞　ＶｅｒＣ３０－Ｆ２６
テスト実装無し＞
テスト実装無し＞
テスト実装無し＞・２０１０＿０３＿２１＿５００ＢＰ４＿ＴＡＮ
テスト実装無し＞　２０１０＿０３＿２０＿５００ＢＰ４＿ＴＡＮを元に作成
テスト実装無し＞　テスト用
テスト実装無し＞　①ＤＳＰ電流検出誤検検討、スタート異常修正。
テスト実装無し＞
テスト実装無し＞　ＶｅｒＣ３１－Ｆ２６
テスト実装無し＞
－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－


・２０１０＿０３＿２３＿５００ＢＰ４＿ＴＡＮ
　２０１０＿０３＿１８＿５００ＢＰ４＿ＴＡＮ＿ＮＯ３を元に作成
　①DSP変更。電流検出誤検対策

　※ロード車予定

　ＶｅｒＣ３２－Ｆ２６


・２０１０＿０３＿２３＿５００ＢＰ４
　２０１０＿０３＿２３＿５００ＢＰ４＿ＴＡＮを元に作成
　①ロボット接続時電極短絡を"gtt_Fpga.Volt_result"で検出していたので、ロボット接続時のデフォルトは実効値
　　で電圧を計算するため、"gtt_Fpga.Volt_result"は０Ｖになってしまい、溶接後０．５秒程度で必ず短絡検出を
　　して、出力が停止してしまっていた。
　　→　変更
                                   //<><><> 2010.03.23 <><><>
                                   double work;
                                   work = (double)gtt_Internal_pack.Data.In.ucImprudenceVolt;
                                   if (gtt_Fpga.Volt_result_rms < (work * work)) //短絡チェック 2010.03.23
                                   //<><><><><><><><><><><><>
　　　　以上のように２乗値で比較するように変更。
　②起動時エラー（レベル１，２）が発生した状態の時、ロボット接続を行うとエラー解除後も”ＣＯＭ　－－－”を表示せず、
　　エラー表示したままになる不具合を修正した。（３００ＢＰ４にも反映すること）
　③詳細メニューを選んだ状態で、ロボット接続を行うと前パネルの表示は”ＣＯＭ　－－－”になるが溶接できない（ＴＳを受け付けない）
　　不具合を修正。（３００ＢＰ４にも反映すること）
　　→ロボット通信が確立するとguc_Select_counter = MODE_WELDINGとなるように変更。
　④レスキューメニューまたはサービスマンメニューを選択した状態で、ロボット接続を行うと”ＣＯＭ　－－－”にはなるが溶接できない
　　（ＴＳを受け付けない）
　　→gb_ServiceMenu == false　&&　gb_RescueMenu == falseの場合だけｇｏｏｄ　ｍｏｒｎｉｎｇを受け付けるように変更。

　ＶｅｒＣ３２－Ｆ２７


・２０１０＿０３＿２３＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２
　２０１０＿０３＿２３＿５００ＢＰ４を元に作成
　①ＤＳＰ変更。
　　１００Ａ以上のＭＩＸＴＩＧ波形の直流部分にパルス状の電流の落ち込み発生した。
　　交流波形アシストの影響。修正する。

　ＶｅｒＣ３３－Ｆ２７


・２０１０＿０３＿２４＿５００ＢＰ４
　２０１０＿０３＿２３＿５００ＢＰ４＿ＴＡＮ＿ＮＯ２を元に作成
　①井原さん修正
    ロボット接続時にComuniPack.Data.From.usWeldingOutCurrの変数にgss_RCurrent_workとgtt_Fpga.Curr_resultが代入されていたので、
　　ロボット接続時はgss_RCurrent_workだけになるように変更。

　ＶｅｒＣ３３－Ｆ２８


・２０１０＿０３＿２５＿５００ＢＰ４
　２０１０＿０３＿２４＿５００ＢＰ４を元に作成
　製品版　２０１０／３／２５生産分１台に搭載。

　Ｖｅｒ０５２－１００



・２０１０＿０４＿０８＿５００ＢＰ４
　２０１０＿０３＿２５＿５００ＢＰ４を元に作成
　①ロボット接続時のパルス有り時、０．５～１．０Ｈｚ間、測定電流、電圧が０Ｖになる不具合修正
　②ナビ表示文字配列を１６→１７に変更
　　Ｖｅｒ０５２－１０１


・２０１０＿０５＿１２＿５００ＢＰ４
  ２０１０＿０４＿０８＿５００ＢＰ４を元に作成
　①ＬＣＤ表示用バッファ（各行）が１６バイトのみのエリアに対して、１６文字の”文字列”をstrcpy関数を利用して
　　転送していたため、文字列終端データであるＮＵＬＬデータをエリア外にオーバーフローして転送していた。
　　（ＬＣＤ表示用バッファの後に続くエリアは７セグ表示エリアだが、転送後に再設定しているので表向き問題なかった）
　　→ＬＣＤ表示用バッファ（各行）を１７バイト（１６文字の”文字列”対応）に拡大する。

　　Ｖｅｒ０５２－１０１（バージョン変えず）


・２０１０＿１１＿０２＿５００ＢＰ４
　２０１０＿０５＿１２＿５００ＢＰ４を元に作成
　①ＤＳＰ変更
　　スタート時ＥＰ→ＥＮ側への転流の際にＥ－１３発生する件の対策。
　２次過電圧検出回路のバラツキで発生していた。
　スタートＨＯＴ電流のＥＰ区間にて、重畳Ｃの充電をオフする。
　最初のEP→ENへの転流後に、重畳Ｃの充電を開始する。

　＜確認事項＞
　ロボット接続。TP上にてバージョン”102”表示確認
　マエパネル　バージョン”102”表示確認

　　Ｖｅｒ０５２－１０２（製品）


・２０１１＿０９＿０１＿５００ＢＰ４
　２０１０＿１１＿０２＿５００ＢＰ４を元に作成
　①温度異常発生後に電源切り等で実時間が６分以上経過したかを算出する式にて
　　変数をchar宣言していたため、算出値がオーバーフローが発生してしまう不具合に対応。

　　Ｖｅｒ０５２－１０３（製品）



/////　ＢＰ４バージョンアップ対応　//////

・２０１１＿０８＿２９＿５００ＢＰ４＿ＴＡＮ１
　２０１１＿０９＿０１＿５００ＢＰ４を元に作成
　４．０Ｈｚ以下マイルドパルス関連対応
　①cal.c　マイルドパルス関連　ラベル　//20110829_1
　　パルス無し時は、最大立ち上がりを送信するようにする件、cal.cロジックにてOKか、確認のこと。
　　	if (guc_Pulse_mode_data == 0x00){//パルス無し時
　　		Data = 32752.0;//最大立上り傾度
　　	}
　　パルス周期によりマイルドパルスデータ（時間）を制限する。パルス周期≧マイルドパルス時間とする。

・２０１１＿０９＿２１＿５００ＢＰ４
　２０１１＿０８＿２９＿５００ＢＰ４＿ＴＡＮ１を元に作成
　領域拡張
　①リンクエラー発生のため、下記変更
　　　＜内容＞
　　　　DSPの配置を変更する。
　　　・hpiDSP.c　にて、2000h 後ろにずらす。
　　　・リンクオプション変更。DSPPは、上記にあわせる。
　　　・GB31D1.asm のセクションを、2000h、後ろにずらす。
　　　・weldtable.h のアドレスを、後ろに、2000hずらす。
　　　・リンクオプションを、2000hずらす。
　　　
　　　＜詳細＞
　　　　hpiDSP.c
　　　	　　pSOC = (ushort *)0x0007E000;   //2011.09.21
　　　　GB31d1.asm 
　　　			.Section		DAT_C1, Data, locate=h'00097000 ;2011.09.21
　　　　weldtable.h
　　　　　#define WLDTBL_PTR      ( (PNEW_WLDTBL)0x0098000 ) //2011.09.21
　　　　　#define OLD_WLDTBL_PTR  ( (PWELDTABLE)0x0098000 )  //2011.09.21
　　　　リンクオプション
　　　　　　DSPP=7C000 → 7E000
　　　　　　NEWWELDTBL=96000 → 98000


・２０１１＿０９＿２８＿５００ＢＰ４＿ＴＡＮ１
　２０１１＿０９＿０１＿５００ＢＰ４を元に作成
　ＢＰ４バージョンアップ対応、田中実装分
　①DSP
　②FPGA　音対策
　③GB31d1.asm　F21スティック電圧データ
　⑤custom.h　バージョン F01（試験版）


　－－－－－未実装　井原さん実装依頼－－－－－
　■詳細メニュー追加
　　メニュー番号：P23
　　メニュー名称：”ソフトスタートジカン”
　　初期値：0.0s、ステップ：0.1s、ＭＩＮ：0.0s、ＭＡＸ：2.0s
　　値を、半固定273に送信する。（1dspdat=100us換算、例：0.5s → 5000datをDSPへ送信）
　－－－－－－－－－－－－－－－－－－－－－－

　　Ｖｅｒ０５２－Ｆ０１（試験用）





/////　５００ＢＰ４→３００ＢＰ４ 対応　//////

・２０１１＿０９＿２９＿３００ＢＰ４＿ＴＡＮ１
　２０１１＿０９＿２８＿５００ＢＰ４＿ＴＡＮ１を元に作成
　　
　　５００ＢＰ４試験用最新ソフトを、３００ＢＰ４に変換する。
　　
　　■■■ＦＰＧＡ　３００ＢＰ４最新（音対策済）に変更
　　
　　■■■固定パラメータ gb31d1.asm
　　　・３００ＢＰ４製品版最新に変更（デッドタイム、ゲイン他）
　　　・領域拡大（500BP4にあわせる）
　　　　　			.Section		DAT_C1, Data, locate=h'00097000 ;2011.09.21
　　　・スティック電圧変更（DSP簡欠動作追加）
　　;			2011.09.26 スティック電圧（PWM固定導通幅）変更 350GZ4にあわせる
　　;      　　F21=0x0066(102) → 0x004B(75)
　　
　　■■■ＤＳＰ
　　　ＤＳＰ　３００ＢＰ４用
　　
　　■■■curvtbl.c
　　　全データ、１：１ とする。（可変変数の出力がそのまま出力される）
　　　マッチング関連
　　
　　■■■LA1_I_V_READ.c
　　　　gtt_Fpga.Curr_result　および　gtt_Fpga.Curr_result_rms　の算出時に用いるゲイン値を、300BP4(1006)に戻す。
　　　　500BP4時に、オフセット調整　－１　を　－０．５（+0.5）　に調整したのを、－１に戻す。
　　　　※weldtblのオフセットを変更すると、実出力がかわるため。設計変更前後で波形をあわせるため、戻す。
　　
　　//20110921_1+++++
　　//20110921_1-----
　　//2011.09.21
　　
　　■■■weldtbl.c
　　　・オフセット
　　　　　（１）H256データ=990 → 1006　に変更。全データ。
　　　　　上記は電流用の換算で、電圧表示には不要であった。
　　　・マッチング修正関連
　　　　V20、V71 を300BP4に戻す。
　　　   300BP4データより、V20V71データをコピーする。
　　　　I_VREADとの関係
　　
　　{0,100,1,1,750},         //;V20 DC手棒 2011.09.21
　　{0,100,1,1,750},         //;V20 DC手棒 2011.09.21
　　{2.8477,99.077,-1.0483,1,750}, //;V20 標準AC 2011.09.21
　　{0,69.715 ,-4.5958,1,750},//;V20 ｿﾌﾄ 2011.09.21
　　{0,213 ,-36,0.1,750},    //;V20 ﾊｰﾄﾞ 2011.09.21
　　
　　{0,100,1,1,750},         //;V71 DC手棒 2011.09.21
　　{0,100,1,1,750},         //;V71 DC手棒 2011.09.21
　　{2.8477,99.077,-1.0483,1,750}, //;V71 標準AC 2011.09.21
　　{0,69.715 ,-4.5958,1,750},//;V71 ｿﾌﾄ 2011.09.21
　　{0,213 ,-36,0.1,750},    //;V71 ﾊｰﾄﾞ 2011.09.21
　　
　　　・ハード波形関連　－－－－
　　■ハード波形、補償電流最大を300BP4にあわせる
　　//2011.09.21 ハード波形 H330=0x1111、H344=0x1111 
　　　ハードのDPSKAHEN変数
　　
　　　・標準波形関連　－－－－
　　■標準波形、補償電流最大を300BP4にあわせる
　　//2011.09.21 標準波形 H330=0x1111(100A)、H344=0x1111(100A)
　　　標準のDSPKAHEN変数
　　
　　　・DCTIG手棒波形関連　－－－－
　　■DCTIG、ゲイン戻す　直流TIGデータのみ対応。
　　//2011.09.21 低電流ｹﾞｲﾝ変更 H260=0x1B58(7000)→0x4E20、H261=0x01C9(457)→0x07D0、H262=0x0096(150)→0
　　■電防電圧戻す
　　//2011.09.25 電防電圧変更 H1=0x0055
　　//2011.09.26 電防電圧変更 H1=0x0066　　間欠有りで25V

　　　・波形アシストデータ変更 －－－－
　　//ハード
　　//2011.09.30 波形アシストデータ変更  H276=0x332C;H277=0x0000;H278=0x332C;H279=0x0000;H280=0x7FF0;
　　{0,0,60000,1,60000},//V78 //2011.09.30
　　{0,0,60000,1,60000},//V80 //2011.09.30
　　//標準
　　//2011.09.30 波形アシストデータ変更  H276=0x0000;H277=0x0000;H278=0x0000;H279=0x0000;H280=0x7FF0;
　　{0,0,60000,1,60000},//V78 //2011.09.30
　　{0,0,60000,1,60000},//V80 //2011.09.30
　　
　　■■■cal.c
　　//20110921_1+++++
　　//20110921_1-----
　　//2011.09.21
　　　・V20、V71のハード5次式(300BP4）に戻す。
　　//2011.09.28+++++
　　　・波形アシストのセンター値を変更
　　　　センター値：+5相当
　　　　－１　　値： 0相当
　　　　－２　　値：-5相当
　　　　－５　　値：さらに緩やかな波形を作成
　　　・センター値をweldtblデータ化

　　■■■L2_rob_snd_class.c
　　//2011.09.28
　　　・製品名　500 → 300
　　
　　■■■custom.h
　　//20110916_1+++++
　　//20110916_1-----
　　　・最大電流、最小電流リミッタ変更。
　　//2011.09.28
　　　・製品名　500 → 300
　　　・ROMVER　052 → 048
　　　・バージョン：Ver.E01
　　
　　★波形アシスト調整未
　　★延長アシスト調整未

　　Ｖｅｒ０４８－Ｅ０１（試験用）



＜500→300の改造残り＞
ロボ表示名、バージョン
★ナビ条件を300BP4化
★詳細メニュー19：出力制限の最大値、初期値を変更：500A→300A
詳細メニュー17：リモコン選択：300BP4仕様に変更
★詳細メニュー21：AC周波数表示（オート周波数）→削除

★最低電流設定、ハードの最低電流が20A
　ハード　20-300　※現在最低10Aになってしまっている。
　MIN_CURRENT_AC_HARD ※300BP4でのハード下限設定リミッタ？は500BP4系のソースでは存在しない。

溶接出力表示の実効値／平均値の自動切換え？ 300/500の仕様異なる？
手棒関連のパラメータ 300と500でホット異なる？
カヘンハンプク関連で300と500の変更ある？

＜追加＞
★DC周波数詳細表示（新機能）
★詳細メニュー追加(田中新機能、ソフトスタート）
　　　－－－－－未実装　井原さん実装依頼－－－－－
　　　■詳細メニュー追加
　　　　メニュー番号：P23
　　　　メニュー名称：”ソフトスタートジカン”
　　　　初期値：0.0s、ステップ：0.1s、ＭＩＮ：0.0s、ＭＡＸ：2.0s
　　　　値を、半固定273に送信する。（1dspdat=100us換算、例：0.5s → 5000datをDSPへ送信）
　　　－－－－－－－－－－－－－－－－－－－－－－
ナビ強化（新機能）
エキスパート感度変更（営業要望、500BP4相当）
スタートメニュー強化（新機能、BZ3相当）
外部機器（新機能）
ガスユニット対応
製造検査改善対応（初期化値修正　製造検査）



・２０１１＿１０＿０１＿３００ＢＰ４＿ＩＨＡ＿［Ｅ０２］
　２０１１＿０９＿３０＿３００ＢＰ４＿ＴＡＮ１＿［Ｅ０１］を元に作成
　★ナビ条件を300BP4化
　★詳細メニュー19：出力制限の最大値、初期値を変更：500A→300A
　★詳細メニュー21：AC周波数表示（オート周波数）→削除
　★最低電流設定、ハードの最低電流が20A
　★詳細メニュー追加(田中新機能、ソフトスタート）
　を追加。

　ＤＣ周波数詳細表示に関しては詳細仕様が不明であるため保留。



・２０１１＿１０＿０１＿３００ＢＰ４＿ＴＡＮ１＿［Ｅ０３］
　２０１１＿１０＿０１＿３００ＢＰ４＿ＩＨＡ＿［Ｅ０２］を元に作成

　■製造検査改善対応（初期化値修正　製造検査用）
　　L3_com_memory_member.c
		guc_Lcd_Bright		= 1;	// コントラストデータ：デフォルト値（＝１）2011.10.01

　■電流表示マッチング関連
　L2_rob_pc_re_rcv_class.c、L2_rob_snd_class.c 修正
　２０１０＿０４＿０５＿ＢＰ４＿ＲＯＢＣＯＭ＿ＴＡＮ を参照。

　　実効値電流算出に関連する処理部変更。実効値電圧演算は処理変更無し。
　　sqrt演算実効後に、-0.5 オフセット演算を行う。
　　　　　（-0.5 = -1.0+0.5　・・・指令にて+1.0A分の逆補償。実効値演算後のSHORTｷｬｽﾄの桁落ち分の補償（四捨五入のため)
　　オフセット演算実施の後にキャストする。（演算前にキャストしても小数演算が意味をなさない）
　　下記１３ヶ所修正。

P2_Rcv_prog\class\L2_rob_pc_re_rcv_class.c(236):gss_RCurrent_work = (signed short)(sqrt(gsl_Current_result_work_rms / gtt_Ctrl_counter.Avr_result)-(double)0.5);//2011.10.01 300BP4
P2_Rcv_prog\class\L2_rob_pc_re_rcv_class.c(282):gss_RCurrent_work = (signed short)(sqrt(gsl_Current_result_work_rms / gtt_Ctrl_counter.Avr_result)-(double)0.5);//2011.10.01 300BP4
P2_Rcv_prog\class\L2_rob_pc_re_rcv_class.c(330):gss_RCurrent_work = (signed short)(sqrt(gsl_Current_result_work_rms / gtt_Ctrl_counter.Avr_result)-(double)0.5);//2011.10.01 300BP4
P2_Rcv_prog\class\L2_rob_pc_re_rcv_class.c(396):gss_Base_current_work = (signed short)(sqrt(gsl_Base_current_result_work_rm / gtt_Ctrl_counter.Base_avr_result)-(double)0.5);//2011.10.01 300BP4
P2_Rcv_prog\class\L2_rob_pc_re_rcv_class.c(474):gss_RCurrent_work = (signed short)(sqrt(gsl_Current_result_work_rms / gtt_Ctrl_counter.Avr_result)-(double)0.5);//2011.10.01 300BP4
P2_Rcv_prog\class\L2_rob_pc_re_rcv_class.c(509):gss_RCurrent_work = (signed short)(sqrt(gsl_Current_result_work_rms / gtt_Ctrl_counter.Avr_result)-(double)0.5);//2011.10.01 300BP4
P6_Snd_prog\class\L2_rob_snd_class.c(1953):     gss_Current_work = (short)(sqrt(pd_Current_data)-(double)0.5);//2011.10.01 300BP4
P6_Snd_prog\class\L2_rob_snd_class.c(2003):     gss_Current_work = (short)(sqrt(pd_Current_data)-(double)0.5);//2011.10.01 300BP4
P6_Snd_prog\class\L2_rob_snd_class.c(2060):     gss_Current_work = (short)(sqrt(pd_Current_data)-(double)0.5);//2011.10.01 300BP4
P6_Snd_prog\class\L2_rob_snd_class.c(2233):     gss_Current_work = (short)(sqrt(pd_Current_data)-(double)0.5);//2011.10.01 300BP4
P6_Snd_prog\class\L2_rob_snd_class.c(2312):     gss_Base_current_work = (short)(sqrt(pd_Current_data)-(double)0.5);//2011.10.01 300BP4
P6_Snd_prog\class\L2_rob_snd_class.c(2398):     gss_Current_work = (short)(sqrt(pd_Current_data)-(double)0.5);//2011.10.01 300BP4
P6_Snd_prog\class\L2_rob_snd_class.c(2442):     gss_Current_work = (short)(sqrt(pd_Current_data)-(double)0.5);//2011.10.01 300BP4


　　バージョン　Ｖｅｒ０４８－Ｅ０２（検討用）


・２０１１＿１０＿０３＿３００ＢＰ４＿ＩＨＡ＿［Ｅ０４］
　２０１１＿１０＿０１＿３００ＢＰ４＿ＴＡＮ１＿［Ｅ０３］を元に作成
　①パルス詳細表示追加
　　バージョン　Ｖｅｒ０４８－Ｅ０４


・２０１１＿１０＿０３＿３００ＢＰ４＿ＩＨＡ＿［Ｅ０５］
　２０１１＿１０＿０３＿３００ＢＰ４＿ＩＨＡ＿［Ｅ０４］を元に作成
　①パルス詳細表示の並びを変更
　　バージョン　Ｖｅｒ０４８－Ｅ０５


・２０１１＿１０＿０３＿３００ＢＰ４＿ＴＡＮ＿［Ｅ０６］
　２０１１＿１０＿０３＿３００ＢＰ４＿ＩＨＡ＿［Ｅ０５］を元に作成
　①パルス詳細表示の初期値変更
    gtt_Dital_attribute[23].ss_Min        =    0;      //P23 2011.10.03 パルス詳細表示SW　　2009.02.13エキスパートモード実験用

　　バージョン　Ｖｅｒ０４８－Ｅ０６


・２０１１＿１０＿０４＿３００ＢＰ４＿ＴＡＮ＿［Ｅ０７］
　２０１１＿１０＿０３＿３００ＢＰ４＿ＴＡＮ＿［Ｅ０６］を元に作成
//20111004+++++
//20111004-----
　ロード 上野さんチェックのフォロー
　①ソフトスタート制御中の周波数を、３０Hzに設定する。
　　ソフトスタート時間≠０の場合、スタート周波数：30Hzを送信する。

　本ソフトを北海道大石様に確認もらう（営業企画薗田さんより送付）

　　バージョン　Ｖｅｒ０４８－Ｅ０７


--------------------------------------------------------------------

・２０１１＿１０＿０６＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０１］
　２０１１＿１０＿０４＿３００ＢＰ４＿ＴＡＮ＿［Ｅ０７］を元に作成
　①外部機器接続ユニットＩ／Ｆに対応するため、バージョン番号を「Ｆｘｘ」へ新たに変更。
　　※問題があるのなら変更可能（管理上の変更）。
　②プログラムエリアを確保するため以下のロケーションを変更した。（ＴＭのBuild Settingsも変更）
　　　1:DSPP(DSPC)[hpiDSP.c] 					0x0007E000 → 0x00088000
　　　2:DAT_C1[GB31d1.ms] 						h'00097000 → h'000A1000
　　　3:NEWWELDTBL(WLDTBL_PTR)[weldtable.h] 	0x0098000  → 0x00A2000
　①外部機器接続ユニット（試作版：エナジー社向け）Ｉ／Ｆに対応
　　変更検索ワード：「IIF NEW」と「EXTERNAL IIF NEW」
　　（移植参考プログラム：2011_03_03_BP4_SPOT_EX_IIF）
　　※なお、変更検索ワードに付随する変更日付は当時のままなので注意すること（後で変更予定）

　　・コンパイル：完了
　　・実機動作：未確認

　　【注意】現状においても、プログラムエリアの不足が予想されるため
　　　　　　さらなるプログラムエリアの確保が必要の可能性あり。

　　バージョン　Ｖｅｒ０４８－Ｆ０１


・２０１１＿１０＿０７＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０２］
　２０１１＿１０＿０６＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０１］を元に作成
　①外部機器接続ユニット（旧試作版）の入力信号設定を詳細メニューの２５番に追加、それに対応する処理の追加
　　変更検索ワード：「<IIF NEW>」と「IIF NEW」
　　（移植参考プログラム：2009_12_22_BP4_IIF）
　　※なお、変更検索ワードに付随する変更日付の一部は当時のままなので注意すること（後で変更予定）
　②外部機器接続ユニット（１０信号版）に対応
　　変更検索ワード：「<<EXTERNAL IIF NEW>>」と「<< EXTERNAL IIF NEW >>」
　　（外部機器接続ユニット側プログラム：「Compile 2011.10.07 EX IIF」）

　　・コンパイル：完了
　　・基板動作：確認
　　・外部機器接続ユニット（１０信号版）接続状態での簡易動作：確認（各端子の状態をＬＣＤへ表示）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０２


・２０１１＿１０＿１２＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０３］
　２０１１＿１０＿０７＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０２］を元に作成
　①外部機器接続ユニット（仮最新版）に対応（Ｎｏ１）
　　１：接点入力を仮最終版（ＢＰ用）に対応
　　２：ＩＩＦ通信異常に対応（エラー番号＃８２）
　　３：ＩＩＦ側電源異常に対応（エラー番号＃８２）
		・外部機器接続ユニットの１０ビット目を監視することで、外部機器接続ユニット側の電源の監視を行う。
　　　　　もし、外部機器接続ユニット側の電源が投入されていない場合は通信を停止することにより
　　　　　ＩＩＦ通信異常を誘発させる。
　　４：初期出荷時の初期設定を仮最終版（ＢＰ用）に対応。

　　変更検索ワード：「<EXTERNAL IIF NEW(Phase 2)>」
　　・コンパイル：完了
　　・基板動作：確認
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：確認
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０３


・２０１１＿１０＿１３＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０４］
　２０１１＿１０＿１２＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０３］を元に作成
　①外部機器接続ユニット（仮最新版）に対応（Ｎｏ２）
　　１：ＩＩＦによるトーチスイッチ異常（Ｅ０７）に対応
　　２：非常停止／一時停止＃１／一時停止＃２はＩＩＦが接続されていても、治具端子台側の入力を有効とする。
　　３：トーチスイッチ入力時はスティックチェック入力を無効とする。
　　４：スティックチェック入力時はトーチスイッチ入力を無効とする。
　　５：スティックチェック時のスティック検知時にレベル０でエラー処理を行う（現状はエラー表示のみ）
　　６：ＩＩＦ接続時にのみ詳細メニュー内にＩＩＦ設定項目を表示させる（※現在は最終番目の項目となっているため、項目追加時には合わせて変更すること）
　②外部機器接続ユニットから指定された再生チャンネル番号の範囲確認を行う（ＣＨ１～ＣＨ５０）
　③レスキュー＆サービスマン・モード時はＩＩＦの入力は無効とする
　④ＩＩＦ接続時は通常表示モードとする

　　変更検索ワード：「<EXTERNAL IIF NEW(Phase 3)>」
　　・コンパイル：完了
　　・基板動作：確認
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：確認（試験プログラムによる確認）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０４


・２０１１＿１０＿１４＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０４］
　２０１１＿１０＿１３＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０４］を元に作成
　①メモリ初期化モジュール内にて、外部機器接続ユニット（１０信号版）に未対応部を修正
　　変更検索ワード：「<<EXTERNAL IIF NEW>>」
　②スティックチェック時には他機能（ＴＳ等）は受け付けない（非常停止系は受け付ける）
　　変更検索ワード：「<EXTERNAL IIF NEW(Phase 4)>」

　　・コンパイル：完了
　　・基板動作：確認
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：確認（試験プログラムによる確認）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０４


・２０１１＿１０＿２６＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０５］
　２０１１＿１０＿１４＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０４］を元に作成
　①電源投入後約１０秒以内に外部機器接続ユニットとの接続プロトコルが確立できない場合は、
　　以後の外部機器接続ユニットとの接続プロトコルは無効とする。
　　変更検索ワード：「<EXTERNAL IIF NEW(Phase 5)>」
　②現行のナビテーブルを拡張型ナビテーブルに対応。（拡張したデータは仮データ）
　③ナビ選択後に「ガス流量」「フィラー径」「電極径」「電極先端角度」を表示し、
　　何かしらのキー操作を行うと通常表示に戻る。
　　変更検索ワード：「<NAVI Enhancements(Phase 1)>」

　　・コンパイル：完了
　　・基板動作：確認
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：確認
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０５


・２０１１＿１０＿２７＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０５］
　２０１１＿１０＿２６＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０５］を元に作成
　①外部機器接続ユニット接続中はナビの利用を制限する。
　　（ナビ選択時は「ｶﾞｲﾌﾞｷｷﾕﾆｯﾄ ﾄﾉ  ﾍｲﾖｳ ﾊ ﾃﾞｷﾏｾﾝ」を表示する）
　②ナビ選択後に「ガス流量」「フィラー径」「電極径」「電極先端角度」を表示後、
　　溶接動作に移行すると通常表示に戻る。
　③ナビテーブルの「ガス流量」「フィラー径」「電極径」「電極先端角度」を
　　「溶接ナビ標準条件090410(河原田さん再検討分).xls」のデータに対応。
　　変更検索ワード：「<NAVI Enhancements(Phase 2)>」
　④詳細メニューの「溶接電流表示内容」の初期値を「平均値」へ変更。

　　・コンパイル：完了
　　・基板動作：確認
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：確認（拡張ナビデータ確認）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０５


・２０１１＿１０＿２８＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０６］
　２０１１＿１０＿２７＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０５］を元に作成
　①ＨＯＴレベルに「ビジャク」を追加。（「ヒョウジュン」を１倍に対して「ビジャク」は０．２５倍）
　　変更検索ワード：「「微弱モード」の追加」

　　・コンパイル：完了
　　・基板動作：確認
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：確認（ＨＯＴレベルの選択値確認）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０６


・２０１１＿１０＿２８＿３００ＢＰ４＿ＴＮＹ＿ＮＯ２［Ｆ０６］
　２０１１＿１０＿２８＿３００ＢＰ４＿ＴＮＹ＿［Ｆ０６］を元に作成
　①詳細メニューＰ１７でのリモコン選択にＢＰＲ１を選択できるようにする（３００ＢＰ４仕様）

　　・コンパイル：完了
　　・基板動作：確認
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：確認（リモコン選択項目にて「ＢＰＲ１」が選択できることの確認）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０６


・２０１１＿１０＿３０＿３００ＢＰ４＿ＴＮＹ［Ｆ０７］
　２０１１＿１０＿２８＿３００ＢＰ４＿ＴＮＹ＿ＮＯ２［Ｆ０６］を元に作成
　①ＩＩＦ接続時にＴＳＷが割り振られていない状態で、前面のＴＳＷをＯＮすると「Err-07」が発生する不具合委を修正。
　　（ＩＩＦ接続時に起動時のＴＳＷ状態を確認するためのフラグのクリアが行われていなかったために発生した不具合）
　②ＩＩＦ接続時に「ガス点検」を割り振られていると、溶接電流やプリフローなどの設定が出来なくなる不具合を修正。
　　（ＩＩＦのポート設定に「ガス検査」が割り振られていると「guc_Controller_gas_sw_cancel」がONとなり設定できなくなる。）
　　（　→２００８年１０月頃のプログラムだが、設定禁止とした理由は不明。　　　　　　　　　　　　　　　　　　　　　　　）
　③ＩＩＦ接続時にスティック検知を行うと、正常なのに「スティック検知」と誤判定してしまう不具合を修正。
　　（ＤＳＰから送られてくる判定結果をＭ３２Ｒ側で逆判定してしまっていた）

　　変更検索ワード：「<EXTERNAL IIF NEW(Phase 6)>」

　　・コンパイル：完了
　　・基板動作：確認（ＩＩＦ未接続状態での簡易動作確認）
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：未確認（実機へ接続のため）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０７


・２０１１＿１０＿３１＿３００ＢＰ４＿ＴＡＮ［Ｆ０８］
　２０１１＿１０＿３０＿３００ＢＰ４＿ＴＮＹ［Ｆ０７］を元に作成
　①FPGA変更。E-13チャタリング対策。

　　・コンパイル：未
　　・FPGA単体の動作は別ソースにて確認済み
　　
　　バージョン　Ｖｅｒ０４８－Ｆ０８


・２０１１＿１０＿３１＿３００ＢＰ４＿ＴＮＹ［Ｆ０９］
　２０１１＿１０＿３１＿３００ＢＰ４＿ＴＡＮ［Ｆ０８］を元に作成
　①ロボット通信時の不具合を修正。（ＧＤ２コマンド解析部が旧仕様のままだった）
　②ロボット通信時の機種別コードを「YC-500BP4(0xA0)」から「YC-300BP4(0x53)」にする。
　③詳細メニューＰ２３「ソフトスタート」を削除。（詳細メニュー項目、ＤＳＰ処理など）

　　・コンパイル：完了
　　・基板動作：確認（ＩＩＦ未接続状態での簡易動作確認）
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：未確認（実機へ接続のため）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ０９


・２０１１＿１１＿０７＿３００ＢＰ４＿ＴＡＮ［Ｆ１０］
　２０１１＿１０＿３１＿３００ＢＰ４＿ＴＮＹ［Ｆ０９］を元に作成
　①ＤＳＰ変更　旧３００ＢＰ４出力モード追加
　②if_sub_task.c
     H285=0：新３００ＢＰ４出力モード
     H285=1：旧３００ＢＰ４出力モード
　　※レスキューメニューにて切り替える予定。

　　バージョン　Ｖｅｒ０４８－Ｆ１０



＜追加予定＞
レスキューメニュー追加(田中新機能）
　　　－－－－－未実装　実装依頼－－－－－
　　　■レスキューメニュー追加
　　　　メニュー名称：”コウリュウハケイモード”
　　　　初期値：ON、ステップ：ON／OFF
　　　　ON時動作 ：if_sub_task内、半固定285に、0 を送信する。
　　　　OFF時動作：if_sub_task内、半固定285に、1 を送信する。
　　　－－－－－－－－－－－－－－－－－－－－－－


・２０１１＿１１＿０８＿３００ＢＰ４＿ＴＮＹ［Ｆ１１］
　２０１１＿１１＿０７＿３００ＢＰ４＿ＴＡＮ［Ｆ１０］を元に作成
　①レスキューメニューに「交流波形出力モード」の設定項目を追加
　②if_sub_task内、半固定285への設定値をレスキューメニュー「交流波形出力モード」で切り替えれるようにした。

	レスキューメニュー追加(田中新機能）
　　　－－－－－未実装　実装依頼－－－－－
　　　■レスキューメニュー追加
　　　　メニュー名称：”コウリュウハケイモード”
　　　　初期値：ON、ステップ：ON／OFF
　　　　ON時動作 ：if_sub_task内、半固定285に、0 を送信する。
　　　　OFF時動作：if_sub_task内、半固定285に、1 を送信する。
　　　－－－－－－－－－－－－－－－－－－－－－－

　　・コンパイル：完了
　　・基板動作：確認（ＩＩＦ未接続状態での簡易動作確認）
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：未確認（実機へ接続のため）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ１１


・２０１１＿１１＿０８＿３００ＢＰ４＿ＴＮＹ＿ＮＯ２［Ｆ１１］
　２０１１＿１１＿０８＿３００ＢＰ４＿ＴＮＹ［Ｆ１１］を元に作成
　①レスキューメニュー「交流波形出力モード」で切り替えれる仕様だったが、サービスマンメニューに追加されていた不具合を改善。

　　・コンパイル：完了
　　・基板動作：確認（ＩＩＦ未接続状態での簡易動作確認）
　　・外部機器接続ユニット（仮最新版）接続状態での簡易動作：未確認（実機へ接続のため）
　　・実機動作：未確認

　　バージョン　Ｖｅｒ０４８－Ｆ１１

・２０１１＿１１＿０８＿３００ＢＰ４＿ＴＮＹ＿ＮＯ３［Ｆ１１］
　２０１１＿１１＿０８＿３００ＢＰ４＿ＴＮＹ＿ＮＯ２［Ｆ１１］を元に作成
　①L2_rob_snd_class.c 修正
　　レスキューメニュー「交流波形出力モード」の表示を、
　　ＹＥＳ／ＮＯ　→　ＯＮ／ＯＦＦ に変更

　　田中修正

　　・コンパイル：完了
　　・実機動作：確認　（ＩＩＦ未接続）

　　バージョン　Ｖｅｒ０４８－Ｆ１１

・２０１１＿１１＿１１＿３００ＢＰ４＿ＴＡＮ＿ＮＯ１［Ｆ１２］
　２０１１＿１１＿０８＿３００ＢＰ４＿ＴＮＹ＿ＮＯ３［Ｆ１１］を元に作成

　マイルドパルスにて、立上り時間、立下り時間が、パルス周波数、ＤＵＴＹの関係にて、
　既定の時間が確保できない場合、
　従来は、立上り時間、立下り時間を個別に、調整していた。（短くしている）
　
　上記だと、パルス周波数が大きい場合に、ピーク、もしくはベース区間が見えることがなく、
　たとえば、パルスDUTYを絞った場合に、平均電流が下がらないため、動作上違和感がある。

　上記改善のため、
　立上り、立下りの、どちらかが、既定の時間よりも短くなった場合は、
　短いほうの時間に合わせるようにする。

　たとえばパルスＤＵＴＹが小さくなる方向の場合、立上り時間が不足するようになり、
　立上り電流傾度が大きくなると同時に、立下りの電流傾度も大きくなるようにする。
　結果、パルス波形が対象形の三角形となる。
　上記、同時に時間が短くなることで、パルス電流波形は、より細くなる（平均電流が下がる）方向となる。

　＜実装＞
　上記仕様を実装するためには、マイルドパルス時間の立上り時間と立下り時間を比較して、
　短いほうにあわせる必要がある。
　
　4.0Hz以上マイルドパルスでは、パルス周期の演算は、DSPでおこなっているため、
　calcで事前に算出するの困難である。（技術上は可能）
　また、立上りと立下り時間を同時に算出する必要があり、変更の規模が大きくなる。
　以上より、DSP内部で処理することとする。
　ただし、DSPで処理することで、非対称なパルス波形を作成することは困難となる。
　（片側マイルドパルス等）

　①DSP変更

　　バージョン　Ｖｅｒ０４８－Ｆ１２
　　・コンパイル：完了
　　・実機動作：確認（IIF未接続）


・２０１１＿１１＿１４＿３００ＢＰ４＿ＴＡＮ＿ＮＯ１［Ｆ１４］
　２０１１＿１１＿１１＿３００ＢＰ４＿ＴＡＮ＿ＮＯ１［Ｆ１２］を元に作成
　DCパルス、DSP/CPUパルス切替周波数の変更。4.0Hz→2.5Hz
　＜背景＞
　4.0HzＣＰＵパルスでは、可変パラメータの反映のばらつきにより、パルスピーク幅がばらつく。
　最大実出力で10ｍｓ程度ばらついている。
　DCパルス4.0Ｈｚの場合、ＤＵＴＹ５％にて、パルス幅１２．５ｍｓとなり、ばらつきの閉める割合が大きくなる。
　マイルドパルスを有効にした場合に、パルスピークが出たりでなくなったりするため、バラつきが目立つ。
　DSPの変更（マイルドパルス対応）により、切り替え周波数を、2.5Hzとする。
　2.5Ｈｚの場合、DUTY5％では、パルス幅20.0ｍｓとなり、ばらつきの閉める割合が小さくなる。
　★2.5Hz=1000000us/2.5Hz/12.5us=32000=0x7D00 →signed shortの最大7FFF以下。DSP内ｵｰﾊﾞｰﾌﾛｰ箇所無し。
　上記より、DSP/CPUパルスの切り替え周波数を2.5Ｈｚとする。（2.5Hz=CPUパルス、2.6Hz=DSPパルスとした）

　①weldtbl.c
　可変69（DCパルス周波数）の下限を、2.5とする。DSPへのリミッタになっている。
　全データ修正。

　②L3_table_data_read_member.c 変更
　”gtt_Internal_pack.Data.In.usPulseFreq <= 40” にてDCパルス周波数で切替実施している箇所を変更する。
　下記、７箇所
P2_Rcv_prog\class\L2_rob_pc_re_rcv_class.c(444):                    //} else if (gtt_Internal_pack.Data.In.usPulseFreq >= 11 && gtt_Internal_pack.Data.In.usPulseFreq <= 40){ //1.1Hz～4.0Hzの区間 2009.07.29
P4_Sequence_prog\class\member\L3_table_data_read_member.c(157):     //if (gtt_Internal_pack.Data.In.usPulseFreq <= 40) //2009.07.24
P4_Sequence_prog\class\member\L3_table_data_read_member.c(332):     /if (gtt_Internal_pack.Data.In.usPulseFreq <= 40) //2009.07.24
P4_Sequence_prog\class\member\L3_table_data_read_member.c(517):     /if (gtt_Internal_pack.Data.In.usPulseFreq <= 40) //2009.07.24
P4_Sequence_prog\class\member\L3_table_data_read_member.c(630):     /if (gtt_Internal_pack.Data.In.usPulseFreq <= 40) //2009.07.24
P6_Snd_prog\class\L2_rob_snd_class.c(2774):                    //} else if (gtt_Internal_pack.Data.In.usPulseFreq >= 11 && gtt_Internal_pack.Data.In.usPulseFreq <= 40){ //1.1Hz～4.0Hzの区間 2010.03.05
P7_Output_prog\L1_output_manager.c(33):      //if (gtt_Internal_pack.Data.In.usPulseFreq <= 40) //2010.01.20

　変更点フラグ：//2011.11.14 

　　バージョン　Ｖｅｒ０４８－Ｆ１４
　　・コンパイル：完了
　　・実機動作：確認（IIF未接続）



・２０１１＿１１＿１６＿３００ＢＰ４＿ＴＮＹ＿［Ｆ１５］
　２０１１＿１１＿１４＿３００ＢＰ４＿ＴＡＮ＿ＮＯ１［Ｆ１４］を元に作成
　①１次電圧過少異常（Ｅｒｒ０５）の表示＆記録遅延時間を１５００から１８００へ変更（現５００ＢＰ４ＴＡＹ変更分を反映）

　　バージョン　Ｖｅｒ０４８－Ｆ１５
　　・コンパイル：済
　　・実機動作：未


・２０１１＿１１＿１６＿３００ＢＰ４＿ＴＮＹ＿ＮＯ２［Ｆ１５］
　２０１１＿１１＿１６＿３００ＢＰ４＿ＴＮＹ＿［Ｆ１５］を元に作成
　①レスキューメニューの「交流波形モード("ｺｳﾘｭｳﾊｹｲﾓｰﾄﾞ    ")」の名称を「交流出力モード("ｺｳﾘｭｳｼｭﾂﾘｮｸﾓｰﾄﾞ ")」に変更する

　　バージョン　Ｖｅｒ０４８－Ｆ１５
　　・コンパイル：済
　　・実機動作：未


・２０１１＿１１＿１８＿３００ＢＰ４＿ＴＮＹ＿［Ｆ１６］
　２０１１＿１１＿１６＿３００ＢＰ４＿ＴＮＹ＿ＮＯ２［Ｆ１５］を元に作成
　①<EXTERNAL IIF NEW(Phase 6)>の変更にてＩＩＦ接続時のみスティックチェック結果の監視を行う事としていた不具合を修正。
　　（ロボット接続時のチェックが必要のため常時監視）
　②ロボット接続時はスティックチェックの結果（エラー表示）を行わない
　　変更検索ワード：「<EXTERNAL IIF NEW(Phase 12)>」

　③ロボット接続時の電極短絡チェック時は平気値を利用して判定する。
　　変更検索ワード：「<300BP4 Enhancements(Phase 1)>」

　　バージョン　Ｖｅｒ０４８－Ｆ１６
　　・コンパイル：完了
　　・基板動作：確認（簡易動作確認）
　　・実機動作：未確認



・２０１１＿１１＿２２＿３００ＢＰ４＿ＴＮＹ＿［２００］
　２０１１＿１１＿１８＿３００ＢＰ４＿ＴＮＹ＿［Ｆ１６］を元に作成
　①ＦＩＸ　ＵＰ

　　バージョン　Ｖｅｒ０４８－２００
　　・コンパイル：完了
　　・基板動作：確認（簡易動作確認）
　　・実機動作：未確認


・２０１１＿１１＿２８＿３００ＢＰ４＿ＴＮＹ＿［２００］
　２０１１＿１１＿２２＿３００ＢＰ４＿ＴＮＹ＿［２００］を元に作成
　①ナビ情報の消去タイミングを溶接開始時以降（実際の消去タイミングは溶接終了時）からトーチスイッチが押された瞬間からへ変更。
　　変更検索ワード：「<NAVI Enhancements(Phase 3)>」

　　バージョン　Ｖｅｒ０４８－２００
　　・コンパイル：完了
　　・基板動作：確認（簡易動作確認）
　　・実機動作：未確認


・２０１１＿１２＿０７＿３００ＢＰ４＿ＴＮＹ＿［２００］
　２０１１＿１１＿２８＿３００ＢＰ４＿ＴＮＹ＿［２００］を元に作成
　①リモコン接続時の指令値指定が５００Ａ機のままになっていた不具合を修正
　　変更検索ワード：「<500A->300A>」

　　バージョン　Ｖｅｒ０４８－２００
　　・コンパイル：完了
　　・基板動作：確認（簡易動作確認）
　　・実機動作：未確認


・２０１１＿１２＿０８＿３００ＢＰ４＿ＴＡＮ＿［２Ｆ１］
　２０１１＿１２＿０７＿３００ＢＰ４＿ＴＮＹ＿［２００］を元に作成
　交流スイッチングサージ電圧対策
　①DSP変更
　　標準交流、最低補償時間を設ける。300A400Hz動作時のサージ対策。
　　　250Aにて200us（17*12.5us）の補償時間を確保できるようにする。
　　　200A～250Aにてつなぐ。200A以下は=0となり、最低制限無効とする。
　　　　200usは、200Hzの際の補償時間より採用する。
　　　　200Aは、事実上利用するであろう最大電流から採用する。

　バージョン：２Ｆ１

・２０１１＿１２＿０８＿３００ＢＰ４＿ＴＡＮ＿［２Ｆ２］
　２０１１＿１２＿０８＿３００ＢＰ４＿ＴＡＮ＿［２Ｆ１］を元に作成
　交流スイッチングサージ電圧対策
　①DSP変更
　　標準交流、最低補償時間を設ける。300A400Hz動作時のサージ対策。
　　　260Aにて250us（20*12.5us）の補償時間を確保できるようにする。
　　　200A～260Aにてつなぐ。200A以下は=0となり、最低制限無効とする。
　　　　250usは、175Hzの際の補償時間より採用する。
　　　　200Aは、事実上利用するであろう最大電流から採用する。

　バージョン：２Ｆ２

・２０１１＿１２＿０８＿３００ＢＰ４＿ＴＡＮ＿ＮＯ２＿［２００］
　２０１１＿１２＿０８＿３００ＢＰ４＿ＴＡＮ＿［２Ｆ２］を元に作成
　①ＦＩＸ　ＵＰ

　　バージョン　Ｖｅｒ０４８－２００
　　・コンパイル：完了
　　・基板動作：確認（簡易動作確認）
　　・実機動作：確認



・２０１２＿０２＿０８＿３００ＢＰ４［２０１］
  ２０１１＿１２＿０８＿３００ＢＰ４＿ＴＡＮ＿ＮＯ２＿［２００］を元に作成
　①ＦＡＮ不具合修正。
　　内容：トーチＳＷに連動してＦＡＮが停止する。
　　原因：５００ＢＰ４のＦＡＮポートをそのまま適用したため。
　　修正：ＦＡＮ２のポート番号を変更した。
　②ついでに修正
　　・ＦＡＮ１とＰＵＬＳ＿ＯＵＴのポートが重なっていたので、ＦＡＮ１を削除
　　　（もともｔＦＡＮ１はハード的に接続がないので実害はなかったが、気持ち悪いので修正する）
　　・サーマル復帰から７分間はＦＡＮが回転するように変更。
　　　（現状ではサーマル復帰と同時にＦＡＮコントロールシーケンスが動作するので、ＦＡＮ停止状態でサーマルがＯＮ
　　　　し、ＯＦＦするとすぐにＦＡＮが停止する。通常は溶接中にサーマルが働くので、最低７分間はＦＡＮが動作する
　　　　ので、実害はないが、よりよくするため修正する）
　③Ｖｅｒ２．０１



・２０１２＿０５＿２３＿３００ＢＰ４［２０２］
　２０１２＿０２＿０８＿３００ＢＰ４［２０１］を元に作成
　①ナビ設定後の最大最小指令値の設定が手棒モードになっていたので再設定が必要になった。

　・Ｖｅｒ２．０２（仮）



・２０１２＿０５＿３０＿３００ＢＰ４［２０２］
　２０１２＿０５＿２３＿３００ＢＰ４［２０２］を元に作成
　①手棒溶接時の最低指令電流値が１０Ａになっていたのを４Ａに修正。

　・Ｖｅｒ２．０２



・２０１４＿０６＿１１＿３００ＢＰ４［２０３］
　２０１２＿０５＿３０＿３００ＢＰ４［２０２］を元に作成
　①パルス周波数１．１Ｈｚ～１．９Ｈｚ時、”電極短絡有り”の場合、１秒程度でアークが切れていた不具合を修正。
　　原因：
　　　パルス周波数１．１～２．５Ｈｚの間では溶接が始まってからある一定時間（最大１．８秒）溶接電圧を計算しない仕組みになっている。
　　　電極短絡検出の仕組みは、”溶接電圧が設定した検出電圧以下の状態が１秒間続いた場合”検出なので、”電極短絡有り”では、１秒後に
　　　電極短絡を誤検出し、出力を停止（アーク切れ）してしまう。
		（２０１３＿０２＿１３＿５００ＢＰ４より移植）

　・Ｖｅｒ２．０３


・２０１４＿０６＿２４＿３００ＢＰ４［２０３］
　２０１４＿０６＿１１＿３００ＢＰ４［２０３］を元に作成
　①パルス周波数０．５Ｈｚ～０．９Ｈｚ時、”電極短絡有り”の場合、１秒程度でアークが切れていた不具合を修正。
　　対応：パルス周波数０．５Ｈｚ～１．０Ｈｚ時に限り、１周期分（１．０Ｈｚ＝１秒間）は「溶接電圧＝設定した検出電圧」とした。

　・Ｖｅｒ２．０３

・２０１９＿０５＿２９＿３００ＢＰ５＿ＲＺ
　２０１４＿０６＿２４＿３００ＢＰ４［２０３］を元に作成
　①Ｉ／Ｏ入力ＯＫ
　②ＴＩＭＥＲ割込みＯＫ（０．１ｍｓ）
　③シーケンス動作一部確認ＯＫ


・２０１９＿０５＿３０＿３００ＢＰ５＿ＲＺ
・２０１９＿０５＿２９＿３００ＢＰ５＿ＲＺ
　①前パネルとの通信処理を組み込む


・２０１９＿０５＿３０＿３００ＢＰ５＿ＲＺ＿ＮＯ２
  ２０１９＿０５＿３０＿３００ＢＰ５＿ＲＺを元に作成
　①Ｉ／Ｏ作成中


・２０１９＿０６＿０３＿３００ＢＰ５＿ＲＺ
　２０１９＿０５＿３０＿３００ＢＰ５＿ＲＺ＿ＮＯ２を元に作成
　①初期、本、クレータで指令値がＣ２８に行くようにした。
　②ＨＯＴ電流が指令されるようにした。


・２０１９＿０６＿１０＿３００ＢＰ５＿ＲＺ
　２０１９＿０６＿０３＿３００ＢＰ５＿ＲＺを元に作成
　①溶接ナビを有効にした。
　②時刻設定／参照を可能とした。（電源ＯＦＦ時のバックアップが無いため、電源投入時に毎回ＲＴＣの初期化を行う）


・２０１９＿０６＿１７＿３００ＢＰ５＿ＲＺ
　２０１９＿０６＿１０＿３００ＢＰ５＿ＲＺを元に作成
　①Ｃ２８へ「交流周波数」「クリーニング幅」「ＤＣ／ＡＣ切り替え(溶接法)」を送る様にした。


・２０１９＿０７＿０４＿３００ＢＰ５＿ＲＺ
　２０１９＿０６＿１７＿３００ＢＰ５＿ＲＺを元に作成
　①ＦＡＮ３をＦＡＮ１と同様の動作ができるように変更
　②ＭＳ制御シーケンスを追加


・２０１９＿０８＿２１＿３００ＢＰ５＿ＲＺ
　２０１９＿０７＿０４＿３００ＢＰ５＿ＲＺを元に作成
　①試験的に出力指令値の最大値を４００Ａ、最小値を１Ａにする。
　②試験的に詳細メニューにてＰゲイン＝Ｐ２６（２５）／Ｉゲイン＝Ｐ２７（２６）を±９９の範囲で調整できるようにした。
　③試験的に交流周波数の設定範囲を１０Ｈｚ～４００Ｈｚにした。


・２０１９＿０８＿２２＿３００ＢＰ５＿ＲＺ
　２０１９＿０８＿２１＿３００ＢＰ５＿ＲＺを元に作成
　①試験的に交流周波数の設定範囲を１０Ｈｚ～９９０Ｈｚにした。



//-------------------------------------------------------------------------------------------
・２０１９＿０８＿２９＿３００ＢＰ５＿ＲＺ
　２０１９＿０８＿２２＿３００ＢＰ５＿ＲＺを元に作成
　①通信速度を１９２００ｂｐｓから３８４００ｂｐｓに変更
　②ＦＩＦＯ受信が出来る様にした（ＢＰ４前パネルとの互換性を持たせるため送信側のＦＩＦＯ対応は出来ない。）

※ＢＰ４の操作パネルを利用する場合は、通信速度を１９２００ｂｐｓに設定すること。


・２０１９＿０８＿３０＿３００ＢＰ５＿ＲＺ
　２０１９＿０８＿２９＿３００ＢＰ５＿ＲＺと２０１９＿０７＿２４＿３００ＢＰ５＿ＲＺを元に作成
　①ＦＡＮ５をＦＡＮ１と同様の動作ができるように変更
　②ＭＳ用ポート(P1_5)を入力ポートに設定変更　ＭＳは現状P2_3より起動しているが、P1_5が出力ポートだと電圧が出ないため。
		「2019.07.24 horie」部にて

※ＢＰ４の操作パネルを利用する場合は、通信速度を１９２００ｂｐｓに設定すること。



・２０１９＿０９＿０３＿３００ＢＰ５＿ＲＺ
　２０１９＿０８＿３０＿３００ＢＰ５＿ＲＺを元に作成
　①新通信仕様に対応

※ＢＰ４の操作パネルを利用する場合は、通信速度を１９２００ｂｐｓに設定すること。
　また「#define __NEWCOM_PROTOCOL」をコメントにすること。



・２０１９＿０９＿０４＿３００ＢＰ５＿ＲＺ
　２０１９＿０９＿０３＿３００ＢＰ５＿ＲＺを元に作成
　①通信負荷による通信エラーに対応（送信タイミングを100μ秒/バイトに変更。ＦＩＦＯ送信は行わない）

※ＢＰ４の操作パネルを利用する場合は、通信速度を１９２００ｂｐｓに設定すること。
　また「#define __NEWCOM_PROTOCOL」をコメントにすること。




//**************************** 注意（重要）**************************************
//  今後本プログラムを修正または追加される方は以下の事に注意して下さい
//　
//　★gtt_Internal_pack.Dataについて
//　　本変数は参照のみにして下さい。
//　　理由：通信が行われると、ComuniPack.Dataのデータが書き込まれてしまうため。
//　　　　　（変更した内容が元に戻ってしまう）
//　★ComuniPack.Dataについて
//　　本変数はgtt_Internal_pack.Dataへの代入のみに使用して下さい。
//　　また代入はrob_pc_rcv_classのみで行ってください。
//　　理由：不用意にこの変数を書き換えると通信された内容が変わってしまい、
//　　　　　ロボットと溶接機との間のデータに矛盾が生じてしまうため
//　　　　　また、rob_pc_rcv_class以外で代入を行うと溶接機内でデータの矛盾が
//　　　　　生じるため。
//********************************************************************************



